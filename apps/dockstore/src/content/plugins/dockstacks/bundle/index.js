/*　Bundled by DockStore　*/
var $7=Object.create;var{getPrototypeOf:Z7,defineProperty:L4,getOwnPropertyNames:X7}=Object;var Q7=Object.prototype.hasOwnProperty;var z8=($,Z,X)=>{X=$!=null?$7(Z7($)):{};let Q=Z||!$||!$.__esModule?L4(X,"default",{value:$,enumerable:!0}):X;for(let J of X7($))if(!Q7.call(Q,J))L4(Q,J,{get:()=>$[J],enumerable:!0});return Q};var J6=($,Z)=>()=>(Z||$((Z={exports:{}}).exports,Z),Z.exports);var H$=($,Z)=>{for(var X in Z)L4($,X,{get:Z[X],enumerable:!0,configurable:!0,set:(Q)=>Z[X]=()=>Q})};var y2=($,Z)=>()=>($&&(Z=$($=0)),Z);var L6=J6((OR,VY)=>{var CY=12,tw=0,s4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function sw($){var Z=$.indexOf("%");if(Z===-1)return $;var X=$.length,Q="",J=0,Y=0,W=Z,q=CY;while(Z>-1&&Z<X){var M=RY($[Z+1],4),z=RY($[Z+2],0),w=M|z,G=s4[w];if(q=s4[256+q+G],Y=Y<<6|w&s4[364+G],q===CY)Q+=$.slice(J,W),Q+=Y<=65535?String.fromCharCode(Y):String.fromCharCode(55232+(Y>>10),56320+(Y&1023)),Y=0,J=Z+3,Z=W=$.indexOf("%",J);else if(q===tw)return null;else{if(Z+=3,Z<X&&$.charCodeAt(Z)===37)continue;return null}}return Q+$.slice(J)}var rw={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function RY($,Z){var X=rw[$];return X===void 0?255:X<<Z}VY.exports=sw});var D5=y2(()=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */});function O5($,Z="utf-8"){switch(Z.toLowerCase()){case"utf-8":case"utf8":if(typeof globalThis.TextDecoder<"u")return new globalThis.TextDecoder("utf-8").decode($);return sN($);case"utf-16le":return rN($);case"ascii":return aN($);case"latin1":case"iso-8859-1":return eN($);case"windows-1252":return $H($);default:throw RangeError(`Encoding '${Z}' not supported`)}}function sN($){let Z="",X=0;while(X<$.length){let Q=$[X++];if(Q<128)Z+=String.fromCharCode(Q);else if(Q<224){let J=$[X++]&63;Z+=String.fromCharCode((Q&31)<<6|J)}else if(Q<240){let J=$[X++]&63,Y=$[X++]&63;Z+=String.fromCharCode((Q&15)<<12|J<<6|Y)}else{let J=$[X++]&63,Y=$[X++]&63,W=$[X++]&63,q=(Q&7)<<18|J<<12|Y<<6|W;q-=65536,Z+=String.fromCharCode(55296+(q>>10&1023),56320+(q&1023))}}return Z}function rN($){let Z="";for(let X=0;X<$.length;X+=2)Z+=String.fromCharCode($[X]|$[X+1]<<8);return Z}function aN($){return String.fromCharCode(...$.map((Z)=>Z&127))}function eN($){return String.fromCharCode(...$)}function $H($){let Z="";for(let X of $)if(X>=128&&X<=159&&jX[X])Z+=jX[X];else Z+=String.fromCharCode(X);return Z}var jX,tN;var P5=y2(()=>{jX={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},tN={};for(let[$,Z]of Object.entries(jX))tN[Z]=Number.parseInt($)});function g0($){return new DataView($.buffer,$.byteOffset)}class n0{constructor($,Z){this.len=$,this.encoding=Z}get($,Z=0){let X=$.subarray(Z,Z+this.len);return O5(X,this.encoding)}}var L5,c2,c8,r2,K5,S5,j5;var b6=y2(()=>{D5();P5();L5={len:1,get($,Z){return g0($).getUint8(Z)},put($,Z,X){return g0($).setUint8(Z,X),Z+1}},c2={len:2,get($,Z){return g0($).getUint16(Z,!0)},put($,Z,X){return g0($).setUint16(Z,X,!0),Z+2}},c8={len:2,get($,Z){return g0($).getUint16(Z)},put($,Z,X){return g0($).setUint16(Z,X),Z+2}},r2={len:4,get($,Z){return g0($).getUint32(Z,!0)},put($,Z,X){return g0($).setUint32(Z,X,!0),Z+4}},K5={len:4,get($,Z){return g0($).getUint32(Z)},put($,Z,X){return g0($).setUint32(Z,X),Z+4}},S5={len:4,get($,Z){return g0($).getInt32(Z)},put($,Z,X){return g0($).setInt32(Z,X),Z+4}},j5={len:8,get($,Z){return g0($).getBigUint64(Z,!0)},put($,Z,X){return g0($).setBigUint64(Z,X,!0),Z+8}}});var f2,m8;var x6=y2(()=>{f2=class f2 extends Error{constructor(){super("End-Of-Stream");this.name="EndOfStreamError"}};m8=class m8 extends Error{constructor($="The operation was aborted"){super($);this.name="AbortError"}}});class u8{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek($,Z=!1){let X=await this.read($,Z);return this.peekQueue.push($.subarray(0,X)),X}async read($,Z=!1){if($.length===0)return 0;let X=this.readFromPeekBuffer($);if(!this.endOfStream)X+=await this.readRemainderFromStream($.subarray(X),Z);if(X===0&&!Z)throw new f2;return X}readFromPeekBuffer($){let Z=$.length,X=0;while(this.peekQueue.length>0&&Z>0){let Q=this.peekQueue.pop();if(!Q)throw Error("peekData should be defined");let J=Math.min(Q.length,Z);if($.set(Q.subarray(0,J),X),X+=J,Z-=J,J<Q.length)this.peekQueue.push(Q.subarray(J))}return X}async readRemainderFromStream($,Z){let X=0;while(X<$.length&&!this.endOfStream){if(this.interrupted)throw new m8;let Q=await this.readFromStream($.subarray(X),Z);if(Q===0)break;X+=Q}if(!Z&&X<$.length)throw new f2;return X}}var hZ=y2(()=>{x6()});var F5=y2(()=>{x6();hZ()});var _X;var _5=y2(()=>{hZ();_X=class _X extends u8{constructor($){super();this.reader=$}async abort(){return this.close()}async close(){this.reader.releaseLock()}}});var cZ;var CX=y2(()=>{_5();cZ=class cZ extends _X{async readFromStream($,Z){if($.length===0)return 0;let X=await this.reader.read(new Uint8Array($.length),{min:Z?void 0:$.length});if(X.done)this.endOfStream=X.done;if(X.value)return $.set(X.value),X.value.length;return 0}}});var I6;var RX=y2(()=>{x6();hZ();I6=class I6 extends u8{constructor($){super();this.reader=$,this.buffer=null}writeChunk($,Z){let X=Math.min(Z.length,$.length);if($.set(Z.subarray(0,X)),X<Z.length)this.buffer=Z.subarray(X);else this.buffer=null;return X}async readFromStream($,Z){if($.length===0)return 0;let X=0;if(this.buffer)X+=this.writeChunk($,this.buffer);while(X<$.length&&!this.endOfStream){let Q=await this.reader.read();if(Q.done){this.endOfStream=!0;break}if(Q.value)X+=this.writeChunk($.subarray(X),Q.value)}if(!Z&&X===0&&this.endOfStream)throw new f2;return X}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}});function VX($){try{let Z=$.getReader({mode:"byob"});if(Z instanceof ReadableStreamDefaultReader)return new I6(Z);return new cZ(Z)}catch(Z){if(Z instanceof TypeError)return new I6($.getReader());throw Z}}var C5=y2(()=>{CX();RX()});var e$=y2(()=>{x6();F5();CX();RX();C5()});class b${constructor($){if(this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=$?.onClose,$?.abortSignal)$.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken($,Z=this.position){let X=new Uint8Array($.len);if(await this.readBuffer(X,{position:Z})<$.len)throw new f2;return $.get(X,0)}async peekToken($,Z=this.position){let X=new Uint8Array($.len);if(await this.peekBuffer(X,{position:Z})<$.len)throw new f2;return $.get(X,0)}async readNumber($){if(await this.readBuffer(this.numBuffer,{length:$.len})<$.len)throw new f2;return $.get(this.numBuffer,0)}async peekNumber($){if(await this.peekBuffer(this.numBuffer,{length:$.len})<$.len)throw new f2;return $.get(this.numBuffer,0)}async ignore($){if(this.fileInfo.size!==void 0){let Z=this.fileInfo.size-this.position;if($>Z)return this.position+=Z,Z}return this.position+=$,$}async close(){await this.abort(),await this.onClose?.()}normalizeOptions($,Z){if(!this.supportsRandomAccess()&&Z&&Z.position!==void 0&&Z.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:$.length,position:this.position},...Z}}abort(){return Promise.resolve()}}var T6=y2(()=>{e$()});var QH=256000,EX;var R5=y2(()=>{T6();e$();EX=class EX extends b${constructor($,Z){super(Z);this.streamReader=$,this.fileInfo=Z?.fileInfo??{}}async readBuffer($,Z){let X=this.normalizeOptions($,Z),Q=X.position-this.position;if(Q>0)return await this.ignore(Q),this.readBuffer($,Z);if(Q<0)throw Error("`options.position` must be equal or greater than `tokenizer.position`");if(X.length===0)return 0;let J=await this.streamReader.read($.subarray(0,X.length),X.mayBeLess);if(this.position+=J,(!Z||!Z.mayBeLess)&&J<X.length)throw new f2;return J}async peekBuffer($,Z){let X=this.normalizeOptions($,Z),Q=0;if(X.position){let J=X.position-this.position;if(J>0){let Y=new Uint8Array(X.length+J);return Q=await this.peekBuffer(Y,{mayBeLess:X.mayBeLess}),$.set(Y.subarray(J)),Q-J}if(J<0)throw Error("Cannot peek from a negative offset in a stream")}if(X.length>0){try{Q=await this.streamReader.peek($.subarray(0,X.length),X.mayBeLess)}catch(J){if(Z?.mayBeLess&&J instanceof f2)return 0;throw J}if(!X.mayBeLess&&Q<X.length)throw new f2}return Q}async ignore($){let Z=Math.min(QH,$),X=new Uint8Array(Z),Q=0;while(Q<$){let J=$-Q,Y=await this.readBuffer(X,{length:Math.min(Z,J)});if(Y<0)return Y;Q+=Y}return Q}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}});var bX;var V5=y2(()=>{e$();T6();bX=class bX extends b${constructor($,Z){super(Z);this.uint8Array=$,this.fileInfo={...Z?.fileInfo??{},...{size:$.length}}}async readBuffer($,Z){if(Z?.position)this.position=Z.position;let X=await this.peekBuffer($,Z);return this.position+=X,X}async peekBuffer($,Z){let X=this.normalizeOptions($,Z),Q=Math.min(this.uint8Array.length-X.position,X.length);if(!X.mayBeLess&&Q<X.length)throw new f2;return $.set(this.uint8Array.subarray(X.position,X.position+Q)),Q}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});var xX;var E5=y2(()=>{e$();T6();xX=class xX extends b${constructor($,Z){super(Z);this.blob=$,this.fileInfo={...Z?.fileInfo??{},...{size:$.size,mimeType:$.type}}}async readBuffer($,Z){if(Z?.position)this.position=Z.position;let X=await this.peekBuffer($,Z);return this.position+=X,X}async peekBuffer($,Z){let X=this.normalizeOptions($,Z),Q=Math.min(this.blob.size-X.position,X.length);if(!X.mayBeLess&&Q<X.length)throw new f2;let J=await this.blob.slice(X.position,X.position+Q).arrayBuffer();return $.set(new Uint8Array(J)),Q}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});function b5($,Z){let X=VX($),Q=Z??{},J=Q.onClose;return Q.onClose=async()=>{if(await X.close(),J)return J()},new EX(X,Q)}function x5($,Z){return new bX($,Z)}function I5($,Z){return new xX($,Z)}var T5=y2(()=>{e$();R5();V5();E5();e$();T6()});var g5=J6(($x,k5)=>{var p8=1000,i8=p8*60,n8=i8*60,$8=n8*24,YH=$8*7,WH=$8*365.25;k5.exports=function($,Z){Z=Z||{};var X=typeof $;if(X==="string"&&$.length>0)return qH($);else if(X==="number"&&isFinite($))return Z.long?wH($):MH($);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function qH($){if($=String($),$.length>100)return;var Z=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!Z)return;var X=parseFloat(Z[1]),Q=(Z[2]||"ms").toLowerCase();switch(Q){case"years":case"year":case"yrs":case"yr":case"y":return X*WH;case"weeks":case"week":case"w":return X*YH;case"days":case"day":case"d":return X*$8;case"hours":case"hour":case"hrs":case"hr":case"h":return X*n8;case"minutes":case"minute":case"mins":case"min":case"m":return X*i8;case"seconds":case"second":case"secs":case"sec":case"s":return X*p8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}}function MH($){var Z=Math.abs($);if(Z>=$8)return Math.round($/$8)+"d";if(Z>=n8)return Math.round($/n8)+"h";if(Z>=i8)return Math.round($/i8)+"m";if(Z>=p8)return Math.round($/p8)+"s";return $+"ms"}function wH($){var Z=Math.abs($);if(Z>=$8)return mZ($,Z,$8,"day");if(Z>=n8)return mZ($,Z,n8,"hour");if(Z>=i8)return mZ($,Z,i8,"minute");if(Z>=p8)return mZ($,Z,p8,"second");return $+" ms"}function mZ($,Z,X,Q){var J=Z>=X*1.5;return Math.round($/X)+" "+Q+(J?"s":"")}});var d5=J6((Zx,f5)=>{function zH($){X.debug=X,X.default=X,X.coerce=M,X.disable=W,X.enable=J,X.enabled=q,X.humanize=g5(),X.destroy=z,Object.keys($).forEach((w)=>{X[w]=$[w]}),X.names=[],X.skips=[],X.formatters={};function Z(w){let G=0;for(let K=0;K<w.length;K++)G=(G<<5)-G+w.charCodeAt(K),G|=0;return X.colors[Math.abs(G)%X.colors.length]}X.selectColor=Z;function X(w){let G,K=null,B,H;function A(...j){if(!A.enabled)return;let _=A,L=Number(new Date),h=L-(G||L);if(_.diff=h,_.prev=G,_.curr=L,G=L,j[0]=X.coerce(j[0]),typeof j[0]!=="string")j.unshift("%O");let r=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(f,I)=>{if(f==="%%")return"%";r++;let g=X.formatters[I];if(typeof g==="function"){let T=j[r];f=g.call(_,T),j.splice(r,1),r--}return f}),X.formatArgs.call(_,j),(_.log||X.log).apply(_,j)}if(A.namespace=w,A.useColors=X.useColors(),A.color=X.selectColor(w),A.extend=Q,A.destroy=X.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(K!==null)return K;if(B!==X.namespaces)B=X.namespaces,H=X.enabled(w);return H},set:(j)=>{K=j}}),typeof X.init==="function")X.init(A);return A}function Q(w,G){let K=X(this.namespace+(typeof G>"u"?":":G)+w);return K.log=this.log,K}function J(w){X.save(w),X.namespaces=w,X.names=[],X.skips=[];let G=(typeof w==="string"?w:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let K of G)if(K[0]==="-")X.skips.push(K.slice(1));else X.names.push(K)}function Y(w,G){let K=0,B=0,H=-1,A=0;while(K<w.length)if(B<G.length&&(G[B]===w[K]||G[B]==="*"))if(G[B]==="*")H=B,A=K,B++;else K++,B++;else if(H!==-1)B=H+1,A++,K=A;else return!1;while(B<G.length&&G[B]==="*")B++;return B===G.length}function W(){let w=[...X.names,...X.skips.map((G)=>"-"+G)].join(",");return X.enable(""),w}function q(w){for(let G of X.skips)if(Y(w,G))return!1;for(let G of X.names)if(Y(w,G))return!0;return!1}function M(w){if(w instanceof Error)return w.stack||w.message;return w}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return X.enable(X.load()),X}f5.exports=zH});var v5=J6((y5,uZ)=>{y5.formatArgs=GH;y5.save=UH;y5.load=NH;y5.useColors=BH;y5.storage=HH();y5.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();y5.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function BH(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function GH($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+uZ.exports.humanize(this.diff),!this.useColors)return;let Z="color: "+this.color;$.splice(1,0,Z,"color: inherit");let X=0,Q=0;$[0].replace(/%[a-zA-Z%]/g,(J)=>{if(J==="%%")return;if(X++,J==="%c")Q=X}),$.splice(Q,0,Z)}y5.log=console.debug||console.log||(()=>{});function UH($){try{if($)y5.storage.setItem("debug",$);else y5.storage.removeItem("debug")}catch(Z){}}function NH(){let $;try{$=y5.storage.getItem("debug")||y5.storage.getItem("DEBUG")}catch(Z){}if(!$&&typeof process<"u"&&"env"in process)$=process.env.DEBUG;return $}function HH(){try{return localStorage}catch($){}}uZ.exports=d5()(y5);var{formatters:AH}=uZ.exports;AH.j=function($){try{return JSON.stringify($)}catch(Z){return"[UnexpectedJSONParseError]: "+Z.message}}});var Z8,IX,h5,c5,m5;var u5=y2(()=>{b6();Z8={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},IX={get($){return{signature:r2.get($,0),compressedSize:r2.get($,8),uncompressedSize:r2.get($,12)}},len:16},h5={get($){let Z=c2.get($,6);return{signature:r2.get($,0),minVersion:c2.get($,4),dataDescriptor:!!(Z&8),compressedMethod:c2.get($,8),compressedSize:r2.get($,18),uncompressedSize:r2.get($,22),filenameLength:c2.get($,26),extraFieldLength:c2.get($,28),filename:null}},len:30},c5={get($){return{signature:r2.get($,0),nrOfThisDisk:c2.get($,4),nrOfThisDiskWithTheStart:c2.get($,6),nrOfEntriesOnThisDisk:c2.get($,8),nrOfEntriesOfSize:c2.get($,10),sizeOfCd:r2.get($,12),offsetOfStartOfCd:r2.get($,16),zipFileCommentLength:c2.get($,20)}},len:22},m5={get($){let Z=c2.get($,8);return{signature:r2.get($,0),minVersion:c2.get($,6),dataDescriptor:!!(Z&8),compressedMethod:c2.get($,10),compressedSize:r2.get($,20),uncompressedSize:r2.get($,24),filenameLength:c2.get($,28),extraFieldLength:c2.get($,30),fileCommentLength:c2.get($,32),relativeOffsetOfLocalHeader:r2.get($,42),filename:null}},len:46}});function i5($){let Z=new Uint8Array(r2.len);return r2.put(Z,0,$),Z}class g6{constructor($){this.tokenizer=$,this.syncBuffer=new Uint8Array(TX)}async isZip(){return await this.peekSignature()===Z8.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(r2)}async findEndOfCentralDirectoryLocator(){let $=this.tokenizer,Z=Math.min(16384,$.fileInfo.size),X=this.syncBuffer.subarray(0,Z);await this.tokenizer.readBuffer(X,{position:$.fileInfo.size-Z});for(let Q=X.length-4;Q>=0;Q--)if(X[Q]===pZ[0]&&X[Q+1]===pZ[1]&&X[Q+2]===pZ[2]&&X[Q+3]===pZ[3])return $.fileInfo.size-Z+Q;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){T1("Cannot reading central-directory without random-read support");return}T1("Reading central-directory...");let $=this.tokenizer.position,Z=await this.findEndOfCentralDirectoryLocator();if(Z>0){T1("Central-directory 32-bit signature found");let X=await this.tokenizer.readToken(c5,Z),Q=[];this.tokenizer.setPosition(X.offsetOfStartOfCd);for(let J=0;J<X.nrOfEntriesOfSize;++J){let Y=await this.tokenizer.readToken(m5);if(Y.signature!==Z8.CentralFileHeader)throw Error("Expected Central-File-Header signature");Y.filename=await this.tokenizer.readToken(new n0(Y.filenameLength,"utf-8")),await this.tokenizer.ignore(Y.extraFieldLength),await this.tokenizer.ignore(Y.fileCommentLength),Q.push(Y),T1(`Add central-directory file-entry: n=${J+1}/${Q.length}: filename=${Q[J].filename}`)}return this.tokenizer.setPosition($),Q}this.tokenizer.setPosition($)}async unzip($){let Z=await this.readCentralDirectory();if(Z)return this.iterateOverCentralDirectory(Z,$);let X=!1;do{let Q=await this.readLocalFileHeader();if(!Q)break;let J=$(Q);X=!!J.stop;let Y;if(await this.tokenizer.ignore(Q.extraFieldLength),Q.dataDescriptor&&Q.compressedSize===0){let W=[],q=TX;T1("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let M=-1;while(M<0&&q===TX){q=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),M=_H(this.syncBuffer.subarray(0,q),FH);let z=M>=0?M:q;if(J.handler){let w=new Uint8Array(z);await this.tokenizer.readBuffer(w),W.push(w)}else await this.tokenizer.ignore(z)}if(T1(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),J.handler)await this.inflate(Q,CH(W),J.handler)}else if(J.handler)T1(`Reading compressed-file-data: ${Q.compressedSize} bytes`),Y=new Uint8Array(Q.compressedSize),await this.tokenizer.readBuffer(Y),await this.inflate(Q,Y,J.handler);else T1(`Ignoring compressed-file-data: ${Q.compressedSize} bytes`),await this.tokenizer.ignore(Q.compressedSize);if(T1(`Reading data-descriptor at pos=${this.tokenizer.position}`),Q.dataDescriptor){if((await this.tokenizer.readToken(IX)).signature!==134695760)throw Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-IX.len}`)}}while(!X)}async iterateOverCentralDirectory($,Z){for(let X of $){let Q=Z(X);if(Q.handler){this.tokenizer.setPosition(X.relativeOffsetOfLocalHeader);let J=await this.readLocalFileHeader();if(J){await this.tokenizer.ignore(J.extraFieldLength);let Y=new Uint8Array(X.compressedSize);await this.tokenizer.readBuffer(Y),await this.inflate(J,Y,Q.handler)}}if(Q.stop)break}}async inflate($,Z,X){if($.compressedMethod===0)return X(Z);if($.compressedMethod!==8)throw Error(`Unsupported ZIP compression method: ${$.compressedMethod}`);T1(`Decompress filename=${$.filename}, compressed-size=${Z.length}`);let Q=await g6.decompressDeflateRaw(Z);return X(Q)}static async decompressDeflateRaw($){let Z=new ReadableStream({start(J){J.enqueue($),J.close()}}),X=new DecompressionStream("deflate-raw"),Q=Z.pipeThrough(X);try{let Y=await new Response(Q).arrayBuffer();return new Uint8Array(Y)}catch(J){let Y=J instanceof Error?`Failed to deflate ZIP entry: ${J.message}`:"Unknown decompression error in ZIP entry";throw TypeError(Y)}}async readLocalFileHeader(){let $=await this.tokenizer.peekToken(r2);if($===Z8.LocalFileHeader){let Z=await this.tokenizer.readToken(h5);return Z.filename=await this.tokenizer.readToken(new n0(Z.filenameLength,"utf-8")),Z}if($===Z8.CentralFileHeader)return!1;if($===3759263696)throw Error("Encrypted ZIP");throw Error("Unexpected signature")}}function _H($,Z){let X=$.length,Q=Z.length;if(Q>X)return-1;for(let J=0;J<=X-Q;J++){let Y=!0;for(let W=0;W<Q;W++)if($[J+W]!==Z[W]){Y=!1;break}if(Y)return J}return-1}function CH($){let Z=$.reduce((J,Y)=>J+Y.length,0),X=new Uint8Array(Z),Q=0;for(let J of $)X.set(J,Q),Q+=J.length;return X}var p5,T1,TX=262144,FH,pZ;var n5=y2(()=>{b6();u5();p5=z8(v5(),1);T1=p5.default("tokenizer:inflate"),FH=i5(Z8.DataDescriptor),pZ=i5(Z8.EndOfCentralDirectory)});class iZ{constructor($){this.tokenizer=$}inflate(){let $=this.tokenizer;return new ReadableStream({async pull(Z){let X=new Uint8Array(1024),Q=await $.readBuffer(X,{mayBeLess:!0});if(Q===0){Z.close();return}Z.enqueue(X.subarray(0,Q))}}).pipeThrough(new DecompressionStream("gzip"))}}var l5=y2(()=>{n5()});function kX($){let{byteLength:Z}=$;if(Z===6)return $.getUint16(0)*4294967296+$.getUint32(2);if(Z===5)return $.getUint8(0)*4294967296+$.getUint32(1);if(Z===4)return $.getUint32(0);if(Z===3)return $.getUint8(0)*65536+$.getUint16(1);if(Z===2)return $.getUint16(0);if(Z===1)return $.getUint8(0)}var Gx,Ux,Nx;var o5=y2(()=>{Gx={utf8:new globalThis.TextDecoder("utf8")},Ux=new globalThis.TextEncoder,Nx=Array.from({length:256},($,Z)=>Z.toString(16).padStart(2,"0"))});function t5($,Z){if(Z==="utf-16le"){let X=[];for(let Q=0;Q<$.length;Q++){let J=$.charCodeAt(Q);X.push(J&255,J>>8&255)}return X}if(Z==="utf-16be"){let X=[];for(let Q=0;Q<$.length;Q++){let J=$.charCodeAt(Q);X.push(J>>8&255,J&255)}return X}return[...$].map((X)=>X.charCodeAt(0))}function s5($,Z=0){let X=Number.parseInt(new n0(6).get($,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(X))return!1;let Q=256;for(let J=Z;J<Z+148;J++)Q+=$[J];for(let J=Z+156;J<Z+512;J++)Q+=$[J];return X===Q}var r5;var a5=y2(()=>{b6();r5={get:($,Z)=>$[Z+3]&127|$[Z+2]<<7|$[Z+1]<<14|$[Z]<<21,len:4}});var e5,$W;var ZW=y2(()=>{e5=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","rm","ppsm","ppsx","tar.gz","reg","dat"],$W=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/vnd.apache.arrow.file","video/mp4","audio/midi","video/matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/vnd.apache.parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia","application/x-ms-regedit","application/x-ft-windows-registry-hive"]});var XW={};H$(XW,{supportedMimeTypes:()=>TH,supportedExtensions:()=>IH,reasonableDetectionSizeInBytes:()=>nZ,fileTypeStream:()=>xH,fileTypeFromTokenizer:()=>bH,fileTypeFromStream:()=>RH,fileTypeFromBuffer:()=>VH,fileTypeFromBlob:()=>EH,FileTypeParser:()=>X8});async function RH($,Z){return new X8(Z).fromStream($)}async function VH($,Z){return new X8(Z).fromBuffer($)}async function EH($,Z){return new X8(Z).fromBlob($)}function gX($){switch($=$.toLowerCase(),$){case"application/epub+zip":return{ext:"epub",mime:$};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:$};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:$};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:$};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:$};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:$};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:$};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:$};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:$};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:$};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:$};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:$};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:$};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:$};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:$};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:$};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function k1($,Z,X){X={offset:0,...X};for(let[Q,J]of Z.entries())if(X.mask){if(J!==(X.mask[Q]&$[Q+X.offset]))return!1}else if(J!==$[Q+X.offset])return!1;return!0}async function bH($,Z){return new X8(Z).fromTokenizer($)}async function xH($,Z){return new X8(Z).toDetectionStream($,Z)}class X8{constructor($){this.options={mpegOffsetTolerance:0,...$},this.detectors=[...$?.customDetectors??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:$?.signal}}async fromTokenizer($){let Z=$.position;for(let X of this.detectors){let Q=await X.detect($);if(Q)return Q;if(Z!==$.position)return}}async fromBuffer($){if(!($ instanceof Uint8Array||$ instanceof ArrayBuffer))throw TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof $}\``);let Z=$ instanceof Uint8Array?$:new Uint8Array($);if(!(Z?.length>1))return;return this.fromTokenizer(x5(Z,this.tokenizerOptions))}async fromBlob($){let Z=I5($,this.tokenizerOptions);try{return await this.fromTokenizer(Z)}finally{await Z.close()}}async fromStream($){let Z=b5($,this.tokenizerOptions);try{return await this.fromTokenizer(Z)}finally{await Z.close()}}async toDetectionStream($,Z){let{sampleSize:X=nZ}=Z,Q,J,Y=$.getReader({mode:"byob"});try{let{value:M,done:z}=await Y.read(new Uint8Array(X));if(J=M,!z&&M)try{Q=await this.fromBuffer(M.subarray(0,X))}catch(w){if(!(w instanceof f2))throw w;Q=void 0}J=M}finally{Y.releaseLock()}let W=new TransformStream({async start(M){M.enqueue(J)},transform(M,z){z.enqueue(M)}}),q=$.pipeThrough(W);return q.fileType=Q,q}check($,Z){return k1(this.buffer,$,Z)}checkString($,Z){return this.check(t5($,Z?.encoding),Z)}detectConfident=async($)=>{if(this.buffer=new Uint8Array(nZ),$.fileInfo.size===void 0)$.fileInfo.size=Number.MAX_SAFE_INTEGER;if(this.tokenizer=$,await $.peekBuffer(this.buffer,{length:32,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33])){if(await $.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))return{ext:"eps",mime:"application/eps"};return{ext:"ps",mime:"application/postscript"}}if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident($);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8])){let X=new iZ($).inflate(),Q=!0;try{let J;try{J=await this.fromStream(X)}catch{Q=!1}if(J&&J.ext==="tar")return{ext:"tar.gz",mime:"application/gzip"}}finally{if(Q)await X.cancel()}return{ext:"gz",mime:"application/gzip"}}if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await $.ignore(6);let Z=await $.readToken(r5);if($.position+Z>$.fileInfo.size)return{ext:"mp3",mime:"audio/mpeg"};return await $.ignore(Z),this.fromTokenizer($)}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255])){if(this.check([247],{offset:3}))return{ext:"jls",mime:"image/jls"};return{ext:"jpg",mime:"image/jpeg"}}if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let Z;return await new g6($).unzip((X)=>{switch(X.filename){case"META-INF/mozilla.rsa":return Z={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return Z={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(Q){let J=new TextDecoder("utf-8").decode(Q).trim();Z=gX(J)},stop:!0};case"[Content_Types].xml":return{async handler(Q){let J=new TextDecoder("utf-8").decode(Q),Y=J.indexOf('.main+xml"');if(Y===-1){if(J.includes('ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml"'))Z=gX("application/vnd.ms-package.3dmanufacturing-3dmodel+xml")}else{J=J.slice(0,Math.max(0,Y));let W=J.lastIndexOf('"'),q=J.slice(Math.max(0,W+1));Z=gX(q)}},stop:!0};default:if(/classes\d*\.dex/.test(X.filename))return Z={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0};return{}}}).catch((X)=>{if(!(X instanceof f2))throw X}),Z??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await $.ignore(28);let Z=new Uint8Array(8);if(await $.readBuffer(Z),k1(Z,[79,112,117,115,72,101,97,100]))return{ext:"opus",mime:"audio/ogg; codecs=opus"};if(k1(Z,[128,116,104,101,111,114,97]))return{ext:"ogv",mime:"video/ogg"};if(k1(Z,[1,118,105,100,101,111,0]))return{ext:"ogm",mime:"video/ogg"};if(k1(Z,[127,70,76,65,67]))return{ext:"oga",mime:"audio/ogg"};if(k1(Z,[83,112,101,101,120,32,32]))return{ext:"spx",mime:"audio/ogg"};if(k1(Z,[1,118,111,114,98,105,115]))return{ext:"ogg",mime:"audio/ogg"};return{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF"))return{ext:"pdf",mime:"application/pdf"};if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let Z=await this.readTiffHeader(!1);if(Z)return Z}if(this.check([77,77])){let Z=await this.readTiffHeader(!0);if(Z)return Z}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function Z(){let W=await $.peekNumber(L5),q=128,M=0;while((W&q)===0&&q!==0)++M,q>>=1;let z=new Uint8Array(M+1);return await $.readBuffer(z),z}async function X(){let W=await Z(),q=await Z();q[0]^=128>>q.length-1;let M=Math.min(6,q.length),z=new DataView(W.buffer),w=new DataView(q.buffer,q.length-M,M);return{id:kX(z),len:kX(w)}}async function Q(W){while(W>0){let q=await X();if(q.id===17026)return(await $.readToken(new n0(q.len))).replaceAll(/\00.*$/g,"");await $.ignore(q.len),--W}}let J=await X();switch(await Q(J.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1")||this.checkString("PARE"))return{ext:"parquet",mime:"application/vnd.apache.parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.checkString("regf"))return{ext:"dat",mime:"application/x-ft-windows-registry-hive"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let Z=new n0(4,"latin1").get(this.buffer,2);if(Z.match("^d*")&&Z>=1000&&Z<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){if(await $.ignore(8),await $.readToken(new n0(13,"ascii"))==="debian-binary")return{ext:"deb",mime:"application/x-deb"};return{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("WEBVTT")&&[`
`,"\r","\t"," ","\x00"].some((Z)=>this.checkString(Z,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await $.ignore(8);async function Z(){return{length:await $.readToken(S5),type:await $.readToken(new n0(4,"latin1"))}}do{let X=await Z();if(X.length<0)return;switch(X.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await $.ignore(X.length+4)}}while($.position+8<$.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/vnd.apache.arrow.file"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let Z=new n0(4,"latin1").get(this.buffer,8).replace("\x00"," ").trim();switch(Z){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(Z.startsWith("3g")){if(Z.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.checkString(`REGEDIT4\r
`))return{ext:"reg",mime:"application/x-ms-regedit"};if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function Z(){let X=new Uint8Array(16);return await $.readBuffer(X),{id:X,size:Number(await $.readToken(j5))}}await $.ignore(30);while($.position+24<$.fileInfo.size){let X=await Z(),Q=X.size-24;if(k1(X.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let J=new Uint8Array(16);if(Q-=await $.readBuffer(J),k1(J,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(k1(J,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await $.ignore(Q)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await $.ignore(20),await $.readToken(new n0(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255])){if(this.checkString("<?xml ",{offset:2,encoding:"utf-16be"}))return{ext:"xml",mime:"application/xml"};return}if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await $.peekBuffer(this.buffer,{length:Math.min(256,$.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let Z=new DataView(this.buffer.buffer).getUint32(12,!0);if(Z>12&&this.buffer.length>=Z+16)try{let X=new TextDecoder().decode(this.buffer.subarray(16,Z+16));if(JSON.parse(X).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \x00"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await $.peekBuffer(this.buffer,{length:Math.min(512,$.fileInfo.size),mayBeLess:!0}),this.checkString("ustar",{offset:257})&&(this.checkString("\x00",{offset:262})||this.checkString(" ",{offset:262}))||this.check([0,0,0,0,0,0],{offset:257})&&s5(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){if(this.checkString("<?xml ",{offset:2,encoding:"utf-16le"}))return{ext:"xml",mime:"application/xml"};if(this.check([255,14],{offset:2})&&this.checkString("SketchUp Model",{offset:4,encoding:"utf-16le"}))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(this.checkString(`Windows Registry Editor Version 5.00\r
`,{offset:2,encoding:"utf-16le"}))return{ext:"reg",mime:"application/x-ms-regedit"};return}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}};detectImprecise=async($)=>{if(this.buffer=new Uint8Array(nZ),await $.peekBuffer(this.buffer,{length:Math.min(8,$.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await $.peekBuffer(this.buffer,{length:Math.min(2+this.options.mpegOffsetTolerance,$.fileInfo.size),mayBeLess:!0}),this.buffer.length>=2+this.options.mpegOffsetTolerance)for(let Z=0;Z<=this.options.mpegOffsetTolerance;++Z){let X=this.scanMpeg(Z);if(X)return X}};async readTiffTag($){let Z=await this.tokenizer.readToken($?c8:c2);switch(this.tokenizer.ignore(10),Z){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD($){let Z=await this.tokenizer.readToken($?c8:c2);for(let X=0;X<Z;++X){let Q=await this.readTiffTag($);if(Q)return Q}}async readTiffHeader($){let Z=($?c8:c2).get(this.buffer,2),X=($?K5:r2).get(this.buffer,4);if(Z===42){if(X>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(X>=8){let J=($?c8:c2).get(this.buffer,8),Y=($?c8:c2).get(this.buffer,10);if(J===28&&Y===254||J===31&&Y===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(X),await this.readTiffIFD($)??{ext:"tif",mime:"image/tiff"}}if(Z===43)return{ext:"tif",mime:"image/tiff"}}scanMpeg($){if(this.check([255,224],{offset:$,mask:[255,224]})){if(this.check([16],{offset:$+1,mask:[22]})){if(this.check([8],{offset:$+1,mask:[8]}))return{ext:"aac",mime:"audio/aac"};return{ext:"aac",mime:"audio/aac"}}if(this.check([2],{offset:$+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:$+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:$+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}}var nZ=4100,IH,TH;var QW=y2(()=>{b6();T5();l5();o5();a5();ZW();IH=new Set(e5),TH=new Set($W)});var LW=J6((DW)=>{Object.defineProperty(DW,"__esModule",{value:!0});DW.parseCookie=HW;DW.parse=HW;DW.stringifyCookie=WA;DW.stringifySetCookie=eZ;DW.serialize=eZ;DW.parseSetCookie=qA;DW.stringifySetCookie=eZ;DW.serialize=eZ;var UW=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,NW=/^[\u0021-\u003A\u003C-\u007E]*$/,ZA=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,XA=/^[\u0020-\u003A\u003D-\u007E]*$/,QA=/^-?\d+$/,JA=Object.prototype.toString,YA=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function HW($,Z){let X=new YA,Q=$.length;if(Q<2)return X;let J=Z?.decode||AW,Y=0;do{let W=vX($,Y,Q);if(W===-1)break;let q=yX($,Y,Q);if(W>q){Y=$.lastIndexOf(";",W-1)+1;continue}let M=x$($,Y,W);if(X[M]===void 0)X[M]=J(x$($,W+1,q));Y=q+1}while(Y<Q);return X}function WA($,Z){let X=Z?.encode||encodeURIComponent,Q=[];for(let J of Object.keys($)){let Y=$[J];if(Y===void 0)continue;if(!UW.test(J))throw TypeError(`cookie name is invalid: ${J}`);let W=X(Y);if(!NW.test(W))throw TypeError(`cookie val is invalid: ${Y}`);Q.push(`${J}=${W}`)}return Q.join("; ")}function eZ($,Z,X){let Q=typeof $==="object"?$:{...X,name:$,value:String(Z)},Y=(typeof Z==="object"?Z:X)?.encode||encodeURIComponent;if(!UW.test(Q.name))throw TypeError(`argument name is invalid: ${Q.name}`);let W=Q.value?Y(Q.value):"";if(!NW.test(W))throw TypeError(`argument val is invalid: ${Q.value}`);let q=Q.name+"="+W;if(Q.maxAge!==void 0){if(!Number.isInteger(Q.maxAge))throw TypeError(`option maxAge is invalid: ${Q.maxAge}`);q+="; Max-Age="+Q.maxAge}if(Q.domain){if(!ZA.test(Q.domain))throw TypeError(`option domain is invalid: ${Q.domain}`);q+="; Domain="+Q.domain}if(Q.path){if(!XA.test(Q.path))throw TypeError(`option path is invalid: ${Q.path}`);q+="; Path="+Q.path}if(Q.expires){if(!MA(Q.expires)||!Number.isFinite(Q.expires.valueOf()))throw TypeError(`option expires is invalid: ${Q.expires}`);q+="; Expires="+Q.expires.toUTCString()}if(Q.httpOnly)q+="; HttpOnly";if(Q.secure)q+="; Secure";if(Q.partitioned)q+="; Partitioned";if(Q.priority)switch(typeof Q.priority==="string"?Q.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${Q.priority}`)}if(Q.sameSite)switch(typeof Q.sameSite==="string"?Q.sameSite.toLowerCase():Q.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${Q.sameSite}`)}return q}function qA($,Z){let X=Z?.decode||AW,Q=$.length,J=yX($,0,Q),Y=vX($,0,J),W=Y===-1?{name:"",value:X(x$($,0,J))}:{name:x$($,0,Y),value:X(x$($,Y+1,J))},q=J+1;while(q<Q){let M=yX($,q,Q),z=vX($,q,M),w=z===-1?x$($,q,M):x$($,q,z),G=z===-1?void 0:x$($,z+1,M);switch(w.toLowerCase()){case"httponly":W.httpOnly=!0;break;case"secure":W.secure=!0;break;case"partitioned":W.partitioned=!0;break;case"domain":W.domain=G;break;case"path":W.path=G;break;case"max-age":if(G&&QA.test(G))W.maxAge=Number(G);break;case"expires":if(!G)break;let K=new Date(G);if(Number.isFinite(K.valueOf()))W.expires=K;break;case"priority":if(!G)break;let B=G.toLowerCase();if(B==="low"||B==="medium"||B==="high")W.priority=B;break;case"samesite":if(!G)break;let H=G.toLowerCase();if(H==="lax"||H==="strict"||H==="none")W.sameSite=H;break}q=M+1}return W}function yX($,Z,X){let Q=$.indexOf(";",Z);return Q===-1?X:Q}function vX($,Z,X){let Q=$.indexOf("=",Z);return Q<X?Q:-1}function x$($,Z,X){let Q=Z,J=X;do{let Y=$.charCodeAt(Q);if(Y!==32&&Y!==9)break}while(++Q<J);while(J>Q){let Y=$.charCodeAt(J-1);if(Y!==32&&Y!==9)break;J--}return $.slice(Q,J)}function AW($){if($.indexOf("%")===-1)return $;try{return decodeURIComponent($)}catch(Z){return $}}function MA($){return JA.call($)==="[object Date]"}});var B8=($,Z)=>{let X=Z?.length?{}:null;if(X)for(let Q of Z)X[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:X,params:null,wildcardStore:null}},XQ=($,Z)=>({...$,part:Z}),QQ=($)=>({name:$,store:null,inert:null}),K4=class ${constructor(Z={}){if(this.config=Z,Z.lazy)this.find=this.lazyFind;if(Z.onParam&&!Array.isArray(Z.onParam))this.config.onParam=[this.config.onParam]}root={};history=[];deferred=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=(Z,X)=>{if(!this.config.lazy)return this.find;return this.build(),this.find(Z,X)};build(){if(!this.config.lazy)return;for(let[Z,X,Q]of this.deferred)this.add(Z,X,Q,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=(Z,X)=>{let Q=this.root[Z];if(!Q)return null;return l6(X,X.length,Q,0,this.config.onParam)}}add(Z,X,Q,{ignoreError:J=!1,ignoreHistory:Y=!1,lazy:W=this.config.lazy}={}){if(W)return this.find=this.lazyFind,this.deferred.push([Z,X,Q]),Q;if(typeof X!=="string")throw TypeError("Route path must be a string");if(X==="")X="/";else if(X[0]!=="/")X=`/${X}`;let q=X[X.length-1]==="*",M=X.match($.regex.optionalParams);if(M){let B=X.replaceAll("?","");this.add(Z,B,Q,{ignoreError:J,ignoreHistory:Y,lazy:W});for(let H=0;H<M.length;H++){let A=X.replace(M[H],"");this.add(Z,A,Q,{ignoreError:!0,ignoreHistory:Y,lazy:W})}return Q}if(M)X=X.replaceAll("?","");if(this.history.find(([B,H,A])=>B===Z&&H===X))return Q;if(q||M&&X.charCodeAt(X.length-1)===63)X=X.slice(0,-1);if(!Y)this.history.push([Z,X,Q]);let z=X.split($.regex.static),w=X.match($.regex.params)||[];if(z[z.length-1]==="")z.pop();let G;if(!this.root[Z])G=this.root[Z]=B8("/");else G=this.root[Z];let K=0;for(let B=0;B<z.length;++B){let H=z[B];if(B>0){let A=w[K++].slice(1);if(G.params===null)G.params=QQ(A);else if(G.params.name!==A)if(J)return Q;else throw Error(`Cannot create route "${X}" with parameter "${A}" because a route already exists with a different parameter name ("${G.params.name}") in the same location`);let j=G.params;if(j.inert===null){G=j.inert=B8(H);continue}G=j.inert}for(let A=0;;){if(A===H.length){if(A<G.part.length){let j=XQ(G,G.part.slice(A));Object.assign(G,B8(H,[j]))}break}if(A===G.part.length){if(G.inert===null)G.inert={};let j=G.inert[H.charCodeAt(A)];if(j){G=j,H=H.slice(A),A=0;continue}let _=B8(H.slice(A));G.inert[H.charCodeAt(A)]=_,G=_;break}if(H[A]!==G.part[A]){let j=XQ(G,G.part.slice(A)),_=B8(H.slice(A));Object.assign(G,B8(G.part.slice(0,A),[j,_])),G=_;break}++A}}if(K<w.length){let H=w[K].slice(1);if(G.params===null)G.params=QQ(H);else if(G.params.name!==H)if(J)return Q;else throw Error(`Cannot create route "${X}" with parameter "${H}" because a route already exists with a different parameter name ("${G.params.name}") in the same location`);if(G.params.store===null)G.params.store=Q;return G.params.store}if(q){if(G.wildcardStore===null)G.wildcardStore=Q;return G.wildcardStore}if(G.store===null)G.store=Q;return G.store}find(Z,X){let Q=this.root[Z];if(!Q)return null;return l6(X,X.length,Q,0,this.config.onParam)}},l6=($,Z,X,Q,J)=>{let Y=X.part,W=Y.length,q=Q+W;if(W>1){if(q>Z)return null;if(W<15){for(let M=1,z=Q+1;M<W;++M,++z)if(Y.charCodeAt(M)!==$.charCodeAt(z))return null}else if($.slice(Q,q)!==Y)return null}if(q===Z){if(X.store!==null)return{store:X.store,params:{}};if(X.wildcardStore!==null)return{store:X.wildcardStore,params:{"*":""}};return null}if(X.inert!==null){let M=X.inert[$.charCodeAt(q)];if(M!==void 0){let z=l6($,Z,M,q,J);if(z!==null)return z}}if(X.params!==null){let{store:M,name:z,inert:w}=X.params,G=$.indexOf("/",q);if(G!==q){if(G===-1||G>=Z){if(M!==null){let K={};if(K[z]=$.substring(q,Z),J)for(let B=0;B<J.length;B++){let H=J[B](K[z],z);if(H!==void 0)K[z]=H}return{store:M,params:K}}}else if(w!==null){let K=l6($,Z,w,G,J);if(K!==null){if(K.params[z]=$.substring(q,G),J)for(let B=0;B<J.length;B++){let H=J[B](K.params[z],z);if(H!==void 0)K.params[z]=H}return K}}}}if(X.wildcardStore!==null)return{store:X.wildcardStore,params:{"*":$.substring(q,Z)}};return null};var O0={};H$(O0,{IsUndefined:()=>t2,IsUint8Array:()=>m1,IsSymbol:()=>C4,IsString:()=>j2,IsRegExp:()=>W6,IsObject:()=>O2,IsNumber:()=>d0,IsNull:()=>_4,IsIterator:()=>F4,IsFunction:()=>j4,IsDate:()=>d$,IsBoolean:()=>c1,IsBigInt:()=>Y6,IsAsyncIterator:()=>S4,IsArray:()=>o2,HasPropertyKey:()=>o6});function o6($,Z){return Z in $}function S4($){return O2($)&&!o2($)&&!m1($)&&Symbol.asyncIterator in $}function o2($){return Array.isArray($)}function Y6($){return typeof $==="bigint"}function c1($){return typeof $==="boolean"}function d$($){return $ instanceof globalThis.Date}function j4($){return typeof $==="function"}function F4($){return O2($)&&!o2($)&&!m1($)&&Symbol.iterator in $}function _4($){return $===null}function d0($){return typeof $==="number"}function O2($){return typeof $==="object"&&$!==null}function W6($){return $ instanceof globalThis.RegExp}function j2($){return typeof $==="string"}function C4($){return typeof $==="symbol"}function m1($){return $ instanceof globalThis.Uint8Array}function t2($){return $===void 0}function J7($){return $.map((Z)=>t6(Z))}function Y7($){return new Date($.getTime())}function W7($){return new Uint8Array($)}function q7($){return new RegExp($.source,$.flags)}function M7($){let Z={};for(let X of Object.getOwnPropertyNames($))Z[X]=t6($[X]);for(let X of Object.getOwnPropertySymbols($))Z[X]=t6($[X]);return Z}function t6($){return o2($)?J7($):d$($)?Y7($):m1($)?W7($):W6($)?q7($):O2($)?M7($):$}function R2($){return t6($)}function G8($,Z){return Z===void 0?R2($):R2({...Z,...$})}function s6($){return n($)&&globalThis.Symbol.asyncIterator in $}function r6($){return n($)&&globalThis.Symbol.iterator in $}function R4($){return n($)&&(globalThis.Object.getPrototypeOf($)===Object.prototype||globalThis.Object.getPrototypeOf($)===null)}function a6($){return $ instanceof globalThis.Promise}function j0($){return $ instanceof Date&&globalThis.Number.isFinite($.getTime())}function JQ($){return $ instanceof globalThis.Map}function YQ($){return $ instanceof globalThis.Set}function o0($){return globalThis.ArrayBuffer.isView($)}function U8($){return $ instanceof globalThis.Uint8Array}function i($,Z){return Z in $}function n($){return $!==null&&typeof $==="object"}function u($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function V2($){return $===void 0}function u1($){return $===null}function V1($){return typeof $==="boolean"}function c($){return typeof $==="number"}function e6($){return globalThis.Number.isInteger($)}function B0($){return typeof $==="bigint"}function Y2($){return typeof $==="string"}function A$($){return typeof $==="function"}function p1($){return typeof $==="symbol"}function y0($){return B0($)||V1($)||u1($)||c($)||Y2($)||p1($)||V2($)}var _2;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function Z(W,q){return $.ExactOptionalPropertyTypes?q in W:W[q]!==void 0}$.IsExactOptionalProperty=Z;function X(W){let q=n(W);return $.AllowArrayObject?q:q&&!u(W)}$.IsObjectLike=X;function Q(W){return X(W)&&!(W instanceof Date)&&!(W instanceof Uint8Array)}$.IsRecordLike=Q;function J(W){return $.AllowNaN?c(W):Number.isFinite(W)}$.IsNumberLike=J;function Y(W){let q=V2(W);return $.AllowNullVoid?q||W===null:q}$.IsVoidLike=Y})(_2||(_2={}));function w7($){return globalThis.Object.freeze($).map((Z)=>q6(Z))}function z7($){return $}function B7($){return $}function G7($){return $}function U7($){let Z={};for(let X of Object.getOwnPropertyNames($))Z[X]=q6($[X]);for(let X of Object.getOwnPropertySymbols($))Z[X]=q6($[X]);return globalThis.Object.freeze(Z)}function q6($){return o2($)?w7($):d$($)?z7($):m1($)?B7($):W6($)?G7($):O2($)?U7($):$}function F($,Z){let X=Z!==void 0?{...Z,...$}:$;switch(_2.InstanceMode){case"freeze":return q6(X);case"clone":return R2(X);default:return X}}class p extends Error{constructor($){super($)}}var S2=Symbol.for("TypeBox.Transform"),Y1=Symbol.for("TypeBox.Readonly"),X0=Symbol.for("TypeBox.Optional"),t0=Symbol.for("TypeBox.Hint"),P=Symbol.for("TypeBox.Kind");function N8($){return O2($)&&$[Y1]==="Readonly"}function E0($){return O2($)&&$[X0]==="Optional"}function V4($){return X2($,"Any")}function E4($){return X2($,"Argument")}function W1($){return X2($,"Array")}function y$($){return X2($,"AsyncIterator")}function v$($){return X2($,"BigInt")}function i1($){return X2($,"Boolean")}function q1($){return X2($,"Computed")}function M1($){return X2($,"Constructor")}function N7($){return X2($,"Date")}function w1($){return X2($,"Function")}function z1($){return X2($,"Integer")}function v2($){return X2($,"Intersect")}function h$($){return X2($,"Iterator")}function X2($,Z){return O2($)&&P in $&&$[P]===Z}function $Z($){return c1($)||d0($)||j2($)}function v0($){return X2($,"Literal")}function h0($){return X2($,"MappedKey")}function E2($){return X2($,"MappedResult")}function D$($){return X2($,"Never")}function H7($){return X2($,"Not")}function M6($){return X2($,"Null")}function B1($){return X2($,"Number")}function s2($){return X2($,"Object")}function c$($){return X2($,"Promise")}function m$($){return X2($,"Record")}function i2($){return X2($,"Ref")}function b4($){return X2($,"RegExp")}function n1($){return X2($,"String")}function w6($){return X2($,"Symbol")}function c0($){return X2($,"TemplateLiteral")}function A7($){return X2($,"This")}function B2($){return O2($)&&S2 in $}function m0($){return X2($,"Tuple")}function l1($){return X2($,"Undefined")}function W2($){return X2($,"Union")}function D7($){return X2($,"Uint8Array")}function O7($){return X2($,"Unknown")}function P7($){return X2($,"Unsafe")}function L7($){return X2($,"Void")}function O$($){return O2($)&&P in $&&j2($[P])}function T2($){return V4($)||E4($)||W1($)||i1($)||v$($)||y$($)||q1($)||M1($)||N7($)||w1($)||z1($)||v2($)||h$($)||v0($)||h0($)||E2($)||D$($)||H7($)||M6($)||B1($)||s2($)||c$($)||m$($)||i2($)||b4($)||n1($)||w6($)||c0($)||A7($)||m0($)||l1($)||W2($)||D7($)||O7($)||P7($)||L7($)||O$($)}var O={};H$(O,{TypeGuardUnknownTypeError:()=>WQ,IsVoid:()=>lQ,IsUnsafe:()=>nQ,IsUnknown:()=>iQ,IsUnionLiteral:()=>E7,IsUnion:()=>T4,IsUndefined:()=>uQ,IsUint8Array:()=>pQ,IsTuple:()=>mQ,IsTransform:()=>cQ,IsThis:()=>hQ,IsTemplateLiteral:()=>vQ,IsSymbol:()=>yQ,IsString:()=>dQ,IsSchema:()=>b2,IsRegExp:()=>fQ,IsRef:()=>gQ,IsRecursive:()=>V7,IsRecord:()=>kQ,IsReadonly:()=>F7,IsProperties:()=>ZZ,IsPromise:()=>TQ,IsOptional:()=>_7,IsObject:()=>IQ,IsNumber:()=>xQ,IsNull:()=>bQ,IsNot:()=>EQ,IsNever:()=>VQ,IsMappedResult:()=>RQ,IsMappedKey:()=>CQ,IsLiteralValue:()=>_Q,IsLiteralString:()=>jQ,IsLiteralNumber:()=>FQ,IsLiteralBoolean:()=>R7,IsLiteral:()=>B6,IsKindOf:()=>e,IsKind:()=>oQ,IsIterator:()=>SQ,IsIntersect:()=>KQ,IsInteger:()=>LQ,IsImport:()=>C7,IsFunction:()=>PQ,IsDate:()=>OQ,IsConstructor:()=>DQ,IsComputed:()=>AQ,IsBoolean:()=>HQ,IsBigInt:()=>NQ,IsAsyncIterator:()=>UQ,IsArray:()=>GQ,IsArgument:()=>BQ,IsAny:()=>zQ});class WQ extends p{}var K7=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function qQ($){try{return new RegExp($),!0}catch{return!1}}function x4($){if(!j2($))return!1;for(let Z=0;Z<$.length;Z++){let X=$.charCodeAt(Z);if(X>=7&&X<=13||X===27||X===127)return!1}return!0}function MQ($){return I4($)||b2($)}function z6($){return t2($)||Y6($)}function F2($){return t2($)||d0($)}function I4($){return t2($)||c1($)}function P2($){return t2($)||j2($)}function S7($){return t2($)||j2($)&&x4($)&&qQ($)}function j7($){return t2($)||j2($)&&x4($)}function wQ($){return t2($)||b2($)}function F7($){return O2($)&&$[Y1]==="Readonly"}function _7($){return O2($)&&$[X0]==="Optional"}function zQ($){return e($,"Any")&&P2($.$id)}function BQ($){return e($,"Argument")&&d0($.index)}function GQ($){return e($,"Array")&&$.type==="array"&&P2($.$id)&&b2($.items)&&F2($.minItems)&&F2($.maxItems)&&I4($.uniqueItems)&&wQ($.contains)&&F2($.minContains)&&F2($.maxContains)}function UQ($){return e($,"AsyncIterator")&&$.type==="AsyncIterator"&&P2($.$id)&&b2($.items)}function NQ($){return e($,"BigInt")&&$.type==="bigint"&&P2($.$id)&&z6($.exclusiveMaximum)&&z6($.exclusiveMinimum)&&z6($.maximum)&&z6($.minimum)&&z6($.multipleOf)}function HQ($){return e($,"Boolean")&&$.type==="boolean"&&P2($.$id)}function AQ($){return e($,"Computed")&&j2($.target)&&o2($.parameters)&&$.parameters.every((Z)=>b2(Z))}function DQ($){return e($,"Constructor")&&$.type==="Constructor"&&P2($.$id)&&o2($.parameters)&&$.parameters.every((Z)=>b2(Z))&&b2($.returns)}function OQ($){return e($,"Date")&&$.type==="Date"&&P2($.$id)&&F2($.exclusiveMaximumTimestamp)&&F2($.exclusiveMinimumTimestamp)&&F2($.maximumTimestamp)&&F2($.minimumTimestamp)&&F2($.multipleOfTimestamp)}function PQ($){return e($,"Function")&&$.type==="Function"&&P2($.$id)&&o2($.parameters)&&$.parameters.every((Z)=>b2(Z))&&b2($.returns)}function C7($){return e($,"Import")&&o6($,"$defs")&&O2($.$defs)&&ZZ($.$defs)&&o6($,"$ref")&&j2($.$ref)&&$.$ref in $.$defs}function LQ($){return e($,"Integer")&&$.type==="integer"&&P2($.$id)&&F2($.exclusiveMaximum)&&F2($.exclusiveMinimum)&&F2($.maximum)&&F2($.minimum)&&F2($.multipleOf)}function ZZ($){return O2($)&&Object.entries($).every(([Z,X])=>x4(Z)&&b2(X))}function KQ($){return e($,"Intersect")&&(j2($.type)&&$.type!=="object"?!1:!0)&&o2($.allOf)&&$.allOf.every((Z)=>b2(Z)&&!cQ(Z))&&P2($.type)&&(I4($.unevaluatedProperties)||wQ($.unevaluatedProperties))&&P2($.$id)}function SQ($){return e($,"Iterator")&&$.type==="Iterator"&&P2($.$id)&&b2($.items)}function e($,Z){return O2($)&&P in $&&$[P]===Z}function jQ($){return B6($)&&j2($.const)}function FQ($){return B6($)&&d0($.const)}function R7($){return B6($)&&c1($.const)}function B6($){return e($,"Literal")&&P2($.$id)&&_Q($.const)}function _Q($){return c1($)||d0($)||j2($)}function CQ($){return e($,"MappedKey")&&o2($.keys)&&$.keys.every((Z)=>d0(Z)||j2(Z))}function RQ($){return e($,"MappedResult")&&ZZ($.properties)}function VQ($){return e($,"Never")&&O2($.not)&&Object.getOwnPropertyNames($.not).length===0}function EQ($){return e($,"Not")&&b2($.not)}function bQ($){return e($,"Null")&&$.type==="null"&&P2($.$id)}function xQ($){return e($,"Number")&&$.type==="number"&&P2($.$id)&&F2($.exclusiveMaximum)&&F2($.exclusiveMinimum)&&F2($.maximum)&&F2($.minimum)&&F2($.multipleOf)}function IQ($){return e($,"Object")&&$.type==="object"&&P2($.$id)&&ZZ($.properties)&&MQ($.additionalProperties)&&F2($.minProperties)&&F2($.maxProperties)}function TQ($){return e($,"Promise")&&$.type==="Promise"&&P2($.$id)&&b2($.item)}function kQ($){return e($,"Record")&&$.type==="object"&&P2($.$id)&&MQ($.additionalProperties)&&O2($.patternProperties)&&((Z)=>{let X=Object.getOwnPropertyNames(Z.patternProperties);return X.length===1&&qQ(X[0])&&O2(Z.patternProperties)&&b2(Z.patternProperties[X[0]])})($)}function V7($){return O2($)&&t0 in $&&$[t0]==="Recursive"}function gQ($){return e($,"Ref")&&P2($.$id)&&j2($.$ref)}function fQ($){return e($,"RegExp")&&P2($.$id)&&j2($.source)&&j2($.flags)&&F2($.maxLength)&&F2($.minLength)}function dQ($){return e($,"String")&&$.type==="string"&&P2($.$id)&&F2($.minLength)&&F2($.maxLength)&&S7($.pattern)&&j7($.format)}function yQ($){return e($,"Symbol")&&$.type==="symbol"&&P2($.$id)}function vQ($){return e($,"TemplateLiteral")&&$.type==="string"&&j2($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function hQ($){return e($,"This")&&P2($.$id)&&j2($.$ref)}function cQ($){return O2($)&&S2 in $}function mQ($){return e($,"Tuple")&&$.type==="array"&&P2($.$id)&&d0($.minItems)&&d0($.maxItems)&&$.minItems===$.maxItems&&(t2($.items)&&t2($.additionalItems)&&$.minItems===0||o2($.items)&&$.items.every((Z)=>b2(Z)))}function uQ($){return e($,"Undefined")&&$.type==="undefined"&&P2($.$id)}function E7($){return T4($)&&$.anyOf.every((Z)=>jQ(Z)||FQ(Z))}function T4($){return e($,"Union")&&P2($.$id)&&O2($)&&o2($.anyOf)&&$.anyOf.every((Z)=>b2(Z))}function pQ($){return e($,"Uint8Array")&&$.type==="Uint8Array"&&P2($.$id)&&F2($.minByteLength)&&F2($.maxByteLength)}function iQ($){return e($,"Unknown")&&P2($.$id)}function nQ($){return e($,"Unsafe")}function lQ($){return e($,"Void")&&$.type==="void"&&P2($.$id)}function oQ($){return O2($)&&P in $&&j2($[P])&&!K7.includes($[P])}function b2($){return O2($)&&(zQ($)||BQ($)||GQ($)||HQ($)||NQ($)||UQ($)||AQ($)||DQ($)||OQ($)||PQ($)||LQ($)||KQ($)||SQ($)||B6($)||CQ($)||RQ($)||VQ($)||EQ($)||bQ($)||xQ($)||IQ($)||TQ($)||kQ($)||gQ($)||fQ($)||dQ($)||yQ($)||vQ($)||hQ($)||mQ($)||uQ($)||T4($)||pQ($)||iQ($)||nQ($)||lQ($)||oQ($))}var tQ="(true|false)",XZ="(0|[1-9][0-9]*)",sQ="(.*)";var P$="^(0|[1-9][0-9]*)$",L$="^(.*)$",rQ="^(?!.*)$";var D2={};H$(D2,{Set:()=>k7,Has:()=>T7,Get:()=>g7,Entries:()=>b7,Delete:()=>I7,Clear:()=>x7});var H8=new Map;function b7(){return new Map(H8)}function x7(){return H8.clear()}function I7($){return H8.delete($)}function T7($){return H8.has($)}function k7($,Z){H8.set($,Z)}function g7($){return H8.get($)}var Q0={};H$(Q0,{Set:()=>h7,Has:()=>v7,Get:()=>c7,Entries:()=>f7,Delete:()=>y7,Clear:()=>d7});var A8=new Map;function f7(){return new Map(A8)}function d7(){return A8.clear()}function y7($){return A8.delete($)}function v7($){return A8.has($)}function h7($,Z){A8.set($,Z)}function c7($){return A8.get($)}function aQ($,Z){return $.includes(Z)}function eQ($){return[...new Set($)]}function m7($,Z){return $.filter((X)=>Z.includes(X))}function u7($,Z){return $.reduce((X,Q)=>{return m7(X,Q)},Z)}function $J($){return $.length===1?$[0]:$.length>1?u7($.slice(1),$[0]):[]}function ZJ($){let Z=[];for(let X of $)Z.push(...X);return Z}function K$($){return F({[P]:"Any"},$)}function D8($,Z){return F({[P]:"Array",type:"array",items:$},Z)}function XJ($){return F({[P]:"Argument",index:$})}function O8($,Z){return F({[P]:"AsyncIterator",type:"AsyncIterator",items:$},Z)}function C2($,Z,X){return F({[P]:"Computed",target:$,parameters:Z},X)}function p7($,Z){let{[Z]:X,...Q}=$;return Q}function h2($,Z){return Z.reduce((X,Q)=>p7(X,Q),$)}function t($){return F({[P]:"Never",not:{}},$)}function M2($){return F({[P]:"MappedResult",properties:$})}function P8($,Z,X){return F({[P]:"Constructor",type:"Constructor",parameters:$,returns:Z},X)}function E1($,Z,X){return F({[P]:"Function",type:"Function",parameters:$,returns:Z},X)}function G6($,Z){return F({[P]:"Union",anyOf:$},Z)}function i7($){return $.some((Z)=>E0(Z))}function QJ($){return $.map((Z)=>E0(Z)?n7(Z):Z)}function n7($){return h2($,[X0])}function l7($,Z){return i7($)?P0(G6(QJ($),Z)):G6(QJ($),Z)}function b1($,Z){return $.length===1?F($[0],Z):$.length===0?t(Z):l7($,Z)}function G2($,Z){return $.length===0?t(Z):$.length===1?F($[0],Z):G6($,Z)}class k4 extends p{}function o7($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function g4($,Z,X){return $[Z]===X&&$.charCodeAt(Z-1)!==92}function t1($,Z){return g4($,Z,"(")}function U6($,Z){return g4($,Z,")")}function JJ($,Z){return g4($,Z,"|")}function t7($){if(!(t1($,0)&&U6($,$.length-1)))return!1;let Z=0;for(let X=0;X<$.length;X++){if(t1($,X))Z+=1;if(U6($,X))Z-=1;if(Z===0&&X!==$.length-1)return!1}return!0}function s7($){return $.slice(1,$.length-1)}function r7($){let Z=0;for(let X=0;X<$.length;X++){if(t1($,X))Z+=1;if(U6($,X))Z-=1;if(JJ($,X)&&Z===0)return!0}return!1}function a7($){for(let Z=0;Z<$.length;Z++)if(t1($,Z))return!0;return!1}function e7($){let[Z,X]=[0,0],Q=[];for(let Y=0;Y<$.length;Y++){if(t1($,Y))Z+=1;if(U6($,Y))Z-=1;if(JJ($,Y)&&Z===0){let W=$.slice(X,Y);if(W.length>0)Q.push(L8(W));X=Y+1}}let J=$.slice(X);if(J.length>0)Q.push(L8(J));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function $9($){function Z(J,Y){if(!t1(J,Y))throw new k4("TemplateLiteralParser: Index must point to open parens");let W=0;for(let q=Y;q<J.length;q++){if(t1(J,q))W+=1;if(U6(J,q))W-=1;if(W===0)return[Y,q]}throw new k4("TemplateLiteralParser: Unclosed group parens in expression")}function X(J,Y){for(let W=Y;W<J.length;W++)if(t1(J,W))return[Y,W];return[Y,J.length]}let Q=[];for(let J=0;J<$.length;J++)if(t1($,J)){let[Y,W]=Z($,J),q=$.slice(Y,W+1);Q.push(L8(q)),J=W}else{let[Y,W]=X($,J),q=$.slice(Y,W);if(q.length>0)Q.push(L8(q));J=W-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function L8($){return t7($)?L8(s7($)):r7($)?e7($):a7($)?$9($):{type:"const",const:o7($)}}function K8($){return L8($.slice(1,$.length-1))}class YJ extends p{}function Z9($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function X9($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function Q9($){return $.type==="const"&&$.const===".*"}function u$($){return Z9($)||Q9($)?!1:X9($)?!0:$.type==="and"?$.expr.every((Z)=>u$(Z)):$.type==="or"?$.expr.every((Z)=>u$(Z)):$.type==="const"?!0:(()=>{throw new YJ("Unknown expression type")})()}function QZ($){let Z=K8($.pattern);return u$(Z)}class WJ extends p{}function*qJ($){if($.length===1)return yield*$[0];for(let Z of $[0])for(let X of qJ($.slice(1)))yield`${Z}${X}`}function*J9($){return yield*qJ($.expr.map((Z)=>[...N6(Z)]))}function*Y9($){for(let Z of $.expr)yield*N6(Z)}function*W9($){return yield $.const}function*N6($){return $.type==="and"?yield*J9($):$.type==="or"?yield*Y9($):$.type==="const"?yield*W9($):(()=>{throw new WJ("Unknown expression")})()}function S8($){let Z=K8($.pattern);return u$(Z)?[...N6(Z)]:[]}function Q2($,Z){return F({[P]:"Literal",const:$,type:typeof $},Z)}function JZ($){return F({[P]:"Boolean",type:"boolean"},$)}function j8($){return F({[P]:"BigInt",type:"bigint"},$)}function s0($){return F({[P]:"Number",type:"number"},$)}function F0($){return F({[P]:"String",type:"string"},$)}function*q9($){let Z=$.trim().replace(/"|'/g,"");return Z==="boolean"?yield JZ():Z==="number"?yield s0():Z==="bigint"?yield j8():Z==="string"?yield F0():yield(()=>{let X=Z.split("|").map((Q)=>Q2(Q.trim()));return X.length===0?t():X.length===1?X[0]:b1(X)})()}function*M9($){if($[1]!=="{"){let Z=Q2("$"),X=f4($.slice(1));return yield*[Z,...X]}for(let Z=2;Z<$.length;Z++)if($[Z]==="}"){let X=q9($.slice(2,Z)),Q=f4($.slice(Z+1));return yield*[...X,...Q]}yield Q2($)}function*f4($){for(let Z=0;Z<$.length;Z++)if($[Z]==="$"){let X=Q2($.slice(0,Z)),Q=M9($.slice(Z));return yield*[X,...Q]}yield Q2($)}function MJ($){return[...f4($)]}class wJ extends p{}function w9($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zJ($,Z){return c0($)?$.pattern.slice(1,$.pattern.length-1):W2($)?`(${$.anyOf.map((X)=>zJ(X,Z)).join("|")})`:B1($)?`${Z}${XZ}`:z1($)?`${Z}${XZ}`:v$($)?`${Z}${XZ}`:n1($)?`${Z}${sQ}`:v0($)?`${Z}${w9($.const.toString())}`:i1($)?`${Z}${tQ}`:(()=>{throw new wJ(`Unexpected Kind '${$[P]}'`)})()}function d4($){return`^${$.map((Z)=>zJ(Z,"")).join("")}$`}function p$($){let X=S8($).map((Q)=>Q2(Q));return b1(X)}function YZ($,Z){let X=j2($)?d4(MJ($)):d4($);return F({[P]:"TemplateLiteral",type:"string",pattern:X},Z)}function z9($){return S8($).map((X)=>X.toString())}function B9($){let Z=[];for(let X of $)Z.push(...b0(X));return Z}function G9($){return[$.toString()]}function b0($){return[...new Set(c0($)?z9($):W2($)?B9($.anyOf):v0($)?G9($.const):B1($)?["[number]"]:z1($)?["[number]"]:[])]}function U9($,Z,X){let Q={};for(let J of Object.getOwnPropertyNames(Z))Q[J]=S$($,b0(Z[J]),X);return Q}function N9($,Z,X){return U9($,Z.properties,X)}function BJ($,Z,X){let Q=N9($,Z,X);return M2(Q)}function UJ($,Z){return $.map((X)=>NJ(X,Z))}function H9($){return $.filter((Z)=>!D$(Z))}function A9($,Z){return WZ(H9(UJ($,Z)))}function D9($){return $.some((Z)=>D$(Z))?[]:$}function O9($,Z){return b1(D9(UJ($,Z)))}function P9($,Z){return Z in $?$[Z]:Z==="[number]"?b1($):t()}function L9($,Z){return Z==="[number]"?$:t()}function K9($,Z){return Z in $?$[Z]:t()}function NJ($,Z){return v2($)?A9($.allOf,Z):W2($)?O9($.anyOf,Z):m0($)?P9($.items??[],Z):W1($)?L9($.items,Z):s2($)?K9($.properties,Z):t()}function H6($,Z){return Z.map((X)=>NJ($,X))}function GJ($,Z){return b1(H6($,Z))}function S$($,Z,X){if(i2($)||i2(Z)){if(!T2($)||!T2(Z))throw new p("Index types using Ref parameters require both Type and Key to be of TSchema");return C2("Index",[$,Z])}if(E2(Z))return BJ($,Z,X);if(h0(Z))return HJ($,Z,X);return F(T2(Z)?GJ($,b0(Z)):GJ($,Z),X)}function S9($,Z,X){return{[Z]:S$($,[Z],R2(X))}}function j9($,Z,X){return Z.reduce((Q,J)=>{return{...Q,...S9($,J,X)}},{})}function F9($,Z,X){return j9($,Z.keys,X)}function HJ($,Z,X){let Q=F9($,Z,X);return M2(Q)}function F8($,Z){return F({[P]:"Iterator",type:"Iterator",items:$},Z)}function _9($){let Z=[];for(let X in $)if(!E0($[X]))Z.push(X);return Z}function C9($,Z){let X=_9($),Q=X.length>0?{[P]:"Object",type:"object",properties:$,required:X}:{[P]:"Object",type:"object",properties:$};return F(Q,Z)}var U2=C9;function qZ($,Z){return F({[P]:"Promise",type:"Promise",item:$},Z)}function R9($){return F(h2($,[Y1]))}function V9($){return F({...$,[Y1]:"Readonly"})}function E9($,Z){return Z===!1?R9($):V9($)}function x0($,Z){let X=Z??!0;return E2($)?AJ($,X):E9($,X)}function b9($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=x0($[Q],Z);return X}function x9($,Z){return b9($.properties,Z)}function AJ($,Z){let X=x9($,Z);return M2(X)}function r0($,Z){return F($.length>0?{[P]:"Tuple",type:"array",items:$,additionalItems:!1,minItems:$.length,maxItems:$.length}:{[P]:"Tuple",type:"array",minItems:$.length,maxItems:$.length},Z)}function DJ($,Z){return $ in Z?a0($,Z[$]):M2(Z)}function I9($){return{[$]:Q2($)}}function T9($){let Z={};for(let X of $)Z[X]=Q2(X);return Z}function k9($,Z){return aQ(Z,$)?I9($):T9(Z)}function g9($,Z){let X=k9($,Z);return DJ($,X)}function A6($,Z){return Z.map((X)=>a0($,X))}function f9($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames(Z))X[Q]=a0($,Z[Q]);return X}function a0($,Z){let X={...Z};return E0(Z)?P0(a0($,h2(Z,[X0]))):N8(Z)?x0(a0($,h2(Z,[Y1]))):E2(Z)?DJ($,Z.properties):h0(Z)?g9($,Z.keys):M1(Z)?P8(A6($,Z.parameters),a0($,Z.returns),X):w1(Z)?E1(A6($,Z.parameters),a0($,Z.returns),X):y$(Z)?O8(a0($,Z.items),X):h$(Z)?F8(a0($,Z.items),X):v2(Z)?L0(A6($,Z.allOf),X):W2(Z)?G2(A6($,Z.anyOf),X):m0(Z)?r0(A6($,Z.items??[]),X):s2(Z)?U2(f9($,Z.properties),X):W1(Z)?D8(a0($,Z.items),X):c$(Z)?qZ(a0($,Z.item),X):Z}function d9($,Z){let X={};for(let Q of $)X[Q]=a0(Q,Z);return X}function OJ($,Z,X){let Q=T2($)?b0($):$,J=Z({[P]:"MappedKey",keys:Q}),Y=d9(Q,J);return U2(Y,X)}function y9($){return F(h2($,[X0]))}function v9($){return F({...$,[X0]:"Optional"})}function h9($,Z){return Z===!1?y9($):v9($)}function P0($,Z){let X=Z??!0;return E2($)?PJ($,X):h9($,X)}function c9($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=P0($[Q],Z);return X}function m9($,Z){return c9($.properties,Z)}function PJ($,Z){let X=m9($,Z);return M2(X)}function D6($,Z={}){let X=$.every((J)=>s2(J)),Q=T2(Z.unevaluatedProperties)?{unevaluatedProperties:Z.unevaluatedProperties}:{};return F(Z.unevaluatedProperties===!1||T2(Z.unevaluatedProperties)||X?{...Q,[P]:"Intersect",type:"object",allOf:$}:{...Q,[P]:"Intersect",allOf:$},Z)}function u9($){return $.every((Z)=>E0(Z))}function p9($){return h2($,[X0])}function LJ($){return $.map((Z)=>E0(Z)?p9(Z):Z)}function i9($,Z){return u9($)?P0(D6(LJ($),Z)):D6(LJ($),Z)}function WZ($,Z={}){if($.length===1)return F($[0],Z);if($.length===0)return t(Z);if($.some((X)=>B2(X)))throw Error("Cannot intersect transform types");return i9($,Z)}function L0($,Z){if($.length===1)return F($[0],Z);if($.length===0)return t(Z);if($.some((X)=>B2(X)))throw Error("Cannot intersect transform types");return D6($,Z)}function e0(...$){let[Z,X]=typeof $[0]==="string"?[$[0],$[1]]:[$[0].$id,$[1]];if(typeof Z!=="string")throw new p("Ref: $ref must be a string");return F({[P]:"Ref",$ref:Z},X)}function n9($,Z){return C2("Awaited",[C2($,Z)])}function l9($){return C2("Awaited",[e0($)])}function o9($){return L0(KJ($))}function t9($){return G2(KJ($))}function s9($){return _8($)}function KJ($){return $.map((Z)=>_8(Z))}function _8($,Z){return F(q1($)?n9($.target,$.parameters):v2($)?o9($.allOf):W2($)?t9($.anyOf):c$($)?s9($.item):i2($)?l9($.$ref):$,Z)}function SJ($){let Z=[];for(let X of $)Z.push(I0(X));return Z}function r9($){let Z=SJ($);return ZJ(Z)}function a9($){let Z=SJ($);return $J(Z)}function e9($){return $.map((Z,X)=>X.toString())}function $q($){return["[number]"]}function Zq($){return globalThis.Object.getOwnPropertyNames($)}function Xq($){if(!y4)return[];return globalThis.Object.getOwnPropertyNames($).map((X)=>{return X[0]==="^"&&X[X.length-1]==="$"?X.slice(1,X.length-1):X})}function I0($){return v2($)?r9($.allOf):W2($)?a9($.anyOf):m0($)?e9($.items??[]):W1($)?$q($.items):s2($)?Zq($.properties):m$($)?Xq($.patternProperties):[]}var y4=!1;function s1($){y4=!0;let Z=I0($);return y4=!1,`^(${Z.map((Q)=>`(${Q})`).join("|")})$`}function Qq($,Z){return C2("KeyOf",[C2($,Z)])}function Jq($){return C2("KeyOf",[e0($)])}function Yq($,Z){let X=I0($),Q=Wq(X),J=b1(Q);return F(J,Z)}function Wq($){return $.map((Z)=>Z==="[number]"?s0():Q2(Z))}function C8($,Z){return q1($)?Qq($.target,$.parameters):i2($)?Jq($.$ref):E2($)?jJ($,Z):Yq($,Z)}function qq($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=C8($[Q],R2(Z));return X}function Mq($,Z){return qq($.properties,Z)}function jJ($,Z){let X=Mq($,Z);return M2(X)}function MZ($){let Z=I0($),X=H6($,Z);return Z.map((Q,J)=>[Z[J],X[J]])}function wq($){let Z=[];for(let X of $)Z.push(...I0(X));return eQ(Z)}function zq($){return $.filter((Z)=>!D$(Z))}function Bq($,Z){let X=[];for(let Q of $)X.push(...H6(Q,[Z]));return zq(X)}function Gq($,Z){let X={};for(let Q of Z)X[Q]=WZ(Bq($,Q));return X}function FJ($,Z){let X=wq($),Q=Gq($,X);return U2(Q,Z)}function wZ($){return F({[P]:"Date",type:"Date"},$)}function zZ($){return F({[P]:"Null",type:"null"},$)}function BZ($){return F({[P]:"Symbol",type:"symbol"},$)}function GZ($){return F({[P]:"Undefined",type:"undefined"},$)}function UZ($){return F({[P]:"Uint8Array",type:"Uint8Array"},$)}function G1($){return F({[P]:"Unknown"},$)}function Uq($){return $.map((Z)=>v4(Z,!1))}function Nq($){let Z={};for(let X of globalThis.Object.getOwnPropertyNames($))Z[X]=x0(v4($[X],!1));return Z}function NZ($,Z){return Z===!0?$:x0($)}function v4($,Z){return S4($)?NZ(K$(),Z):F4($)?NZ(K$(),Z):o2($)?x0(r0(Uq($))):m1($)?UZ():d$($)?wZ():O2($)?NZ(U2(Nq($)),Z):j4($)?NZ(E1([],G1()),Z):t2($)?GZ():_4($)?zZ():C4($)?BZ():Y6($)?j8():d0($)?Q2($):c1($)?Q2($):j2($)?Q2($):U2({})}function _J($,Z){return F(v4($,!0),Z)}function CJ($,Z){return M1($)?r0($.parameters,Z):t(Z)}function RJ($,Z){if(t2($))throw Error("Enum undefined or empty");let X=globalThis.Object.getOwnPropertyNames($).filter((Y)=>isNaN(Y)).map((Y)=>$[Y]),J=[...new Set(X)].map((Y)=>Q2(Y));return G2(J,{...Z,[t0]:"Enum"})}class IJ extends p{}var C;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(C||(C={}));function $1($){return $===C.False?$:C.True}function R8($){throw new IJ($)}function a2($){return O.IsNever($)||O.IsIntersect($)||O.IsUnion($)||O.IsUnknown($)||O.IsAny($)}function e2($,Z){return O.IsNever(Z)?gJ($,Z):O.IsIntersect(Z)?HZ($,Z):O.IsUnion(Z)?p4($,Z):O.IsUnknown(Z)?vJ($,Z):O.IsAny(Z)?u4($,Z):R8("StructuralRight")}function u4($,Z){return C.True}function Hq($,Z){return O.IsIntersect(Z)?HZ($,Z):O.IsUnion(Z)&&Z.anyOf.some((X)=>O.IsAny(X)||O.IsUnknown(X))?C.True:O.IsUnion(Z)?C.Union:O.IsUnknown(Z)?C.True:O.IsAny(Z)?C.True:C.Union}function Aq($,Z){return O.IsUnknown($)?C.False:O.IsAny($)?C.Union:O.IsNever($)?C.True:C.False}function Dq($,Z){return O.IsObject(Z)&&AZ(Z)?C.True:a2(Z)?e2($,Z):!O.IsArray(Z)?C.False:$1(L2($.items,Z.items))}function Oq($,Z){return a2(Z)?e2($,Z):!O.IsAsyncIterator(Z)?C.False:$1(L2($.items,Z.items))}function Pq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsBigInt(Z)?C.True:C.False}function TJ($,Z){return O.IsLiteralBoolean($)?C.True:O.IsBoolean($)?C.True:C.False}function Lq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsBoolean(Z)?C.True:C.False}function Kq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):!O.IsConstructor(Z)?C.False:$.parameters.length>Z.parameters.length?C.False:!$.parameters.every((X,Q)=>$1(L2(Z.parameters[Q],X))===C.True)?C.False:$1(L2($.returns,Z.returns))}function Sq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsDate(Z)?C.True:C.False}function jq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):!O.IsFunction(Z)?C.False:$.parameters.length>Z.parameters.length?C.False:!$.parameters.every((X,Q)=>$1(L2(Z.parameters[Q],X))===C.True)?C.False:$1(L2($.returns,Z.returns))}function kJ($,Z){return O.IsLiteral($)&&O0.IsNumber($.const)?C.True:O.IsNumber($)||O.IsInteger($)?C.True:C.False}function Fq($,Z){return O.IsInteger(Z)||O.IsNumber(Z)?C.True:a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):C.False}function HZ($,Z){return Z.allOf.every((X)=>L2($,X)===C.True)?C.True:C.False}function _q($,Z){return $.allOf.some((X)=>L2(X,Z)===C.True)?C.True:C.False}function Cq($,Z){return a2(Z)?e2($,Z):!O.IsIterator(Z)?C.False:$1(L2($.items,Z.items))}function Rq($,Z){return O.IsLiteral(Z)&&Z.const===$.const?C.True:a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsString(Z)?yJ($,Z):O.IsNumber(Z)?fJ($,Z):O.IsInteger(Z)?kJ($,Z):O.IsBoolean(Z)?TJ($,Z):C.False}function gJ($,Z){return C.False}function Vq($,Z){return C.True}function VJ($){let[Z,X]=[$,0];while(!0){if(!O.IsNot(Z))break;Z=Z.not,X+=1}return X%2===0?Z:G1()}function Eq($,Z){return O.IsNot($)?L2(VJ($),Z):O.IsNot(Z)?L2($,VJ(Z)):R8("Invalid fallthrough for Not")}function bq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsNull(Z)?C.True:C.False}function fJ($,Z){return O.IsLiteralNumber($)?C.True:O.IsNumber($)||O.IsInteger($)?C.True:C.False}function xq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsInteger(Z)||O.IsNumber(Z)?C.True:C.False}function T0($,Z){return Object.getOwnPropertyNames($.properties).length===Z}function EJ($){return AZ($)}function bJ($){return T0($,0)||T0($,1)&&"description"in $.properties&&O.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(O.IsString($.properties.description.anyOf[0])&&O.IsUndefined($.properties.description.anyOf[1])||O.IsString($.properties.description.anyOf[1])&&O.IsUndefined($.properties.description.anyOf[0]))}function h4($){return T0($,0)}function xJ($){return T0($,0)}function Iq($){return T0($,0)}function Tq($){return T0($,0)}function kq($){return AZ($)}function gq($){let Z=s0();return T0($,0)||T0($,1)&&"length"in $.properties&&$1(L2($.properties.length,Z))===C.True}function fq($){return T0($,0)}function AZ($){let Z=s0();return T0($,0)||T0($,1)&&"length"in $.properties&&$1(L2($.properties.length,Z))===C.True}function dq($){let Z=E1([K$()],K$());return T0($,0)||T0($,1)&&"then"in $.properties&&$1(L2($.properties.then,Z))===C.True}function dJ($,Z){return L2($,Z)===C.False?C.False:O.IsOptional($)&&!O.IsOptional(Z)?C.False:C.True}function K0($,Z){return O.IsUnknown($)?C.False:O.IsAny($)?C.Union:O.IsNever($)||O.IsLiteralString($)&&EJ(Z)||O.IsLiteralNumber($)&&h4(Z)||O.IsLiteralBoolean($)&&xJ(Z)||O.IsSymbol($)&&bJ(Z)||O.IsBigInt($)&&Iq(Z)||O.IsString($)&&EJ(Z)||O.IsSymbol($)&&bJ(Z)||O.IsNumber($)&&h4(Z)||O.IsInteger($)&&h4(Z)||O.IsBoolean($)&&xJ(Z)||O.IsUint8Array($)&&kq(Z)||O.IsDate($)&&Tq(Z)||O.IsConstructor($)&&fq(Z)||O.IsFunction($)&&gq(Z)?C.True:O.IsRecord($)&&O.IsString(c4($))?(()=>{return Z[t0]==="Record"?C.True:C.False})():O.IsRecord($)&&O.IsNumber(c4($))?(()=>{return T0(Z,0)?C.True:C.False})():C.False}function yq($,Z){return a2(Z)?e2($,Z):O.IsRecord(Z)?Z1($,Z):!O.IsObject(Z)?C.False:(()=>{for(let X of Object.getOwnPropertyNames(Z.properties)){if(!(X in $.properties)&&!O.IsOptional(Z.properties[X]))return C.False;if(O.IsOptional(Z.properties[X]))return C.True;if(dJ($.properties[X],Z.properties[X])===C.False)return C.False}return C.True})()}function vq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)&&dq(Z)?C.True:!O.IsPromise(Z)?C.False:$1(L2($.item,Z.item))}function c4($){return P$ in $.patternProperties?s0():(L$ in $.patternProperties)?F0():R8("Unknown record key pattern")}function m4($){return P$ in $.patternProperties?$.patternProperties[P$]:(L$ in $.patternProperties)?$.patternProperties[L$]:R8("Unable to get record value schema")}function Z1($,Z){let[X,Q]=[c4(Z),m4(Z)];return O.IsLiteralString($)&&O.IsNumber(X)&&$1(L2($,Q))===C.True?C.True:O.IsUint8Array($)&&O.IsNumber(X)?L2($,Q):O.IsString($)&&O.IsNumber(X)?L2($,Q):O.IsArray($)&&O.IsNumber(X)?L2($,Q):O.IsObject($)?(()=>{for(let J of Object.getOwnPropertyNames($.properties))if(dJ(Q,$.properties[J])===C.False)return C.False;return C.True})():C.False}function hq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):!O.IsRecord(Z)?C.False:L2(m4($),m4(Z))}function cq($,Z){let X=O.IsRegExp($)?F0():$,Q=O.IsRegExp(Z)?F0():Z;return L2(X,Q)}function yJ($,Z){return O.IsLiteral($)&&O0.IsString($.const)?C.True:O.IsString($)?C.True:C.False}function mq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsString(Z)?C.True:C.False}function uq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsSymbol(Z)?C.True:C.False}function pq($,Z){return O.IsTemplateLiteral($)?L2(p$($),Z):O.IsTemplateLiteral(Z)?L2($,p$(Z)):R8("Invalid fallthrough for TemplateLiteral")}function iq($,Z){return O.IsArray(Z)&&$.items!==void 0&&$.items.every((X)=>L2(X,Z.items)===C.True)}function nq($,Z){return O.IsNever($)?C.True:O.IsUnknown($)?C.False:O.IsAny($)?C.Union:C.False}function lq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)&&AZ(Z)?C.True:O.IsArray(Z)&&iq($,Z)?C.True:!O.IsTuple(Z)?C.False:O0.IsUndefined($.items)&&!O0.IsUndefined(Z.items)||!O0.IsUndefined($.items)&&O0.IsUndefined(Z.items)?C.False:O0.IsUndefined($.items)&&!O0.IsUndefined(Z.items)?C.True:$.items.every((X,Q)=>L2(X,Z.items[Q])===C.True)?C.True:C.False}function oq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsUint8Array(Z)?C.True:C.False}function tq($,Z){return a2(Z)?e2($,Z):O.IsObject(Z)?K0($,Z):O.IsRecord(Z)?Z1($,Z):O.IsVoid(Z)?aq($,Z):O.IsUndefined(Z)?C.True:C.False}function p4($,Z){return Z.anyOf.some((X)=>L2($,X)===C.True)?C.True:C.False}function sq($,Z){return $.anyOf.every((X)=>L2(X,Z)===C.True)?C.True:C.False}function vJ($,Z){return C.True}function rq($,Z){return O.IsNever(Z)?gJ($,Z):O.IsIntersect(Z)?HZ($,Z):O.IsUnion(Z)?p4($,Z):O.IsAny(Z)?u4($,Z):O.IsString(Z)?yJ($,Z):O.IsNumber(Z)?fJ($,Z):O.IsInteger(Z)?kJ($,Z):O.IsBoolean(Z)?TJ($,Z):O.IsArray(Z)?Aq($,Z):O.IsTuple(Z)?nq($,Z):O.IsObject(Z)?K0($,Z):O.IsUnknown(Z)?C.True:C.False}function aq($,Z){return O.IsUndefined($)?C.True:O.IsUndefined($)?C.True:C.False}function eq($,Z){return O.IsIntersect(Z)?HZ($,Z):O.IsUnion(Z)?p4($,Z):O.IsUnknown(Z)?vJ($,Z):O.IsAny(Z)?u4($,Z):O.IsObject(Z)?K0($,Z):O.IsVoid(Z)?C.True:C.False}function L2($,Z){return O.IsTemplateLiteral($)||O.IsTemplateLiteral(Z)?pq($,Z):O.IsRegExp($)||O.IsRegExp(Z)?cq($,Z):O.IsNot($)||O.IsNot(Z)?Eq($,Z):O.IsAny($)?Hq($,Z):O.IsArray($)?Dq($,Z):O.IsBigInt($)?Pq($,Z):O.IsBoolean($)?Lq($,Z):O.IsAsyncIterator($)?Oq($,Z):O.IsConstructor($)?Kq($,Z):O.IsDate($)?Sq($,Z):O.IsFunction($)?jq($,Z):O.IsInteger($)?Fq($,Z):O.IsIntersect($)?_q($,Z):O.IsIterator($)?Cq($,Z):O.IsLiteral($)?Rq($,Z):O.IsNever($)?Vq($,Z):O.IsNull($)?bq($,Z):O.IsNumber($)?xq($,Z):O.IsObject($)?yq($,Z):O.IsRecord($)?hq($,Z):O.IsString($)?mq($,Z):O.IsSymbol($)?uq($,Z):O.IsTuple($)?lq($,Z):O.IsPromise($)?vq($,Z):O.IsUint8Array($)?oq($,Z):O.IsUndefined($)?tq($,Z):O.IsUnion($)?sq($,Z):O.IsUnknown($)?rq($,Z):O.IsVoid($)?eq($,Z):R8(`Unknown left type operand '${$[P]}'`)}function j$($,Z){return L2($,Z)}function $M($,Z,X,Q,J){let Y={};for(let W of globalThis.Object.getOwnPropertyNames($))Y[W]=V8($[W],Z,X,Q,R2(J));return Y}function ZM($,Z,X,Q,J){return $M($.properties,Z,X,Q,J)}function hJ($,Z,X,Q,J){let Y=ZM($,Z,X,Q,J);return M2(Y)}function XM($,Z,X,Q){let J=j$($,Z);return J===C.Union?G2([X,Q]):J===C.True?X:Q}function V8($,Z,X,Q,J){return E2($)?hJ($,Z,X,Q,J):h0($)?F(cJ($,Z,X,Q,J)):F(XM($,Z,X,Q),J)}function QM($,Z,X,Q,J){return{[$]:V8(Q2($),Z,X,Q,R2(J))}}function JM($,Z,X,Q,J){return $.reduce((Y,W)=>{return{...Y,...QM(W,Z,X,Q,J)}},{})}function YM($,Z,X,Q,J){return JM($.keys,Z,X,Q,J)}function cJ($,Z,X,Q,J){let Y=YM($,Z,X,Q,J);return M2(Y)}function WM($){return $.allOf.every((Z)=>r1(Z))}function qM($){return $.anyOf.some((Z)=>r1(Z))}function MM($){return!r1($.not)}function r1($){return $[P]==="Intersect"?WM($):$[P]==="Union"?qM($):$[P]==="Not"?MM($):$[P]==="Undefined"?!0:!1}function mJ($,Z){return E8(p$($),Z)}function wM($,Z){let X=$.filter((Q)=>j$(Q,Z)===C.False);return X.length===1?X[0]:G2(X)}function E8($,Z,X={}){if(c0($))return F(mJ($,Z),X);if(E2($))return F(uJ($,Z),X);return F(W2($)?wM($.anyOf,Z):j$($,Z)!==C.False?t():$,X)}function zM($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=E8($[Q],Z);return X}function BM($,Z){return zM($.properties,Z)}function uJ($,Z){let X=BM($,Z);return M2(X)}function pJ($,Z){return b8(p$($),Z)}function GM($,Z){let X=$.filter((Q)=>j$(Q,Z)!==C.False);return X.length===1?X[0]:G2(X)}function b8($,Z,X){if(c0($))return F(pJ($,Z),X);if(E2($))return F(iJ($,Z),X);return F(W2($)?GM($.anyOf,Z):j$($,Z)!==C.False?$:t(),X)}function UM($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=b8($[Q],Z);return X}function NM($,Z){return UM($.properties,Z)}function iJ($,Z){let X=NM($,Z);return M2(X)}function nJ($,Z){return M1($)?F($.returns,Z):t(Z)}function DZ($){return x0(P0($))}function i$($,Z,X){return F({[P]:"Record",type:"object",patternProperties:{[$]:Z}},X)}function i4($,Z,X){let Q={};for(let J of $)Q[J]=Z;return U2(Q,{...X,[t0]:"Record"})}function HM($,Z,X){return QZ($)?i4(b0($),Z,X):i$($.pattern,Z,X)}function AM($,Z,X){return i4(b0(G2($)),Z,X)}function DM($,Z,X){return i4([$.toString()],Z,X)}function OM($,Z,X){return i$($.source,Z,X)}function PM($,Z,X){let Q=t2($.pattern)?L$:$.pattern;return i$(Q,Z,X)}function LM($,Z,X){return i$(L$,Z,X)}function KM($,Z,X){return i$(rQ,Z,X)}function SM($,Z,X){return U2({true:Z,false:Z},X)}function jM($,Z,X){return i$(P$,Z,X)}function FM($,Z,X){return i$(P$,Z,X)}function OZ($,Z,X={}){return W2($)?AM($.anyOf,Z,X):c0($)?HM($,Z,X):v0($)?DM($.const,Z,X):i1($)?SM($,Z,X):z1($)?jM($,Z,X):B1($)?FM($,Z,X):b4($)?OM($,Z,X):n1($)?PM($,Z,X):V4($)?LM($,Z,X):D$($)?KM($,Z,X):t(X)}function PZ($){return globalThis.Object.getOwnPropertyNames($.patternProperties)[0]}function lJ($){let Z=PZ($);return Z===L$?F0():Z===P$?s0():F0({pattern:Z})}function LZ($){return $.patternProperties[PZ($)]}function _M($,Z){return Z.parameters=O6($,Z.parameters),Z.returns=U1($,Z.returns),Z}function CM($,Z){return Z.parameters=O6($,Z.parameters),Z.returns=U1($,Z.returns),Z}function RM($,Z){return Z.allOf=O6($,Z.allOf),Z}function VM($,Z){return Z.anyOf=O6($,Z.anyOf),Z}function EM($,Z){if(t2(Z.items))return Z;return Z.items=O6($,Z.items),Z}function bM($,Z){return Z.items=U1($,Z.items),Z}function xM($,Z){return Z.items=U1($,Z.items),Z}function IM($,Z){return Z.items=U1($,Z.items),Z}function TM($,Z){return Z.item=U1($,Z.item),Z}function kM($,Z){let X=yM($,Z.properties);return{...Z,...U2(X)}}function gM($,Z){let X=U1($,lJ(Z)),Q=U1($,LZ(Z)),J=OZ(X,Q);return{...Z,...J}}function fM($,Z){return Z.index in $?$[Z.index]:G1()}function dM($,Z){let X=N8(Z),Q=E0(Z),J=U1($,Z);return X&&Q?DZ(J):X&&!Q?x0(J):!X&&Q?P0(J):J}function yM($,Z){return globalThis.Object.getOwnPropertyNames(Z).reduce((X,Q)=>{return{...X,[Q]:dM($,Z[Q])}},{})}function O6($,Z){return Z.map((X)=>U1($,X))}function U1($,Z){return M1(Z)?_M($,Z):w1(Z)?CM($,Z):v2(Z)?RM($,Z):W2(Z)?VM($,Z):m0(Z)?EM($,Z):W1(Z)?bM($,Z):y$(Z)?xM($,Z):h$(Z)?IM($,Z):c$(Z)?TM($,Z):s2(Z)?kM($,Z):m$(Z)?gM($,Z):E4(Z)?fM($,Z):Z}function oJ($,Z){return U1(Z,G8($))}function tJ($){return F({[P]:"Integer",type:"integer"},$)}function vM($,Z,X){return{[$]:N1(Q2($),Z,R2(X))}}function hM($,Z,X){return $.reduce((J,Y)=>{return{...J,...vM(Y,Z,X)}},{})}function cM($,Z,X){return hM($.keys,Z,X)}function sJ($,Z,X){let Q=cM($,Z,X);return M2(Q)}function mM($){let[Z,X]=[$.slice(0,1),$.slice(1)];return[Z.toLowerCase(),X].join("")}function uM($){let[Z,X]=[$.slice(0,1),$.slice(1)];return[Z.toUpperCase(),X].join("")}function pM($){return $.toUpperCase()}function iM($){return $.toLowerCase()}function nM($,Z,X){let Q=K8($.pattern);if(!u$(Q))return{...$,pattern:rJ($.pattern,Z)};let W=[...N6(Q)].map((z)=>Q2(z)),q=aJ(W,Z),M=G2(q);return YZ([M],X)}function rJ($,Z){return typeof $==="string"?Z==="Uncapitalize"?mM($):Z==="Capitalize"?uM($):Z==="Uppercase"?pM($):Z==="Lowercase"?iM($):$:$.toString()}function aJ($,Z){return $.map((X)=>N1(X,Z))}function N1($,Z,X={}){return h0($)?sJ($,Z,X):c0($)?nM($,Z,X):W2($)?G2(aJ($.anyOf,Z),X):v0($)?Q2(rJ($.const,Z),X):F($,X)}function eJ($,Z={}){return N1($,"Capitalize",Z)}function $Y($,Z={}){return N1($,"Lowercase",Z)}function ZY($,Z={}){return N1($,"Uncapitalize",Z)}function XY($,Z={}){return N1($,"Uppercase",Z)}function lM($,Z,X){let Q={};for(let J of globalThis.Object.getOwnPropertyNames($))Q[J]=F$($[J],Z,R2(X));return Q}function oM($,Z,X){return lM($.properties,Z,X)}function QY($,Z,X){let Q=oM($,Z,X);return M2(Q)}function tM($,Z){return $.map((X)=>n4(X,Z))}function sM($,Z){return $.map((X)=>n4(X,Z))}function rM($,Z){let{[Z]:X,...Q}=$;return Q}function aM($,Z){return Z.reduce((X,Q)=>rM(X,Q),$)}function eM($,Z){let X=h2($,[S2,"$id","required","properties"]),Q=aM($.properties,Z);return U2(Q,X)}function $w($){let Z=$.reduce((X,Q)=>$Z(Q)?[...X,Q2(Q)]:X,[]);return G2(Z)}function n4($,Z){return v2($)?L0(tM($.allOf,Z)):W2($)?G2(sM($.anyOf,Z)):s2($)?eM($,Z):U2({})}function F$($,Z,X){let Q=o2(Z)?$w(Z):Z,J=T2(Z)?b0(Z):Z,Y=i2($),W=i2(Z);return E2($)?QY($,J,X):h0(Z)?JY($,Z,X):Y&&W?C2("Omit",[$,Q],X):!Y&&W?C2("Omit",[$,Q],X):Y&&!W?C2("Omit",[$,Q],X):F({...n4($,J),...X})}function Zw($,Z,X){return{[Z]:F$($,[Z],R2(X))}}function Xw($,Z,X){return Z.reduce((Q,J)=>{return{...Q,...Zw($,J,X)}},{})}function Qw($,Z,X){return Xw($,Z.keys,X)}function JY($,Z,X){let Q=Qw($,Z,X);return M2(Q)}function Jw($,Z,X){let Q={};for(let J of globalThis.Object.getOwnPropertyNames($))Q[J]=_$($[J],Z,R2(X));return Q}function Yw($,Z,X){return Jw($.properties,Z,X)}function YY($,Z,X){let Q=Yw($,Z,X);return M2(Q)}function Ww($,Z){return $.map((X)=>l4(X,Z))}function qw($,Z){return $.map((X)=>l4(X,Z))}function Mw($,Z){let X={};for(let Q of Z)if(Q in $)X[Q]=$[Q];return X}function ww($,Z){let X=h2($,[S2,"$id","required","properties"]),Q=Mw($.properties,Z);return U2(Q,X)}function zw($){let Z=$.reduce((X,Q)=>$Z(Q)?[...X,Q2(Q)]:X,[]);return G2(Z)}function l4($,Z){return v2($)?L0(Ww($.allOf,Z)):W2($)?G2(qw($.anyOf,Z)):s2($)?ww($,Z):U2({})}function _$($,Z,X){let Q=o2(Z)?zw(Z):Z,J=T2(Z)?b0(Z):Z,Y=i2($),W=i2(Z);return E2($)?YY($,J,X):h0(Z)?WY($,Z,X):Y&&W?C2("Pick",[$,Q],X):!Y&&W?C2("Pick",[$,Q],X):Y&&!W?C2("Pick",[$,Q],X):F({...l4($,J),...X})}function Bw($,Z,X){return{[Z]:_$($,[Z],R2(X))}}function Gw($,Z,X){return Z.reduce((Q,J)=>{return{...Q,...Bw($,J,X)}},{})}function Uw($,Z,X){return Gw($,Z.keys,X)}function WY($,Z,X){let Q=Uw($,Z,X);return M2(Q)}function Nw($,Z){return C2("Partial",[C2($,Z)])}function Hw($){return C2("Partial",[e0($)])}function Aw($){let Z={};for(let X of globalThis.Object.getOwnPropertyNames($))Z[X]=P0($[X]);return Z}function Dw($){let Z=h2($,[S2,"$id","required","properties"]),X=Aw($.properties);return U2(X,Z)}function qY($){return $.map((Z)=>MY(Z))}function MY($){return q1($)?Nw($.target,$.parameters):i2($)?Hw($.$ref):v2($)?L0(qY($.allOf)):W2($)?G2(qY($.anyOf)):s2($)?Dw($):v$($)?$:i1($)?$:z1($)?$:v0($)?$:M6($)?$:B1($)?$:n1($)?$:w6($)?$:l1($)?$:U2({})}function x8($,Z){if(E2($))return wY($,Z);else return F({...MY($),...Z})}function Ow($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=x8($[Q],R2(Z));return X}function Pw($,Z){return Ow($.properties,Z)}function wY($,Z){let X=Pw($,Z);return M2(X)}function Lw($,Z){return C2("Required",[C2($,Z)])}function Kw($){return C2("Required",[e0($)])}function Sw($){let Z={};for(let X of globalThis.Object.getOwnPropertyNames($))Z[X]=h2($[X],[X0]);return Z}function jw($){let Z=h2($,[S2,"$id","required","properties"]),X=Sw($.properties);return U2(X,Z)}function zY($){return $.map((Z)=>BY(Z))}function BY($){return q1($)?Lw($.target,$.parameters):i2($)?Kw($.$ref):v2($)?L0(zY($.allOf)):W2($)?G2(zY($.anyOf)):s2($)?jw($):v$($)?$:i1($)?$:z1($)?$:v0($)?$:M6($)?$:B1($)?$:n1($)?$:w6($)?$:l1($)?$:U2({})}function I8($,Z){if(E2($))return GY($,Z);else return F({...BY($),...Z})}function Fw($,Z){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=I8($[Q],Z);return X}function _w($,Z){return Fw($.properties,Z)}function GY($,Z){let X=_w($,Z);return M2(X)}function Cw($,Z){return Z.map((X)=>{return i2(X)?o4($,X.$ref):u0($,X)})}function o4($,Z){return Z in $?i2($[Z])?o4($,$[Z].$ref):u0($,$[Z]):t()}function Rw($){return _8($[0])}function Vw($){return S$($[0],$[1])}function Ew($){return C8($[0])}function bw($){return x8($[0])}function xw($){return F$($[0],$[1])}function Iw($){return _$($[0],$[1])}function Tw($){return I8($[0])}function kw($,Z,X){let Q=Cw($,X);return Z==="Awaited"?Rw(Q):Z==="Index"?Vw(Q):Z==="KeyOf"?Ew(Q):Z==="Partial"?bw(Q):Z==="Omit"?xw(Q):Z==="Pick"?Iw(Q):Z==="Required"?Tw(Q):t()}function gw($,Z){return D8(u0($,Z))}function fw($,Z){return O8(u0($,Z))}function dw($,Z,X){return P8(P6($,Z),u0($,X))}function yw($,Z,X){return E1(P6($,Z),u0($,X))}function vw($,Z){return L0(P6($,Z))}function hw($,Z){return F8(u0($,Z))}function cw($,Z){return U2(globalThis.Object.keys(Z).reduce((X,Q)=>{return{...X,[Q]:u0($,Z[Q])}},{}))}function mw($,Z){let[X,Q]=[u0($,LZ(Z)),PZ(Z)],J=G8(Z);return J.patternProperties[Q]=X,J}function uw($,Z){return i2(Z)?{...o4($,Z.$ref),[S2]:Z[S2]}:Z}function pw($,Z){return r0(P6($,Z))}function iw($,Z){return G2(P6($,Z))}function P6($,Z){return Z.map((X)=>u0($,X))}function u0($,Z){return E0(Z)?F(u0($,h2(Z,[X0])),Z):N8(Z)?F(u0($,h2(Z,[Y1])),Z):B2(Z)?F(uw($,Z),Z):W1(Z)?F(gw($,Z.items),Z):y$(Z)?F(fw($,Z.items),Z):q1(Z)?F(kw($,Z.target,Z.parameters)):M1(Z)?F(dw($,Z.parameters,Z.returns),Z):w1(Z)?F(yw($,Z.parameters,Z.returns),Z):v2(Z)?F(vw($,Z.allOf),Z):h$(Z)?F(hw($,Z.items),Z):s2(Z)?F(cw($,Z.properties),Z):m$(Z)?F(mw($,Z)):m0(Z)?F(pw($,Z.items||[]),Z):W2(Z)?F(iw($,Z.anyOf),Z):Z}function nw($,Z){return Z in $?u0($,$[Z]):t()}function UY($){return globalThis.Object.getOwnPropertyNames($).reduce((Z,X)=>{return{...Z,[X]:nw($,X)}},{})}class NY{constructor($){let Z=UY($),X=this.WithIdentifiers(Z);this.$defs=X}Import($,Z){let X={...this.$defs,[$]:F(this.$defs[$],Z)};return F({[P]:"Import",$defs:X,$ref:$})}WithIdentifiers($){return globalThis.Object.getOwnPropertyNames($).reduce((Z,X)=>{return{...Z,[X]:{...$[X],$id:X}}},{})}}function HY($){return new NY($)}function AY($,Z){return F({[P]:"Not",not:$},Z)}function DY($,Z){return w1($)?r0($.parameters,Z):t()}var lw=0;function OY($,Z={}){if(t2(Z.$id))Z.$id=`T${lw++}`;let X=G8($({[P]:"This",$ref:`${Z.$id}`}));return X.$id=Z.$id,F({[t0]:"Recursive",...X},Z)}function PY($,Z){let X=j2($)?new globalThis.RegExp($):$;return F({[P]:"RegExp",type:"RegExp",source:X.source,flags:X.flags},Z)}function ow($){return v2($)?$.allOf:W2($)?$.anyOf:m0($)?$.items??[]:[]}function LY($){return ow($)}function KY($,Z){return w1($)?F($.returns,Z):t(Z)}class SY{constructor($){this.schema=$}Decode($){return new jY(this.schema,$)}}class jY{constructor($,Z){this.schema=$,this.decode=Z}EncodeTransform($,Z){let J={Encode:(Y)=>Z[S2].Encode($(Y)),Decode:(Y)=>this.decode(Z[S2].Decode(Y))};return{...Z,[S2]:J}}EncodeSchema($,Z){let X={Decode:this.decode,Encode:$};return{...Z,[S2]:X}}Encode($){return B2(this.schema)?this.EncodeTransform($,this.schema):this.EncodeSchema($,this.schema)}}function FY($){return new SY($)}function KZ($={}){return F({[P]:$[P]??"Unsafe"},$)}function _Y($){return F({[P]:"Void",type:"void"},$)}var t4={};H$(t4,{Void:()=>_Y,Uppercase:()=>XY,Unsafe:()=>KZ,Unknown:()=>G1,Union:()=>G2,Undefined:()=>GZ,Uncapitalize:()=>ZY,Uint8Array:()=>UZ,Tuple:()=>r0,Transform:()=>FY,TemplateLiteral:()=>YZ,Symbol:()=>BZ,String:()=>F0,ReturnType:()=>KY,Rest:()=>LY,Required:()=>I8,RegExp:()=>PY,Ref:()=>e0,Recursive:()=>OY,Record:()=>OZ,ReadonlyOptional:()=>DZ,Readonly:()=>x0,Promise:()=>qZ,Pick:()=>_$,Partial:()=>x8,Parameters:()=>DY,Optional:()=>P0,Omit:()=>F$,Object:()=>U2,Number:()=>s0,Null:()=>zZ,Not:()=>AY,Never:()=>t,Module:()=>HY,Mapped:()=>OJ,Lowercase:()=>$Y,Literal:()=>Q2,KeyOf:()=>C8,Iterator:()=>F8,Intersect:()=>L0,Integer:()=>tJ,Instantiate:()=>oJ,InstanceType:()=>nJ,Index:()=>S$,Function:()=>E1,Extract:()=>b8,Extends:()=>V8,Exclude:()=>E8,Enum:()=>RJ,Date:()=>wZ,ConstructorParameters:()=>CJ,Constructor:()=>P8,Const:()=>_J,Composite:()=>FJ,Capitalize:()=>eJ,Boolean:()=>JZ,BigInt:()=>j8,Awaited:()=>_8,AsyncIterator:()=>O8,Array:()=>D8,Argument:()=>XJ,Any:()=>K$});var H1=t4;var $Q=z8(L6(),1);function aw($){switch($.errorType){case S.ArrayContains:return"Expected array to contain at least one matching value";case S.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case S.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case S.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case S.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case S.ArrayUniqueItems:return"Expected array elements to be unique";case S.Array:return"Expected array";case S.AsyncIterator:return"Expected AsyncIterator";case S.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case S.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case S.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case S.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case S.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case S.BigInt:return"Expected bigint";case S.Boolean:return"Expected boolean";case S.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case S.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case S.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case S.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case S.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case S.Date:return"Expected Date";case S.Function:return"Expected function";case S.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case S.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case S.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case S.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case S.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case S.Integer:return"Expected integer";case S.IntersectUnevaluatedProperties:return"Unexpected property";case S.Intersect:return"Expected all values to match";case S.Iterator:return"Expected Iterator";case S.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case S.Never:return"Never";case S.Not:return"Value should not match";case S.Null:return"Expected null";case S.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case S.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case S.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case S.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case S.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case S.Number:return"Expected number";case S.Object:return"Expected object";case S.ObjectAdditionalProperties:return"Unexpected property";case S.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case S.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case S.ObjectRequiredProperty:return"Expected required property";case S.Promise:return"Expected Promise";case S.RegExp:return"Expected string to match regular expression";case S.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case S.StringFormat:return`Expected string to match '${$.schema.format}' format`;case S.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case S.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case S.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case S.String:return"Expected string";case S.Symbol:return"Expected symbol";case S.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case S.Tuple:return"Expected tuple";case S.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case S.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case S.Uint8Array:return"Expected Uint8Array";case S.Undefined:return"Expected undefined";case S.Union:return"Expected union value";case S.Void:return"Expected void";case S.Kind:return`Expected kind '${$.schema[P]}'`;default:return"Unknown error type"}}var ew=aw;function EY(){return ew}class bY extends p{constructor($){super(`Unable to dereference schema with $id '${$.$ref}'`);this.schema=$}}function $z($,Z){let X=Z.find((Q)=>Q.$id===$.$ref);if(X===void 0)throw new bY($);return q2(X,Z)}function M0($,Z){if(!Y2($.$id)||Z.some((X)=>X.$id===$.$id))return Z;return Z.push($),Z}function q2($,Z){return $[P]==="This"||$[P]==="Ref"?$z($,Z):$}class xY extends p{constructor($){super("Unable to hash value");this.value=$}}var p0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(p0||(p0={}));var T8=BigInt("14695981039346656037"),[Zz,Xz]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Qz=Array.from({length:256}).map(($,Z)=>BigInt(Z)),IY=new Float64Array(1),TY=new DataView(IY.buffer),kY=new Uint8Array(IY.buffer);function*Jz($){let Z=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let X=0;X<Z;X++)yield $>>8*(Z-1-X)&255}function Yz($){S0(p0.Array);for(let Z of $)k8(Z)}function Wz($){S0(p0.Boolean),S0($?1:0)}function qz($){S0(p0.BigInt),TY.setBigInt64(0,$);for(let Z of kY)S0(Z)}function Mz($){S0(p0.Date),k8($.getTime())}function wz($){S0(p0.Null)}function zz($){S0(p0.Number),TY.setFloat64(0,$);for(let Z of kY)S0(Z)}function Bz($){S0(p0.Object);for(let Z of globalThis.Object.getOwnPropertyNames($).sort())k8(Z),k8($[Z])}function Gz($){S0(p0.String);for(let Z=0;Z<$.length;Z++)for(let X of Jz($.charCodeAt(Z)))S0(X)}function Uz($){S0(p0.Symbol),k8($.description)}function Nz($){S0(p0.Uint8Array);for(let Z=0;Z<$.length;Z++)S0($[Z])}function Hz($){return S0(p0.Undefined)}function k8($){if(u($))return Yz($);if(V1($))return Wz($);if(B0($))return qz($);if(j0($))return Mz($);if(u1($))return wz($);if(c($))return zz($);if(n($))return Bz($);if(Y2($))return Gz($);if(p1($))return Uz($);if(U8($))return Nz($);if(V2($))return Hz($);throw new xY($)}function S0($){T8=T8^Qz[$],T8=T8*Zz%Xz}function C$($){return T8=BigInt("14695981039346656037"),k8($),T8}class gY extends p{constructor($){super("Unknown type");this.schema=$}}function Az($){return $[P]==="Any"||$[P]==="Unknown"}function $2($){return $!==void 0}function Dz($,Z,X){return!0}function Oz($,Z,X){return!0}function Pz($,Z,X){if(!u(X))return!1;if($2($.minItems)&&!(X.length>=$.minItems))return!1;if($2($.maxItems)&&!(X.length<=$.maxItems))return!1;if(!X.every((Y)=>w0($.items,Z,Y)))return!1;if($.uniqueItems===!0&&!function(){let Y=new Set;for(let W of X){let q=C$(W);if(Y.has(q))return!1;else Y.add(q)}return!0}())return!1;if(!($2($.contains)||c($.minContains)||c($.maxContains)))return!0;let Q=$2($.contains)?$.contains:t(),J=X.reduce((Y,W)=>w0(Q,Z,W)?Y+1:Y,0);if(J===0)return!1;if(c($.minContains)&&J<$.minContains)return!1;if(c($.maxContains)&&J>$.maxContains)return!1;return!0}function Lz($,Z,X){return s6(X)}function Kz($,Z,X){if(!B0(X))return!1;if($2($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if($2($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if($2($.maximum)&&!(X<=$.maximum))return!1;if($2($.minimum)&&!(X>=$.minimum))return!1;if($2($.multipleOf)&&X%$.multipleOf!==BigInt(0))return!1;return!0}function Sz($,Z,X){return V1(X)}function jz($,Z,X){return w0($.returns,Z,X.prototype)}function Fz($,Z,X){if(!j0(X))return!1;if($2($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))return!1;if($2($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))return!1;if($2($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))return!1;if($2($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))return!1;if($2($.multipleOfTimestamp)&&X.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function _z($,Z,X){return A$(X)}function Cz($,Z,X){let Q=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];return w0(J,[...Z,...Q],X)}function Rz($,Z,X){if(!e6(X))return!1;if($2($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if($2($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if($2($.maximum)&&!(X<=$.maximum))return!1;if($2($.minimum)&&!(X>=$.minimum))return!1;if($2($.multipleOf)&&X%$.multipleOf!==0)return!1;return!0}function Vz($,Z,X){let Q=$.allOf.every((J)=>w0(J,Z,X));if($.unevaluatedProperties===!1){let J=new RegExp(s1($)),Y=Object.getOwnPropertyNames(X).every((W)=>J.test(W));return Q&&Y}else if(T2($.unevaluatedProperties)){let J=new RegExp(s1($)),Y=Object.getOwnPropertyNames(X).every((W)=>J.test(W)||w0($.unevaluatedProperties,Z,X[W]));return Q&&Y}else return Q}function Ez($,Z,X){return r6(X)}function bz($,Z,X){return X===$.const}function xz($,Z,X){return!1}function Iz($,Z,X){return!w0($.not,Z,X)}function Tz($,Z,X){return u1(X)}function kz($,Z,X){if(!_2.IsNumberLike(X))return!1;if($2($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if($2($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if($2($.minimum)&&!(X>=$.minimum))return!1;if($2($.maximum)&&!(X<=$.maximum))return!1;if($2($.multipleOf)&&X%$.multipleOf!==0)return!1;return!0}function gz($,Z,X){if(!_2.IsObjectLike(X))return!1;if($2($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))return!1;if($2($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let J of Q){let Y=$.properties[J];if($.required&&$.required.includes(J)){if(!w0(Y,Z,X[J]))return!1;if((r1(Y)||Az(Y))&&!(J in X))return!1}else if(_2.IsExactOptionalProperty(X,J)&&!w0(Y,Z,X[J]))return!1}if($.additionalProperties===!1){let J=Object.getOwnPropertyNames(X);if($.required&&$.required.length===Q.length&&J.length===Q.length)return!0;else return J.every((Y)=>Q.includes(Y))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(X).every((Y)=>Q.includes(Y)||w0($.additionalProperties,Z,X[Y]));else return!0}function fz($,Z,X){return a6(X)}function dz($,Z,X){if(!_2.IsRecordLike(X))return!1;if($2($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))return!1;if($2($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))return!1;let[Q,J]=Object.entries($.patternProperties)[0],Y=new RegExp(Q),W=Object.entries(X).every(([z,w])=>{return Y.test(z)?w0(J,Z,w):!0}),q=typeof $.additionalProperties==="object"?Object.entries(X).every(([z,w])=>{return!Y.test(z)?w0($.additionalProperties,Z,w):!0}):!0,M=$.additionalProperties===!1?Object.getOwnPropertyNames(X).every((z)=>{return Y.test(z)}):!0;return W&&q&&M}function yz($,Z,X){return w0(q2($,Z),Z,X)}function vz($,Z,X){let Q=new RegExp($.source,$.flags);if($2($.minLength)){if(!(X.length>=$.minLength))return!1}if($2($.maxLength)){if(!(X.length<=$.maxLength))return!1}return Q.test(X)}function hz($,Z,X){if(!Y2(X))return!1;if($2($.minLength)){if(!(X.length>=$.minLength))return!1}if($2($.maxLength)){if(!(X.length<=$.maxLength))return!1}if($2($.pattern)){if(!new RegExp($.pattern).test(X))return!1}if($2($.format)){if(!D2.Has($.format))return!1;return D2.Get($.format)(X)}return!0}function cz($,Z,X){return p1(X)}function mz($,Z,X){return Y2(X)&&new RegExp($.pattern).test(X)}function uz($,Z,X){return w0(q2($,Z),Z,X)}function pz($,Z,X){if(!u(X))return!1;if($.items===void 0&&X.length!==0)return!1;if(X.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!w0($.items[Q],Z,X[Q]))return!1;return!0}function iz($,Z,X){return V2(X)}function nz($,Z,X){return $.anyOf.some((Q)=>w0(Q,Z,X))}function lz($,Z,X){if(!U8(X))return!1;if($2($.maxByteLength)&&!(X.length<=$.maxByteLength))return!1;if($2($.minByteLength)&&!(X.length>=$.minByteLength))return!1;return!0}function oz($,Z,X){return!0}function tz($,Z,X){return _2.IsVoidLike(X)}function sz($,Z,X){if(!Q0.Has($[P]))return!1;return Q0.Get($[P])($,X)}function w0($,Z,X){let Q=$2($.$id)?M0($,Z):Z,J=$;switch(J[P]){case"Any":return Dz(J,Q,X);case"Argument":return Oz(J,Q,X);case"Array":return Pz(J,Q,X);case"AsyncIterator":return Lz(J,Q,X);case"BigInt":return Kz(J,Q,X);case"Boolean":return Sz(J,Q,X);case"Constructor":return jz(J,Q,X);case"Date":return Fz(J,Q,X);case"Function":return _z(J,Q,X);case"Import":return Cz(J,Q,X);case"Integer":return Rz(J,Q,X);case"Intersect":return Vz(J,Q,X);case"Iterator":return Ez(J,Q,X);case"Literal":return bz(J,Q,X);case"Never":return xz(J,Q,X);case"Not":return Iz(J,Q,X);case"Null":return Tz(J,Q,X);case"Number":return kz(J,Q,X);case"Object":return gz(J,Q,X);case"Promise":return fz(J,Q,X);case"Record":return dz(J,Q,X);case"Ref":return yz(J,Q,X);case"RegExp":return vz(J,Q,X);case"String":return hz(J,Q,X);case"Symbol":return cz(J,Q,X);case"TemplateLiteral":return mz(J,Q,X);case"This":return uz(J,Q,X);case"Tuple":return pz(J,Q,X);case"Undefined":return iz(J,Q,X);case"Union":return nz(J,Q,X);case"Uint8Array":return lz(J,Q,X);case"Unknown":return oz(J,Q,X);case"Void":return tz(J,Q,X);default:if(!Q0.Has(J[P]))throw new gY(J);return sz(J,Q,X)}}function s(...$){return $.length===3?w0($[0],$[1],$[2]):w0($[0],[],$[1])}var S;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(S||(S={}));class fY extends p{constructor($){super("Unknown type");this.schema=$}}function a1($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function Z2($){return $!==void 0}class n${constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function d($,Z,X,Q,J=[]){return{type:$,schema:Z,path:X,value:Q,message:EY()({errorType:$,path:X,schema:Z,value:Q,errors:J}),errors:J}}function*rz($,Z,X,Q){}function*az($,Z,X,Q){}function*ez($,Z,X,Q){if(!u(Q))return yield d(S.Array,$,X,Q);if(Z2($.minItems)&&!(Q.length>=$.minItems))yield d(S.ArrayMinItems,$,X,Q);if(Z2($.maxItems)&&!(Q.length<=$.maxItems))yield d(S.ArrayMaxItems,$,X,Q);for(let W=0;W<Q.length;W++)yield*z0($.items,Z,`${X}/${W}`,Q[W]);if($.uniqueItems===!0&&!function(){let W=new Set;for(let q of Q){let M=C$(q);if(W.has(M))return!1;else W.add(M)}return!0}())yield d(S.ArrayUniqueItems,$,X,Q);if(!(Z2($.contains)||Z2($.minContains)||Z2($.maxContains)))return;let J=Z2($.contains)?$.contains:t(),Y=Q.reduce((W,q,M)=>z0(J,Z,`${X}${M}`,q).next().done===!0?W+1:W,0);if(Y===0)yield d(S.ArrayContains,$,X,Q);if(c($.minContains)&&Y<$.minContains)yield d(S.ArrayMinContains,$,X,Q);if(c($.maxContains)&&Y>$.maxContains)yield d(S.ArrayMaxContains,$,X,Q)}function*$B($,Z,X,Q){if(!s6(Q))yield d(S.AsyncIterator,$,X,Q)}function*ZB($,Z,X,Q){if(!B0(Q))return yield d(S.BigInt,$,X,Q);if(Z2($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield d(S.BigIntExclusiveMaximum,$,X,Q);if(Z2($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield d(S.BigIntExclusiveMinimum,$,X,Q);if(Z2($.maximum)&&!(Q<=$.maximum))yield d(S.BigIntMaximum,$,X,Q);if(Z2($.minimum)&&!(Q>=$.minimum))yield d(S.BigIntMinimum,$,X,Q);if(Z2($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield d(S.BigIntMultipleOf,$,X,Q)}function*XB($,Z,X,Q){if(!V1(Q))yield d(S.Boolean,$,X,Q)}function*QB($,Z,X,Q){yield*z0($.returns,Z,X,Q.prototype)}function*JB($,Z,X,Q){if(!j0(Q))return yield d(S.Date,$,X,Q);if(Z2($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield d(S.DateExclusiveMaximumTimestamp,$,X,Q);if(Z2($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield d(S.DateExclusiveMinimumTimestamp,$,X,Q);if(Z2($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield d(S.DateMaximumTimestamp,$,X,Q);if(Z2($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield d(S.DateMinimumTimestamp,$,X,Q);if(Z2($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield d(S.DateMultipleOfTimestamp,$,X,Q)}function*YB($,Z,X,Q){if(!A$(Q))yield d(S.Function,$,X,Q)}function*WB($,Z,X,Q){let J=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];yield*z0(Y,[...Z,...J],X,Q)}function*qB($,Z,X,Q){if(!e6(Q))return yield d(S.Integer,$,X,Q);if(Z2($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield d(S.IntegerExclusiveMaximum,$,X,Q);if(Z2($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield d(S.IntegerExclusiveMinimum,$,X,Q);if(Z2($.maximum)&&!(Q<=$.maximum))yield d(S.IntegerMaximum,$,X,Q);if(Z2($.minimum)&&!(Q>=$.minimum))yield d(S.IntegerMinimum,$,X,Q);if(Z2($.multipleOf)&&Q%$.multipleOf!==0)yield d(S.IntegerMultipleOf,$,X,Q)}function*MB($,Z,X,Q){let J=!1;for(let Y of $.allOf)for(let W of z0(Y,Z,X,Q))J=!0,yield W;if(J)return yield d(S.Intersect,$,X,Q);if($.unevaluatedProperties===!1){let Y=new RegExp(s1($));for(let W of Object.getOwnPropertyNames(Q))if(!Y.test(W))yield d(S.IntersectUnevaluatedProperties,$,`${X}/${W}`,Q)}if(typeof $.unevaluatedProperties==="object"){let Y=new RegExp(s1($));for(let W of Object.getOwnPropertyNames(Q))if(!Y.test(W)){let q=z0($.unevaluatedProperties,Z,`${X}/${W}`,Q[W]).next();if(!q.done)yield q.value}}}function*wB($,Z,X,Q){if(!r6(Q))yield d(S.Iterator,$,X,Q)}function*zB($,Z,X,Q){if(Q!==$.const)yield d(S.Literal,$,X,Q)}function*BB($,Z,X,Q){yield d(S.Never,$,X,Q)}function*GB($,Z,X,Q){if(z0($.not,Z,X,Q).next().done===!0)yield d(S.Not,$,X,Q)}function*UB($,Z,X,Q){if(!u1(Q))yield d(S.Null,$,X,Q)}function*NB($,Z,X,Q){if(!_2.IsNumberLike(Q))return yield d(S.Number,$,X,Q);if(Z2($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield d(S.NumberExclusiveMaximum,$,X,Q);if(Z2($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield d(S.NumberExclusiveMinimum,$,X,Q);if(Z2($.maximum)&&!(Q<=$.maximum))yield d(S.NumberMaximum,$,X,Q);if(Z2($.minimum)&&!(Q>=$.minimum))yield d(S.NumberMinimum,$,X,Q);if(Z2($.multipleOf)&&Q%$.multipleOf!==0)yield d(S.NumberMultipleOf,$,X,Q)}function*HB($,Z,X,Q){if(!_2.IsObjectLike(Q))return yield d(S.Object,$,X,Q);if(Z2($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield d(S.ObjectMinProperties,$,X,Q);if(Z2($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield d(S.ObjectMaxProperties,$,X,Q);let J=Array.isArray($.required)?$.required:[],Y=Object.getOwnPropertyNames($.properties),W=Object.getOwnPropertyNames(Q);for(let q of J){if(W.includes(q))continue;yield d(S.ObjectRequiredProperty,$.properties[q],`${X}/${a1(q)}`,void 0)}if($.additionalProperties===!1){for(let q of W)if(!Y.includes(q))yield d(S.ObjectAdditionalProperties,$,`${X}/${a1(q)}`,Q[q])}if(typeof $.additionalProperties==="object")for(let q of W){if(Y.includes(q))continue;yield*z0($.additionalProperties,Z,`${X}/${a1(q)}`,Q[q])}for(let q of Y){let M=$.properties[q];if($.required&&$.required.includes(q)){if(yield*z0(M,Z,`${X}/${a1(q)}`,Q[q]),r1($)&&!(q in Q))yield d(S.ObjectRequiredProperty,M,`${X}/${a1(q)}`,void 0)}else if(_2.IsExactOptionalProperty(Q,q))yield*z0(M,Z,`${X}/${a1(q)}`,Q[q])}}function*AB($,Z,X,Q){if(!a6(Q))yield d(S.Promise,$,X,Q)}function*DB($,Z,X,Q){if(!_2.IsRecordLike(Q))return yield d(S.Object,$,X,Q);if(Z2($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield d(S.ObjectMinProperties,$,X,Q);if(Z2($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield d(S.ObjectMaxProperties,$,X,Q);let[J,Y]=Object.entries($.patternProperties)[0],W=new RegExp(J);for(let[q,M]of Object.entries(Q))if(W.test(q))yield*z0(Y,Z,`${X}/${a1(q)}`,M);if(typeof $.additionalProperties==="object"){for(let[q,M]of Object.entries(Q))if(!W.test(q))yield*z0($.additionalProperties,Z,`${X}/${a1(q)}`,M)}if($.additionalProperties===!1)for(let[q,M]of Object.entries(Q)){if(W.test(q))continue;return yield d(S.ObjectAdditionalProperties,$,`${X}/${a1(q)}`,M)}}function*OB($,Z,X,Q){yield*z0(q2($,Z),Z,X,Q)}function*PB($,Z,X,Q){if(!Y2(Q))return yield d(S.String,$,X,Q);if(Z2($.minLength)&&!(Q.length>=$.minLength))yield d(S.StringMinLength,$,X,Q);if(Z2($.maxLength)&&!(Q.length<=$.maxLength))yield d(S.StringMaxLength,$,X,Q);if(!new RegExp($.source,$.flags).test(Q))return yield d(S.RegExp,$,X,Q)}function*LB($,Z,X,Q){if(!Y2(Q))return yield d(S.String,$,X,Q);if(Z2($.minLength)&&!(Q.length>=$.minLength))yield d(S.StringMinLength,$,X,Q);if(Z2($.maxLength)&&!(Q.length<=$.maxLength))yield d(S.StringMaxLength,$,X,Q);if(Y2($.pattern)){if(!new RegExp($.pattern).test(Q))yield d(S.StringPattern,$,X,Q)}if(Y2($.format)){if(!D2.Has($.format))yield d(S.StringFormatUnknown,$,X,Q);else if(!D2.Get($.format)(Q))yield d(S.StringFormat,$,X,Q)}}function*KB($,Z,X,Q){if(!p1(Q))yield d(S.Symbol,$,X,Q)}function*SB($,Z,X,Q){if(!Y2(Q))return yield d(S.String,$,X,Q);if(!new RegExp($.pattern).test(Q))yield d(S.StringPattern,$,X,Q)}function*jB($,Z,X,Q){yield*z0(q2($,Z),Z,X,Q)}function*FB($,Z,X,Q){if(!u(Q))return yield d(S.Tuple,$,X,Q);if($.items===void 0&&Q.length!==0)return yield d(S.TupleLength,$,X,Q);if(Q.length!==$.maxItems)return yield d(S.TupleLength,$,X,Q);if(!$.items)return;for(let J=0;J<$.items.length;J++)yield*z0($.items[J],Z,`${X}/${J}`,Q[J])}function*_B($,Z,X,Q){if(!V2(Q))yield d(S.Undefined,$,X,Q)}function*CB($,Z,X,Q){if(s($,Z,Q))return;let J=$.anyOf.map((Y)=>new n$(z0(Y,Z,X,Q)));yield d(S.Union,$,X,Q,J)}function*RB($,Z,X,Q){if(!U8(Q))return yield d(S.Uint8Array,$,X,Q);if(Z2($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield d(S.Uint8ArrayMaxByteLength,$,X,Q);if(Z2($.minByteLength)&&!(Q.length>=$.minByteLength))yield d(S.Uint8ArrayMinByteLength,$,X,Q)}function*VB($,Z,X,Q){}function*EB($,Z,X,Q){if(!_2.IsVoidLike(Q))yield d(S.Void,$,X,Q)}function*bB($,Z,X,Q){if(!Q0.Get($[P])($,Q))yield d(S.Kind,$,X,Q)}function*z0($,Z,X,Q){let J=Z2($.$id)?[...Z,$]:Z,Y=$;switch(Y[P]){case"Any":return yield*rz(Y,J,X,Q);case"Argument":return yield*az(Y,J,X,Q);case"Array":return yield*ez(Y,J,X,Q);case"AsyncIterator":return yield*$B(Y,J,X,Q);case"BigInt":return yield*ZB(Y,J,X,Q);case"Boolean":return yield*XB(Y,J,X,Q);case"Constructor":return yield*QB(Y,J,X,Q);case"Date":return yield*JB(Y,J,X,Q);case"Function":return yield*YB(Y,J,X,Q);case"Import":return yield*WB(Y,J,X,Q);case"Integer":return yield*qB(Y,J,X,Q);case"Intersect":return yield*MB(Y,J,X,Q);case"Iterator":return yield*wB(Y,J,X,Q);case"Literal":return yield*zB(Y,J,X,Q);case"Never":return yield*BB(Y,J,X,Q);case"Not":return yield*GB(Y,J,X,Q);case"Null":return yield*UB(Y,J,X,Q);case"Number":return yield*NB(Y,J,X,Q);case"Object":return yield*HB(Y,J,X,Q);case"Promise":return yield*AB(Y,J,X,Q);case"Record":return yield*DB(Y,J,X,Q);case"Ref":return yield*OB(Y,J,X,Q);case"RegExp":return yield*PB(Y,J,X,Q);case"String":return yield*LB(Y,J,X,Q);case"Symbol":return yield*KB(Y,J,X,Q);case"TemplateLiteral":return yield*SB(Y,J,X,Q);case"This":return yield*jB(Y,J,X,Q);case"Tuple":return yield*FB(Y,J,X,Q);case"Undefined":return yield*_B(Y,J,X,Q);case"Union":return yield*CB(Y,J,X,Q);case"Uint8Array":return yield*RB(Y,J,X,Q);case"Unknown":return yield*VB(Y,J,X,Q);case"Void":return yield*EB(Y,J,X,Q);default:if(!Q0.Has(Y[P]))throw new fY($);return yield*bB(Y,J,X,Q)}}function x1(...$){let Z=$.length===3?z0($[0],$[1],"",$[2]):z0($[0],[],"",$[1]);return new n$(Z)}var xB=function($,Z,X,Q,J){if(Q==="m")throw TypeError("Private method is not writable");if(Q==="a"&&!J)throw TypeError("Private accessor was defined without a setter");if(typeof Z==="function"?$!==Z||!J:!Z.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?J.call($,X):J?J.value=X:Z.set($,X),X},yY=function($,Z,X,Q){if(X==="a"&&!Q)throw TypeError("Private accessor was defined without a getter");if(typeof Z==="function"?$!==Z||!Q:!Z.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?Q:X==="a"?Q.call($):Q?Q.value:Z.get($)},r4,SZ,vY;class hY extends p{constructor($){let Z=$.First();super(Z===void 0?"Invalid Value":Z.message);r4.add(this),SZ.set(this,void 0),xB(this,SZ,$,"f"),this.error=Z}Errors(){return new n$(yY(this,r4,"m",vY).call(this))}}SZ=new WeakMap,r4=new WeakSet,vY=function*(){if(this.error)yield this.error;yield*yY(this,SZ,"f")};function dY($,Z,X){if(s($,Z,X))return;throw new hY(x1($,Z,X))}function jZ(...$){return $.length===3?dY($[0],$[1],$[2]):dY($[0],[],$[1])}function IB($){let Z={};for(let X of Object.getOwnPropertyNames($))Z[X]=w2($[X]);for(let X of Object.getOwnPropertySymbols($))Z[X]=w2($[X]);return Z}function TB($){return $.map((Z)=>w2(Z))}function kB($){return $.slice()}function gB($){return new Map(w2([...$.entries()]))}function fB($){return new Set(w2([...$.entries()]))}function dB($){return new Date($.toISOString())}function yB($){return $}function w2($){if(u($))return TB($);if(j0($))return dB($);if(o0($))return kB($);if(JQ($))return gB($);if(YQ($))return fB($);if(n($))return IB($);if(y0($))return yB($);throw Error("ValueClone: Unable to clone value")}class X1 extends p{constructor($,Z){super(Z);this.schema=$}}function z2($){return A$($)?$():w2($)}function vB($,Z){if(i($,"default"))return z2($.default);else return{}}function hB($,Z){return{}}function cB($,Z){if($.uniqueItems===!0&&!i($,"default"))throw new X1($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!i($,"default"))throw new X1($,"Array with the contains constraint requires a default value");else if("default"in $)return z2($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((X)=>{return i0($.items,Z)});else return[]}function mB($,Z){if(i($,"default"))return z2($.default);else return async function*(){}()}function uB($,Z){if(i($,"default"))return z2($.default);else return BigInt(0)}function pB($,Z){if(i($,"default"))return z2($.default);else return!1}function iB($,Z){if(i($,"default"))return z2($.default);else{let X=i0($.returns,Z);if(typeof X==="object"&&!Array.isArray(X))return class{constructor(){for(let[Q,J]of Object.entries(X)){let Y=this;Y[Q]=J}}};else return class{}}}function nB($,Z){if(i($,"default"))return z2($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function lB($,Z){if(i($,"default"))return z2($.default);else return()=>i0($.returns,Z)}function oB($,Z){let X=globalThis.Object.values($.$defs),Q=$.$defs[$.$ref];return i0(Q,[...Z,...X])}function tB($,Z){if(i($,"default"))return z2($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function sB($,Z){if(i($,"default"))return z2($.default);else{let X=$.allOf.reduce((Q,J)=>{let Y=i0(J,Z);return typeof Y==="object"?{...Q,...Y}:Y},{});if(!s($,Z,X))throw new X1($,"Intersect produced invalid value. Consider using a default value.");return X}}function rB($,Z){if(i($,"default"))return z2($.default);else return function*(){}()}function aB($,Z){if(i($,"default"))return z2($.default);else return $.const}function eB($,Z){if(i($,"default"))return z2($.default);else throw new X1($,"Never types cannot be created. Consider using a default value.")}function $G($,Z){if(i($,"default"))return z2($.default);else throw new X1($,"Not types must have a default value")}function ZG($,Z){if(i($,"default"))return z2($.default);else return null}function XG($,Z){if(i($,"default"))return z2($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function QG($,Z){if(i($,"default"))return z2($.default);else{let X=new Set($.required),Q={};for(let[J,Y]of Object.entries($.properties)){if(!X.has(J))continue;Q[J]=i0(Y,Z)}return Q}}function JG($,Z){if(i($,"default"))return z2($.default);else return Promise.resolve(i0($.item,Z))}function YG($,Z){if(i($,"default"))return z2($.default);else return{}}function WG($,Z){if(i($,"default"))return z2($.default);else return i0(q2($,Z),Z)}function qG($,Z){if(i($,"default"))return z2($.default);else throw new X1($,"RegExp types cannot be created. Consider using a default value.")}function MG($,Z){if($.pattern!==void 0)if(!i($,"default"))throw new X1($,"String types with patterns must specify a default value");else return z2($.default);else if($.format!==void 0)if(!i($,"default"))throw new X1($,"String types with formats must specify a default value");else return z2($.default);else if(i($,"default"))return z2($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function wG($,Z){if(i($,"default"))return z2($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function zG($,Z){if(i($,"default"))return z2($.default);if(!QZ($))throw new X1($,"Can only create template literals that produce a finite variants. Consider using a default value.");return S8($)[0]}function BG($,Z){if(cY++>PG)throw new X1($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(i($,"default"))return z2($.default);else return i0(q2($,Z),Z)}function GG($,Z){if(i($,"default"))return z2($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((X,Q)=>i0($.items[Q],Z))}function UG($,Z){if(i($,"default"))return z2($.default);else return}function NG($,Z){if(i($,"default"))return z2($.default);else if($.anyOf.length===0)throw Error("ValueCreate.Union: Cannot create Union with zero variants");else return i0($.anyOf[0],Z)}function HG($,Z){if(i($,"default"))return z2($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function AG($,Z){if(i($,"default"))return z2($.default);else return{}}function DG($,Z){if(i($,"default"))return z2($.default);else return}function OG($,Z){if(i($,"default"))return z2($.default);else throw Error("User defined types must specify a default value")}function i0($,Z){let X=M0($,Z),Q=$;switch(Q[P]){case"Any":return vB(Q,X);case"Argument":return hB(Q,X);case"Array":return cB(Q,X);case"AsyncIterator":return mB(Q,X);case"BigInt":return uB(Q,X);case"Boolean":return pB(Q,X);case"Constructor":return iB(Q,X);case"Date":return nB(Q,X);case"Function":return lB(Q,X);case"Import":return oB(Q,X);case"Integer":return tB(Q,X);case"Intersect":return sB(Q,X);case"Iterator":return rB(Q,X);case"Literal":return aB(Q,X);case"Never":return eB(Q,X);case"Not":return $G(Q,X);case"Null":return ZG(Q,X);case"Number":return XG(Q,X);case"Object":return QG(Q,X);case"Promise":return JG(Q,X);case"Record":return YG(Q,X);case"Ref":return WG(Q,X);case"RegExp":return qG(Q,X);case"String":return MG(Q,X);case"Symbol":return wG(Q,X);case"TemplateLiteral":return zG(Q,X);case"This":return BG(Q,X);case"Tuple":return GG(Q,X);case"Undefined":return UG(Q,X);case"Union":return NG(Q,X);case"Uint8Array":return HG(Q,X);case"Unknown":return AG(Q,X);case"Void":return DG(Q,X);default:if(!Q0.Has(Q[P]))throw new X1(Q,"Unknown type");return OG(Q,X)}}var PG=512,cY=0;function A1(...$){return cY=0,$.length===2?i0($[0],$[1]):i0($[0],[])}class a4 extends p{constructor($,Z){super(Z);this.schema=$}}function mY($,Z,X){if($[P]==="Object"&&typeof X==="object"&&!u1(X)){let Q=$,J=Object.getOwnPropertyNames(X);return Object.entries(Q.properties).reduce((W,[q,M])=>{let z=M[P]==="Literal"&&M.const===X[q]?100:0,w=s(M,Z,X[q])?10:0,G=J.includes(q)?1:0;return W+(z+w+G)},0)}else if($[P]==="Union"){let J=$.anyOf.map((Y)=>q2(Y,Z)).map((Y)=>mY(Y,Z,X));return Math.max(...J)}else return s($,Z,X)?1:0}function LG($,Z,X){let Q=$.anyOf.map((W)=>q2(W,Z)),[J,Y]=[Q[0],0];for(let W of Q){let q=mY(W,Z,X);if(q>Y)J=W,Y=q}return J}function KG($,Z,X){if("default"in $)return typeof X==="function"?$.default:w2($.default);else{let Q=LG($,Z,X);return K6(Q,Z,X)}}function SG($,Z,X){return s($,Z,X)?w2(X):A1($,Z)}function jG($,Z,X){return s($,Z,X)?X:A1($,Z)}function FG($,Z,X){if(s($,Z,X))return w2(X);let Q=u(X)?w2(X):A1($,Z),J=c($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,W=(c($.maxItems)&&J.length>$.maxItems?J.slice(0,$.maxItems):J).map((M)=>D1($.items,Z,M));if($.uniqueItems!==!0)return W;let q=[...new Set(W)];if(!s($,Z,q))throw new a4($,"Array cast produced invalid data due to uniqueItems constraint");return q}function _G($,Z,X){if(s($,Z,X))return A1($,Z);let Q=new Set($.returns.required||[]),J=function(){};for(let[Y,W]of Object.entries($.returns.properties)){if(!Q.has(Y)&&X.prototype[Y]===void 0)continue;J.prototype[Y]=D1(W,Z,X.prototype[Y])}return J}function CG($,Z,X){let Q=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];return D1(J,[...Z,...Q],X)}function uY($,Z){if(n($)&&!n(Z)||!n($)&&n(Z))return $;if(!n($)||!n(Z))return Z;return globalThis.Object.getOwnPropertyNames($).reduce((X,Q)=>{let J=Q in Z?uY($[Q],Z[Q]):$[Q];return{...X,[Q]:J}},{})}function RG($,Z,X){if(s($,Z,X))return X;let Q=A1($,Z),J=uY(Q,X);return s($,Z,J)?J:Q}function VG($,Z,X){throw new a4($,"Never types cannot be cast")}function EG($,Z,X){if(s($,Z,X))return X;if(X===null||typeof X!=="object")return A1($,Z);let Q=new Set($.required||[]),J={};for(let[Y,W]of Object.entries($.properties)){if(!Q.has(Y)&&X[Y]===void 0)continue;J[Y]=D1(W,Z,X[Y])}if(typeof $.additionalProperties==="object"){let Y=Object.getOwnPropertyNames($.properties);for(let W of Object.getOwnPropertyNames(X)){if(Y.includes(W))continue;J[W]=D1($.additionalProperties,Z,X[W])}}return J}function bG($,Z,X){if(s($,Z,X))return w2(X);if(X===null||typeof X!=="object"||Array.isArray(X)||X instanceof Date)return A1($,Z);let Q=Object.getOwnPropertyNames($.patternProperties)[0],J=$.patternProperties[Q],Y={};for(let[W,q]of Object.entries(X))Y[W]=D1(J,Z,q);return Y}function xG($,Z,X){return D1(q2($,Z),Z,X)}function IG($,Z,X){return D1(q2($,Z),Z,X)}function TG($,Z,X){if(s($,Z,X))return w2(X);if(!u(X))return A1($,Z);if($.items===void 0)return[];return $.items.map((Q,J)=>D1(Q,Z,X[J]))}function kG($,Z,X){return s($,Z,X)?w2(X):KG($,Z,X)}function D1($,Z,X){let Q=Y2($.$id)?M0($,Z):Z,J=$;switch($[P]){case"Array":return FG(J,Q,X);case"Constructor":return _G(J,Q,X);case"Import":return CG(J,Q,X);case"Intersect":return RG(J,Q,X);case"Never":return VG(J,Q,X);case"Object":return EG(J,Q,X);case"Record":return bG(J,Q,X);case"Ref":return xG(J,Q,X);case"This":return IG(J,Q,X);case"Tuple":return TG(J,Q,X);case"Union":return kG(J,Q,X);case"Date":case"Symbol":case"Uint8Array":return SG($,Z,X);default:return jG(J,Q,X)}}function K6(...$){return $.length===3?D1($[0],$[1],$[2]):D1($[0],[],$[1])}function gG($){return O$($)&&$[P]!=="Unsafe"}function fG($,Z,X){if(!u(X))return X;return X.map((Q)=>k0($.items,Z,Q))}function dG($,Z,X){let Q=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];return k0(J,[...Z,...Q],X)}function yG($,Z,X){let Q=$.unevaluatedProperties,Y=$.allOf.map((q)=>k0(q,Z,w2(X))).reduce((q,M)=>n(M)?{...q,...M}:M,{});if(!n(X)||!n(Y)||!O$(Q))return Y;let W=I0($);for(let q of Object.getOwnPropertyNames(X)){if(W.includes(q))continue;if(s(Q,Z,X[q]))Y[q]=k0(Q,Z,X[q])}return Y}function vG($,Z,X){if(!n(X)||u(X))return X;let Q=$.additionalProperties;for(let J of Object.getOwnPropertyNames(X)){if(i($.properties,J)){X[J]=k0($.properties[J],Z,X[J]);continue}if(O$(Q)&&s(Q,Z,X[J])){X[J]=k0(Q,Z,X[J]);continue}delete X[J]}return X}function hG($,Z,X){if(!n(X))return X;let Q=$.additionalProperties,J=Object.getOwnPropertyNames(X),[Y,W]=Object.entries($.patternProperties)[0],q=new RegExp(Y);for(let M of J){if(q.test(M)){X[M]=k0(W,Z,X[M]);continue}if(O$(Q)&&s(Q,Z,X[M])){X[M]=k0(Q,Z,X[M]);continue}delete X[M]}return X}function cG($,Z,X){return k0(q2($,Z),Z,X)}function mG($,Z,X){return k0(q2($,Z),Z,X)}function uG($,Z,X){if(!u(X))return X;if(V2($.items))return[];let Q=Math.min(X.length,$.items.length);for(let J=0;J<Q;J++)X[J]=k0($.items[J],Z,X[J]);return X.length>Q?X.slice(0,Q):X}function pG($,Z,X){for(let Q of $.anyOf)if(gG(Q)&&s(Q,Z,X))return k0(Q,Z,X);return X}function k0($,Z,X){let Q=Y2($.$id)?M0($,Z):Z,J=$;switch(J[P]){case"Array":return fG(J,Q,X);case"Import":return dG(J,Q,X);case"Intersect":return yG(J,Q,X);case"Object":return vG(J,Q,X);case"Record":return hG(J,Q,X);case"Ref":return cG(J,Q,X);case"This":return mG(J,Q,X);case"Tuple":return uG(J,Q,X);case"Union":return pG(J,Q,X);default:return X}}function FZ(...$){return $.length===3?k0($[0],$[1],$[2]):k0($[0],[],$[1])}function _Z($){return Y2($)&&!isNaN($)&&!isNaN(parseFloat($))}function iG($){return B0($)||V1($)||c($)}function S6($){return $===!0||c($)&&$===1||B0($)&&$===BigInt("1")||Y2($)&&($.toLowerCase()==="true"||$==="1")}function j6($){return $===!1||c($)&&($===0||Object.is($,-0))||B0($)&&$===BigInt("0")||Y2($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function nG($){return Y2($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function lG($){return Y2($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function oG($){return Y2($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function tG($){return Y2($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function sG($){return Y2($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function rG($,Z){let X=iY($);return X===Z?X:$}function aG($,Z){let X=nY($);return X===Z?X:$}function eG($,Z){let X=pY($);return X===Z?X:$}function $U($,Z){return Y2($.const)?rG(Z,$.const):c($.const)?aG(Z,$.const):V1($.const)?eG(Z,$.const):Z}function pY($){return S6($)?!0:j6($)?!1:$}function ZU($){let Z=(X)=>X.split(".")[0];return _Z($)?BigInt(Z($)):c($)?BigInt(Math.trunc($)):j6($)?BigInt(0):S6($)?BigInt(1):$}function iY($){return p1($)&&$.description!==void 0?$.description.toString():iG($)?$.toString():$}function nY($){return _Z($)?parseFloat($):S6($)?1:j6($)?0:$}function XU($){return _Z($)?parseInt($):c($)?Math.trunc($):S6($)?1:j6($)?0:$}function QU($){return Y2($)&&$.toLowerCase()==="null"?null:$}function JU($){return Y2($)&&$==="undefined"?void 0:$}function YU($){return j0($)?$:c($)?new Date($):S6($)?new Date(1):j6($)?new Date(0):_Z($)?new Date(parseInt($)):lG($)?new Date(`1970-01-01T${$}.000Z`):nG($)?new Date(`1970-01-01T${$}`):tG($)?new Date(`${$}.000Z`):oG($)?new Date($):sG($)?new Date(`${$}T00:00:00.000Z`):$}function WU($){return $}function qU($,Z,X){return(u(X)?X:[X]).map((J)=>O1($.items,Z,J))}function MU($,Z,X){return ZU(X)}function wU($,Z,X){return pY(X)}function zU($,Z,X){return YU(X)}function BU($,Z,X){let Q=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];return O1(J,[...Z,...Q],X)}function GU($,Z,X){return XU(X)}function UU($,Z,X){return $.allOf.reduce((Q,J)=>O1(J,Z,Q),X)}function NU($,Z,X){return $U($,X)}function HU($,Z,X){return QU(X)}function AU($,Z,X){return nY(X)}function DU($,Z,X){if(!n(X)||u(X))return X;for(let Q of Object.getOwnPropertyNames($.properties)){if(!i(X,Q))continue;X[Q]=O1($.properties[Q],Z,X[Q])}return X}function OU($,Z,X){if(!(n(X)&&!u(X)))return X;let J=Object.getOwnPropertyNames($.patternProperties)[0],Y=$.patternProperties[J];for(let[W,q]of Object.entries(X))X[W]=O1(Y,Z,q);return X}function PU($,Z,X){return O1(q2($,Z),Z,X)}function LU($,Z,X){return iY(X)}function KU($,Z,X){return Y2(X)||c(X)?Symbol(X):X}function SU($,Z,X){return O1(q2($,Z),Z,X)}function jU($,Z,X){if(!(u(X)&&!V2($.items)))return X;return X.map((J,Y)=>{return Y<$.items.length?O1($.items[Y],Z,J):J})}function FU($,Z,X){return JU(X)}function _U($,Z,X){for(let Q of $.anyOf)if(s(Q,Z,X))return X;for(let Q of $.anyOf){let J=O1(Q,Z,w2(X));if(!s(Q,Z,J))continue;return J}return X}function O1($,Z,X){let Q=M0($,Z),J=$;switch($[P]){case"Array":return qU(J,Q,X);case"BigInt":return MU(J,Q,X);case"Boolean":return wU(J,Q,X);case"Date":return zU(J,Q,X);case"Import":return BU(J,Q,X);case"Integer":return GU(J,Q,X);case"Intersect":return UU(J,Q,X);case"Literal":return NU(J,Q,X);case"Null":return HU(J,Q,X);case"Number":return AU(J,Q,X);case"Object":return DU(J,Q,X);case"Record":return OU(J,Q,X);case"Ref":return PU(J,Q,X);case"String":return LU(J,Q,X);case"Symbol":return KU(J,Q,X);case"This":return SU(J,Q,X);case"Tuple":return jU(J,Q,X);case"Undefined":return FU(J,Q,X);case"Union":return _U(J,Q,X);default:return WU(X)}}function CZ(...$){return $.length===3?O1($[0],$[1],$[2]):O1($[0],[],$[1])}class F6 extends p{constructor($,Z,X){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=Z,this.error=X}}class RZ extends p{constructor($,Z,X,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=Z,this.value=X,this.error=Q}}function k2($,Z,X){try{return B2($)?$[S2].Decode(X):X}catch(Q){throw new RZ($,Z,X,Q)}}function CU($,Z,X,Q){return u(Q)?k2($,X,Q.map((J,Y)=>P1($.items,Z,`${X}/${Y}`,J))):k2($,X,Q)}function RU($,Z,X,Q){if(!n(Q)||y0(Q))return k2($,X,Q);let J=MZ($),Y=J.map((w)=>w[0]),W={...Q};for(let[w,G]of J)if(w in W)W[w]=P1(G,Z,`${X}/${w}`,W[w]);if(!B2($.unevaluatedProperties))return k2($,X,W);let q=Object.getOwnPropertyNames(W),M=$.unevaluatedProperties,z={...W};for(let w of q)if(!Y.includes(w))z[w]=k2(M,`${X}/${w}`,z[w]);return k2($,X,z)}function VU($,Z,X,Q){let J=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref],W=P1(Y,[...Z,...J],X,Q);return k2($,X,W)}function EU($,Z,X,Q){return k2($,X,P1($.not,Z,X,Q))}function bU($,Z,X,Q){if(!n(Q))return k2($,X,Q);let J=I0($),Y={...Q};for(let z of J){if(!i(Y,z))continue;if(V2(Y[z])&&(!l1($.properties[z])||_2.IsExactOptionalProperty(Y,z)))continue;Y[z]=P1($.properties[z],Z,`${X}/${z}`,Y[z])}if(!T2($.additionalProperties))return k2($,X,Y);let W=Object.getOwnPropertyNames(Y),q=$.additionalProperties,M={...Y};for(let z of W)if(!J.includes(z))M[z]=k2(q,`${X}/${z}`,M[z]);return k2($,X,M)}function xU($,Z,X,Q){if(!n(Q))return k2($,X,Q);let J=Object.getOwnPropertyNames($.patternProperties)[0],Y=new RegExp(J),W={...Q};for(let w of Object.getOwnPropertyNames(Q))if(Y.test(w))W[w]=P1($.patternProperties[J],Z,`${X}/${w}`,W[w]);if(!T2($.additionalProperties))return k2($,X,W);let q=Object.getOwnPropertyNames(W),M=$.additionalProperties,z={...W};for(let w of q)if(!Y.test(w))z[w]=k2(M,`${X}/${w}`,z[w]);return k2($,X,z)}function IU($,Z,X,Q){let J=q2($,Z);return k2($,X,P1(J,Z,X,Q))}function TU($,Z,X,Q){let J=q2($,Z);return k2($,X,P1(J,Z,X,Q))}function kU($,Z,X,Q){return u(Q)&&u($.items)?k2($,X,$.items.map((J,Y)=>P1(J,Z,`${X}/${Y}`,Q[Y]))):k2($,X,Q)}function gU($,Z,X,Q){for(let J of $.anyOf){if(!s(J,Z,Q))continue;let Y=P1(J,Z,X,Q);return k2($,X,Y)}return k2($,X,Q)}function P1($,Z,X,Q){let J=M0($,Z),Y=$;switch($[P]){case"Array":return CU(Y,J,X,Q);case"Import":return VU(Y,J,X,Q);case"Intersect":return RU(Y,J,X,Q);case"Not":return EU(Y,J,X,Q);case"Object":return bU(Y,J,X,Q);case"Record":return xU(Y,J,X,Q);case"Ref":return IU(Y,J,X,Q);case"Symbol":return k2(Y,X,Q);case"This":return TU(Y,J,X,Q);case"Tuple":return kU(Y,J,X,Q);case"Union":return gU(Y,J,X,Q);default:return k2(Y,X,Q)}}function g8($,Z,X){return P1($,Z,"",X)}class _6 extends p{constructor($,Z,X){super("The encoded value does not match the expected schema");this.schema=$,this.value=Z,this.error=X}}class lY extends p{constructor($,Z,X,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=Z,this.value=X,this.error=Q}}function G0($,Z,X){try{return B2($)?$[S2].Encode(X):X}catch(Q){throw new lY($,Z,X,Q)}}function fU($,Z,X,Q){let J=G0($,X,Q);return u(J)?J.map((Y,W)=>L1($.items,Z,`${X}/${W}`,Y)):J}function dU($,Z,X,Q){let J=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref],W=G0($,X,Q);return L1(Y,[...Z,...J],X,W)}function yU($,Z,X,Q){let J=G0($,X,Q);if(!n(Q)||y0(Q))return J;let Y=MZ($),W=Y.map((G)=>G[0]),q={...J};for(let[G,K]of Y)if(G in q)q[G]=L1(K,Z,`${X}/${G}`,q[G]);if(!B2($.unevaluatedProperties))return q;let M=Object.getOwnPropertyNames(q),z=$.unevaluatedProperties,w={...q};for(let G of M)if(!W.includes(G))w[G]=G0(z,`${X}/${G}`,w[G]);return w}function vU($,Z,X,Q){return G0($.not,X,G0($,X,Q))}function hU($,Z,X,Q){let J=G0($,X,Q);if(!n(J))return J;let Y=I0($),W={...J};for(let w of Y){if(!i(W,w))continue;if(V2(W[w])&&(!l1($.properties[w])||_2.IsExactOptionalProperty(W,w)))continue;W[w]=L1($.properties[w],Z,`${X}/${w}`,W[w])}if(!T2($.additionalProperties))return W;let q=Object.getOwnPropertyNames(W),M=$.additionalProperties,z={...W};for(let w of q)if(!Y.includes(w))z[w]=G0(M,`${X}/${w}`,z[w]);return z}function cU($,Z,X,Q){let J=G0($,X,Q);if(!n(Q))return J;let Y=Object.getOwnPropertyNames($.patternProperties)[0],W=new RegExp(Y),q={...J};for(let G of Object.getOwnPropertyNames(Q))if(W.test(G))q[G]=L1($.patternProperties[Y],Z,`${X}/${G}`,q[G]);if(!T2($.additionalProperties))return q;let M=Object.getOwnPropertyNames(q),z=$.additionalProperties,w={...q};for(let G of M)if(!W.test(G))w[G]=G0(z,`${X}/${G}`,w[G]);return w}function mU($,Z,X,Q){let J=q2($,Z),Y=L1(J,Z,X,Q);return G0($,X,Y)}function uU($,Z,X,Q){let J=q2($,Z),Y=L1(J,Z,X,Q);return G0($,X,Y)}function pU($,Z,X,Q){let J=G0($,X,Q);return u($.items)?$.items.map((Y,W)=>L1(Y,Z,`${X}/${W}`,J[W])):[]}function iU($,Z,X,Q){for(let J of $.anyOf){if(!s(J,Z,Q))continue;let Y=L1(J,Z,X,Q);return G0($,X,Y)}for(let J of $.anyOf){let Y=L1(J,Z,X,Q);if(!s($,Z,Y))continue;return G0($,X,Y)}return G0($,X,Q)}function L1($,Z,X,Q){let J=M0($,Z),Y=$;switch($[P]){case"Array":return fU(Y,J,X,Q);case"Import":return dU(Y,J,X,Q);case"Intersect":return yU(Y,J,X,Q);case"Not":return vU(Y,J,X,Q);case"Object":return hU(Y,J,X,Q);case"Record":return cU(Y,J,X,Q);case"Ref":return mU(Y,J,X,Q);case"This":return uU(Y,J,X,Q);case"Tuple":return pU(Y,J,X,Q);case"Union":return iU(Y,J,X,Q);default:return G0(Y,X,Q)}}function f8($,Z,X){return L1($,Z,"",X)}function nU($,Z){return B2($)||J0($.items,Z)}function lU($,Z){return B2($)||J0($.items,Z)}function oU($,Z){return B2($)||J0($.returns,Z)||$.parameters.some((X)=>J0(X,Z))}function tU($,Z){return B2($)||J0($.returns,Z)||$.parameters.some((X)=>J0(X,Z))}function sU($,Z){return B2($)||B2($.unevaluatedProperties)||$.allOf.some((X)=>J0(X,Z))}function rU($,Z){let X=globalThis.Object.getOwnPropertyNames($.$defs).reduce((J,Y)=>[...J,$.$defs[Y]],[]),Q=$.$defs[$.$ref];return B2($)||J0(Q,[...X,...Z])}function aU($,Z){return B2($)||J0($.items,Z)}function eU($,Z){return B2($)||J0($.not,Z)}function $N($,Z){return B2($)||Object.values($.properties).some((X)=>J0(X,Z))||T2($.additionalProperties)&&J0($.additionalProperties,Z)}function ZN($,Z){return B2($)||J0($.item,Z)}function XN($,Z){let X=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[X];return B2($)||J0(Q,Z)||T2($.additionalProperties)&&B2($.additionalProperties)}function QN($,Z){if(B2($))return!0;return J0(q2($,Z),Z)}function JN($,Z){if(B2($))return!0;return J0(q2($,Z),Z)}function YN($,Z){return B2($)||!V2($.items)&&$.items.some((X)=>J0(X,Z))}function WN($,Z){return B2($)||$.anyOf.some((X)=>J0(X,Z))}function J0($,Z){let X=M0($,Z),Q=$;if($.$id&&e4.has($.$id))return!1;if($.$id)e4.add($.$id);switch($[P]){case"Array":return nU(Q,X);case"AsyncIterator":return lU(Q,X);case"Constructor":return oU(Q,X);case"Function":return tU(Q,X);case"Import":return rU(Q,X);case"Intersect":return sU(Q,X);case"Iterator":return aU(Q,X);case"Not":return eU(Q,X);case"Object":return $N(Q,X);case"Promise":return ZN(Q,X);case"Record":return XN(Q,X);case"Ref":return QN(Q,X);case"This":return JN(Q,X);case"Tuple":return YN(Q,X);case"Union":return WN(Q,X);default:return B2($)}}var e4=new Set;function e1($,Z){return e4.clear(),J0($,Z)}function oY(...$){let[Z,X,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!s(Z,X,Q))throw new F6(Z,Q,x1(Z,X,Q).First());return e1(Z,X)?g8(Z,X,Q):Q}function $$($,Z){let X=i($,"default")?$.default:void 0,Q=A$(X)?X():w2(X);return V2(Z)?Q:n(Z)&&n(Q)?Object.assign(Q,Z):Z}function $X($){return O$($)&&"default"in $}function qN($,Z,X){if(u(X)){for(let J=0;J<X.length;J++)X[J]=_0($.items,Z,X[J]);return X}let Q=$$($,X);if(!u(Q))return Q;for(let J=0;J<Q.length;J++)Q[J]=_0($.items,Z,Q[J]);return Q}function MN($,Z,X){return j0(X)?X:$$($,X)}function wN($,Z,X){let Q=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];return _0(J,[...Z,...Q],X)}function zN($,Z,X){let Q=$$($,X);return $.allOf.reduce((J,Y)=>{let W=_0(Y,Z,Q);return n(W)?{...J,...W}:W},{})}function BN($,Z,X){let Q=$$($,X);if(!n(Q))return Q;let J=Object.getOwnPropertyNames($.properties);for(let Y of J){let W=_0($.properties[Y],Z,Q[Y]);if(V2(W))continue;Q[Y]=_0($.properties[Y],Z,Q[Y])}if(!$X($.additionalProperties))return Q;for(let Y of Object.getOwnPropertyNames(Q)){if(J.includes(Y))continue;Q[Y]=_0($.additionalProperties,Z,Q[Y])}return Q}function GN($,Z,X){let Q=$$($,X);if(!n(Q))return Q;let J=$.additionalProperties,[Y,W]=Object.entries($.patternProperties)[0],q=new RegExp(Y);for(let M of Object.getOwnPropertyNames(Q)){if(!(q.test(M)&&$X(W)))continue;Q[M]=_0(W,Z,Q[M])}if(!$X(J))return Q;for(let M of Object.getOwnPropertyNames(Q)){if(q.test(M))continue;Q[M]=_0(J,Z,Q[M])}return Q}function UN($,Z,X){return _0(q2($,Z),Z,$$($,X))}function NN($,Z,X){return _0(q2($,Z),Z,X)}function HN($,Z,X){let Q=$$($,X);if(!u(Q)||V2($.items))return Q;let[J,Y]=[$.items,Math.max($.items.length,Q.length)];for(let W=0;W<Y;W++)if(W<J.length)Q[W]=_0(J[W],Z,Q[W]);return Q}function AN($,Z,X){let Q=$$($,X);for(let J of $.anyOf){let Y=_0(J,Z,w2(Q));if(s(J,Z,Y))return Y}return Q}function _0($,Z,X){let Q=M0($,Z),J=$;switch(J[P]){case"Array":return qN(J,Q,X);case"Date":return MN(J,Q,X);case"Import":return wN(J,Q,X);case"Intersect":return zN(J,Q,X);case"Object":return BN(J,Q,X);case"Record":return GN(J,Q,X);case"Ref":return UN(J,Q,X);case"This":return NN(J,Q,X);case"Tuple":return HN(J,Q,X);case"Union":return AN(J,Q,X);default:return $$(J,X)}}function VZ(...$){return $.length===3?_0($[0],$[1],$[2]):_0($[0],[],$[1])}var K1={};H$(K1,{ValuePointerRootSetError:()=>ZX,ValuePointerRootDeleteError:()=>XX,Set:()=>DN,Has:()=>PN,Get:()=>LN,Format:()=>C6,Delete:()=>ON});class ZX extends p{constructor($,Z,X){super("Cannot set root value");this.value=$,this.path=Z,this.update=X}}class XX extends p{constructor($,Z){super("Cannot delete root value");this.value=$,this.path=Z}}function tY($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*C6($){if($==="")return;let[Z,X]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)Z=Q+1;else X=Q,yield tY($.slice(Z,X)),Z=Q+1;else X=Q;yield tY($.slice(Z))}function DN($,Z,X){if(Z==="")throw new ZX($,Z,X);let[Q,J,Y]=[null,$,""];for(let W of C6(Z)){if(J[W]===void 0)J[W]={};Q=J,J=J[W],Y=W}Q[Y]=X}function ON($,Z){if(Z==="")throw new XX($,Z);let[X,Q,J]=[null,$,""];for(let Y of C6(Z)){if(Q[Y]===void 0||Q[Y]===null)return;X=Q,Q=Q[Y],J=Y}if(Array.isArray(X)){let Y=parseInt(J);X.splice(Y,1)}else delete X[J]}function PN($,Z){if(Z==="")return!0;let[X,Q,J]=[null,$,""];for(let Y of C6(Z)){if(Q[Y]===void 0)return!1;X=Q,Q=Q[Y],J=Y}return Object.getOwnPropertyNames(X).includes(J)}function LN($,Z){if(Z==="")return $;let X=$;for(let Q of C6(Z)){if(X[Q]===void 0)return;X=X[Q]}return X}function KN($,Z){if(!n(Z))return!1;let X=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(Z),...Object.getOwnPropertySymbols(Z)];if(X.length!==Q.length)return!1;return X.every((J)=>l$($[J],Z[J]))}function SN($,Z){return j0(Z)&&$.getTime()===Z.getTime()}function jN($,Z){if(!u(Z)||$.length!==Z.length)return!1;return $.every((X,Q)=>l$(X,Z[Q]))}function FN($,Z){if(!o0(Z)||$.length!==Z.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(Z).constructor.name)return!1;return $.every((X,Q)=>l$(X,Z[Q]))}function _N($,Z){return $===Z}function l$($,Z){if(j0($))return SN($,Z);if(o0($))return FN($,Z);if(u($))return jN($,Z);if(n($))return KN($,Z);if(y0($))return _N($,Z);throw Error("ValueEquals: Unable to compare value")}var CN=U2({type:Q2("insert"),path:F0(),value:G1()}),RN=U2({type:Q2("update"),path:F0(),value:G1()}),VN=U2({type:Q2("delete"),path:F0()}),rY=G2([CN,RN,VN]);class QX extends p{constructor($,Z){super(Z);this.value=$}}function EZ($,Z){return{type:"update",path:$,value:Z}}function aY($,Z){return{type:"insert",path:$,value:Z}}function eY($){return{type:"delete",path:$}}function sY($){if(globalThis.Object.getOwnPropertySymbols($).length>0)throw new QX($,"Cannot diff objects with symbols")}function*EN($,Z,X){if(sY(Z),sY(X),!R4(X))return yield EZ($,X);let Q=globalThis.Object.getOwnPropertyNames(Z),J=globalThis.Object.getOwnPropertyNames(X);for(let Y of J){if(i(Z,Y))continue;yield aY(`${$}/${Y}`,X[Y])}for(let Y of Q){if(!i(X,Y))continue;if(l$(Z,X))continue;yield*bZ(`${$}/${Y}`,Z[Y],X[Y])}for(let Y of Q){if(i(X,Y))continue;yield eY(`${$}/${Y}`)}}function*bN($,Z,X){if(!u(X))return yield EZ($,X);for(let Q=0;Q<Math.min(Z.length,X.length);Q++)yield*bZ(`${$}/${Q}`,Z[Q],X[Q]);for(let Q=0;Q<X.length;Q++){if(Q<Z.length)continue;yield aY(`${$}/${Q}`,X[Q])}for(let Q=Z.length-1;Q>=0;Q--){if(Q<X.length)continue;yield eY(`${$}/${Q}`)}}function*xN($,Z,X){if(!o0(X)||Z.length!==X.length||globalThis.Object.getPrototypeOf(Z).constructor.name!==globalThis.Object.getPrototypeOf(X).constructor.name)return yield EZ($,X);for(let Q=0;Q<Math.min(Z.length,X.length);Q++)yield*bZ(`${$}/${Q}`,Z[Q],X[Q])}function*IN($,Z,X){if(Z===X)return;yield EZ($,X)}function*bZ($,Z,X){if(R4(Z))return yield*EN($,Z,X);if(u(Z))return yield*bN($,Z,X);if(o0(Z))return yield*xN($,Z,X);if(y0(Z))return yield*IN($,Z,X);throw new QX(Z,"Unable to diff value")}function $5($,Z){return[...bZ("",$,Z)]}function TN($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function kN($){return $.length===0}function Z5($,Z){if(TN(Z))return w2(Z[0].value);if(kN(Z))return w2($);let X=w2($);for(let Q of Z)switch(Q.type){case"insert":{K1.Set(X,Q.path,Q.value);break}case"update":{K1.Set(X,Q.path,Q.value);break}case"delete":{K1.Delete(X,Q.path);break}}return X}function X5(...$){let[Z,X,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],J=e1(Z,X)?f8(Z,X,Q):Q;if(!s(Z,X,J))throw new _6(Z,J,x1(Z,X,J).First());return J}function xZ($){return n($)&&!u($)}class JX extends p{constructor($){super($)}}function gN($,Z,X,Q){if(!xZ(X))K1.Set($,Z,w2(Q));else{let J=Object.getOwnPropertyNames(X),Y=Object.getOwnPropertyNames(Q);for(let W of J)if(!Y.includes(W))delete X[W];for(let W of Y)if(!J.includes(W))X[W]=null;for(let W of Y)YX($,`${Z}/${W}`,X[W],Q[W])}}function fN($,Z,X,Q){if(!u(X))K1.Set($,Z,w2(Q));else{for(let J=0;J<Q.length;J++)YX($,`${Z}/${J}`,X[J],Q[J]);X.splice(Q.length)}}function dN($,Z,X,Q){if(o0(X)&&X.length===Q.length)for(let J=0;J<X.length;J++)X[J]=Q[J];else K1.Set($,Z,w2(Q))}function yN($,Z,X,Q){if(X===Q)return;K1.Set($,Z,Q)}function YX($,Z,X,Q){if(u(Q))return fN($,Z,X,Q);if(o0(Q))return dN($,Z,X,Q);if(xZ(Q))return gN($,Z,X,Q);if(y0(Q))return yN($,Z,X,Q)}function Q5($){return o0($)||y0($)}function vN($,Z){return xZ($)&&u(Z)||u($)&&xZ(Z)}function J5($,Z){if(Q5($)||Q5(Z))throw new JX("Only object and array types can be mutated at the root level");if(vN($,Z))throw new JX("Cannot assign due type mismatch of assignable values");YX($,"",$,Z)}class qX extends p{constructor($){super($)}}var WX;(function($){let Z=new Map([["Assert",(Y,W,q)=>{return jZ(Y,W,q),q}],["Cast",(Y,W,q)=>K6(Y,W,q)],["Clean",(Y,W,q)=>FZ(Y,W,q)],["Clone",(Y,W,q)=>w2(q)],["Convert",(Y,W,q)=>CZ(Y,W,q)],["Decode",(Y,W,q)=>e1(Y,W)?g8(Y,W,q):q],["Default",(Y,W,q)=>VZ(Y,W,q)],["Encode",(Y,W,q)=>e1(Y,W)?f8(Y,W,q):q]]);function X(Y){Z.delete(Y)}$.Delete=X;function Q(Y,W){Z.set(Y,W)}$.Set=Q;function J(Y){return Z.get(Y)}$.Get=J})(WX||(WX={}));var Y5=["Clone","Clean","Default","Convert","Assert","Decode"];function hN($,Z,X,Q){return $.reduce((J,Y)=>{let W=WX.Get(Y);if(V2(W))throw new qX(`Unable to find Parse operation '${Y}'`);return W(Z,X,J)},Q)}function W5(...$){let[Z,X,Q,J]=$.length===4?[$[0],$[1],$[2],$[3]]:$.length===3?u($[0])?[$[0],$[1],[],$[2]]:[Y5,$[0],$[1],$[2]]:$.length===2?[Y5,$[0],[],$[1]]:(()=>{throw new qX("Invalid Arguments")})();return hN(Z,X,Q,J)}var K2={};H$(K2,{ValueErrorIterator:()=>n$,Patch:()=>Z5,Parse:()=>W5,Mutate:()=>J5,Hash:()=>C$,Errors:()=>x1,Equal:()=>l$,Encode:()=>X5,Edit:()=>rY,Diff:()=>$5,Default:()=>VZ,Decode:()=>oY,Create:()=>A1,Convert:()=>CZ,Clone:()=>w2,Clean:()=>FZ,Check:()=>s,Cast:()=>K6,Assert:()=>jZ});class q5{constructor($,Z,X,Q){this.schema=$,this.references=Z,this.checkFunc=X,this.code=Q,this.hasTransform=e1($,Z)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors($){return x1(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new F6(this.schema,$,this.Errors($).First());return this.hasTransform?g8(this.schema,this.references,$):$}Encode($){let Z=this.hasTransform?f8(this.schema,this.references,$):$;if(!this.checkFunc(Z))throw new _6(this.schema,$,this.Errors($).First());return Z}}var Z$;(function($){function Z(Y){return Y===36}$.DollarSign=Z;function X(Y){return Y===95}$.IsUnderscore=X;function Q(Y){return Y>=65&&Y<=90||Y>=97&&Y<=122}$.IsAlpha=Q;function J(Y){return Y>=48&&Y<=57}$.IsNumeric=J})(Z$||(Z$={}));var IZ;(function($){function Z(Y){if(Y.length===0)return!1;return Z$.IsNumeric(Y.charCodeAt(0))}function X(Y){if(Z(Y))return!1;for(let W=0;W<Y.length;W++){let q=Y.charCodeAt(W);if(!(Z$.IsAlpha(q)||Z$.IsNumeric(q)||Z$.DollarSign(q)||Z$.IsUnderscore(q)))return!1}return!0}function Q(Y){return Y.replace(/'/g,"\\'")}function J(Y,W){return X(W)?`${Y}.${W}`:`${Y}['${Q(W)}']`}$.Encode=J})(IZ||(IZ={}));var MX;(function($){function Z(X){let Q=[];for(let J=0;J<X.length;J++){let Y=X.charCodeAt(J);if(Z$.IsNumeric(Y)||Z$.IsAlpha(Y))Q.push(X.charAt(J));else Q.push(`_${Y}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=Z})(MX||(MX={}));var wX;(function($){function Z(X){return X.replace(/'/g,"\\'")}$.Escape=Z})(wX||(wX={}));class M5 extends p{constructor($){super("Unknown type");this.schema=$}}class zX extends p{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var o$;(function($){function Z(W,q,M){return _2.ExactOptionalPropertyTypes?`('${q}' in ${W} ? ${M} : true)`:`(${IZ.Encode(W,q)} !== undefined ? ${M} : true)`}$.IsExactOptionalProperty=Z;function X(W){return!_2.AllowArrayObject?`(typeof ${W} === 'object' && ${W} !== null && !Array.isArray(${W}))`:`(typeof ${W} === 'object' && ${W} !== null)`}$.IsObjectLike=X;function Q(W){return!_2.AllowArrayObject?`(typeof ${W} === 'object' && ${W} !== null && !Array.isArray(${W}) && !(${W} instanceof Date) && !(${W} instanceof Uint8Array))`:`(typeof ${W} === 'object' && ${W} !== null && !(${W} instanceof Date) && !(${W} instanceof Uint8Array))`}$.IsRecordLike=Q;function J(W){return _2.AllowNaN?`typeof ${W} === 'number'`:`Number.isFinite(${W})`}$.IsNumberLike=J;function Y(W){return _2.AllowNullVoid?`(${W} === undefined || ${W} === null)`:`${W} === undefined`}$.IsVoidLike=Y})(o$||(o$={}));var S1;(function($){function Z(U){return U[P]==="Any"||U[P]==="Unknown"}function*X(U,D,N){yield"true"}function*Q(U,D,N){yield"true"}function*J(U,D,N){yield`Array.isArray(${N})`;let[b,V]=[J1("value","any"),J1("acc","number")];if(c(U.maxItems))yield`${N}.length <= ${U.maxItems}`;if(c(U.minItems))yield`${N}.length >= ${U.minItems}`;let k=A0(U.items,D,"value");if(yield`${N}.every((${b}) => ${k})`,b2(U.contains)||c(U.minContains)||c(U.maxContains)){let l=b2(U.contains)?U.contains:t(),A2=A0(l,D,"value"),p2=c(U.minContains)?[`(count >= ${U.minContains})`]:[],q0=c(U.maxContains)?[`(count <= ${U.maxContains})`]:[],D0=`const count = value.reduce((${V}, ${b}) => ${A2} ? acc + 1 : acc, 0)`,f$=["(count > 0)",...p2,...q0].join(" && ");yield`((${b}) => { ${D0}; return ${f$}})(${N})`}if(U.uniqueItems===!0)yield`((${b}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${N})`}function*Y(U,D,N){yield`(typeof value === 'object' && Symbol.asyncIterator in ${N})`}function*W(U,D,N){if(yield`(typeof ${N} === 'bigint')`,B0(U.exclusiveMaximum))yield`${N} < BigInt(${U.exclusiveMaximum})`;if(B0(U.exclusiveMinimum))yield`${N} > BigInt(${U.exclusiveMinimum})`;if(B0(U.maximum))yield`${N} <= BigInt(${U.maximum})`;if(B0(U.minimum))yield`${N} >= BigInt(${U.minimum})`;if(B0(U.multipleOf))yield`(${N} % BigInt(${U.multipleOf})) === 0`}function*q(U,D,N){yield`(typeof ${N} === 'boolean')`}function*M(U,D,N){yield*v1(U.returns,D,`${N}.prototype`)}function*z(U,D,N){if(yield`(${N} instanceof Date) && Number.isFinite(${N}.getTime())`,c(U.exclusiveMaximumTimestamp))yield`${N}.getTime() < ${U.exclusiveMaximumTimestamp}`;if(c(U.exclusiveMinimumTimestamp))yield`${N}.getTime() > ${U.exclusiveMinimumTimestamp}`;if(c(U.maximumTimestamp))yield`${N}.getTime() <= ${U.maximumTimestamp}`;if(c(U.minimumTimestamp))yield`${N}.getTime() >= ${U.minimumTimestamp}`;if(c(U.multipleOfTimestamp))yield`(${N}.getTime() % ${U.multipleOfTimestamp}) === 0`}function*w(U,D,N){yield`(typeof ${N} === 'function')`}function*G(U,D,N){let b=globalThis.Object.getOwnPropertyNames(U.$defs).reduce((V,k)=>{return[...V,U.$defs[k]]},[]);yield*v1(e0(U.$ref),[...D,...b],N)}function*K(U,D,N){if(yield`Number.isInteger(${N})`,c(U.exclusiveMaximum))yield`${N} < ${U.exclusiveMaximum}`;if(c(U.exclusiveMinimum))yield`${N} > ${U.exclusiveMinimum}`;if(c(U.maximum))yield`${N} <= ${U.maximum}`;if(c(U.minimum))yield`${N} >= ${U.minimum}`;if(c(U.multipleOf))yield`(${N} % ${U.multipleOf}) === 0`}function*B(U,D,N){let b=U.allOf.map((V)=>A0(V,D,N)).join(" && ");if(U.unevaluatedProperties===!1){let V=l0(`${new RegExp(s1(U))};`),k=`Object.getOwnPropertyNames(${N}).every(key => ${V}.test(key))`;yield`(${b} && ${k})`}else if(b2(U.unevaluatedProperties)){let V=l0(`${new RegExp(s1(U))};`),k=`Object.getOwnPropertyNames(${N}).every(key => ${V}.test(key) || ${A0(U.unevaluatedProperties,D,`${N}[key]`)})`;yield`(${b} && ${k})`}else yield`(${b})`}function*H(U,D,N){yield`(typeof value === 'object' && Symbol.iterator in ${N})`}function*A(U,D,N){if(typeof U.const==="number"||typeof U.const==="boolean")yield`(${N} === ${U.const})`;else yield`(${N} === '${wX.Escape(U.const)}')`}function*j(U,D,N){yield"false"}function*_(U,D,N){yield`(!${A0(U.not,D,N)})`}function*L(U,D,N){yield`(${N} === null)`}function*h(U,D,N){if(yield o$.IsNumberLike(N),c(U.exclusiveMaximum))yield`${N} < ${U.exclusiveMaximum}`;if(c(U.exclusiveMinimum))yield`${N} > ${U.exclusiveMinimum}`;if(c(U.maximum))yield`${N} <= ${U.maximum}`;if(c(U.minimum))yield`${N} >= ${U.minimum}`;if(c(U.multipleOf))yield`(${N} % ${U.multipleOf}) === 0`}function*r(U,D,N){if(yield o$.IsObjectLike(N),c(U.minProperties))yield`Object.getOwnPropertyNames(${N}).length >= ${U.minProperties}`;if(c(U.maxProperties))yield`Object.getOwnPropertyNames(${N}).length <= ${U.maxProperties}`;let b=Object.getOwnPropertyNames(U.properties);for(let V of b){let k=IZ.Encode(N,V),l=U.properties[V];if(U.required&&U.required.includes(V)){if(yield*v1(l,D,k),r1(l)||Z(l))yield`('${V}' in ${N})`}else{let A2=A0(l,D,k);yield o$.IsExactOptionalProperty(N,V,A2)}}if(U.additionalProperties===!1)if(U.required&&U.required.length===b.length)yield`Object.getOwnPropertyNames(${N}).length === ${b.length}`;else{let V=`[${b.map((k)=>`'${k}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${N}).every(key => ${V}.includes(key))`}if(typeof U.additionalProperties==="object"){let V=A0(U.additionalProperties,D,`${N}[key]`),k=`[${b.map((l)=>`'${l}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${N}).every(key => ${k}.includes(key) || ${V}))`}}function*o(U,D,N){yield`${N} instanceof Promise`}function*f(U,D,N){if(yield o$.IsRecordLike(N),c(U.minProperties))yield`Object.getOwnPropertyNames(${N}).length >= ${U.minProperties}`;if(c(U.maxProperties))yield`Object.getOwnPropertyNames(${N}).length <= ${U.maxProperties}`;let[b,V]=Object.entries(U.patternProperties)[0],k=l0(`${new RegExp(b)}`),l=A0(V,D,"value"),A2=b2(U.additionalProperties)?A0(U.additionalProperties,D,N):U.additionalProperties===!1?"false":"true",p2=`(${k}.test(key) ? ${l} : ${A2})`;yield`(Object.entries(${N}).every(([key, value]) => ${p2}))`}function*I(U,D,N){let b=q2(U,D);if(l2.functions.has(U.$ref))return yield`${V0(U.$ref)}(${N})`;yield*v1(b,D,N)}function*g(U,D,N){let b=l0(`${new RegExp(U.source,U.flags)};`);if(yield`(typeof ${N} === 'string')`,c(U.maxLength))yield`${N}.length <= ${U.maxLength}`;if(c(U.minLength))yield`${N}.length >= ${U.minLength}`;yield`${b}.test(${N})`}function*T(U,D,N){if(yield`(typeof ${N} === 'string')`,c(U.maxLength))yield`${N}.length <= ${U.maxLength}`;if(c(U.minLength))yield`${N}.length >= ${U.minLength}`;if(U.pattern!==void 0)yield`${l0(`${new RegExp(U.pattern)};`)}.test(${N})`;if(U.format!==void 0)yield`format('${U.format}', ${N})`}function*R(U,D,N){yield`(typeof ${N} === 'symbol')`}function*E(U,D,N){yield`(typeof ${N} === 'string')`,yield`${l0(`${new RegExp(U.pattern)};`)}.test(${N})`}function*v(U,D,N){yield`${V0(U.$ref)}(${N})`}function*m(U,D,N){if(yield`Array.isArray(${N})`,U.items===void 0)return yield`${N}.length === 0`;yield`(${N}.length === ${U.maxItems})`;for(let b=0;b<U.items.length;b++)yield`${A0(U.items[b],D,`${N}[${b}]`)}`}function*J2(U,D,N){yield`${N} === undefined`}function*d2(U,D,N){yield`(${U.anyOf.map((V)=>A0(V,D,N)).join(" || ")})`}function*H2(U,D,N){if(yield`${N} instanceof Uint8Array`,c(U.maxByteLength))yield`(${N}.length <= ${U.maxByteLength})`;if(c(U.minByteLength))yield`(${N}.length >= ${U.minByteLength})`}function*O4(U,D,N){yield"true"}function*Q6(U,D,N){yield o$.IsVoidLike(N)}function*i6(U,D,N){let b=l2.instances.size;l2.instances.set(b,U),yield`kind('${U[P]}', ${b}, ${N})`}function*v1(U,D,N,b=!0){let V=Y2(U.$id)?[...D,U]:D,k=U;if(b&&Y2(U.$id)){let l=V0(U.$id);if(l2.functions.has(l))return yield`${l}(${N})`;else{l2.functions.set(l,"<deferred>");let A2=n6(l,U,D,"value",!1);return l2.functions.set(l,A2),yield`${l}(${N})`}}switch(k[P]){case"Any":return yield*X(k,V,N);case"Argument":return yield*Q(k,V,N);case"Array":return yield*J(k,V,N);case"AsyncIterator":return yield*Y(k,V,N);case"BigInt":return yield*W(k,V,N);case"Boolean":return yield*q(k,V,N);case"Constructor":return yield*M(k,V,N);case"Date":return yield*z(k,V,N);case"Function":return yield*w(k,V,N);case"Import":return yield*G(k,V,N);case"Integer":return yield*K(k,V,N);case"Intersect":return yield*B(k,V,N);case"Iterator":return yield*H(k,V,N);case"Literal":return yield*A(k,V,N);case"Never":return yield*j(k,V,N);case"Not":return yield*_(k,V,N);case"Null":return yield*L(k,V,N);case"Number":return yield*h(k,V,N);case"Object":return yield*r(k,V,N);case"Promise":return yield*o(k,V,N);case"Record":return yield*f(k,V,N);case"Ref":return yield*I(k,V,N);case"RegExp":return yield*g(k,V,N);case"String":return yield*T(k,V,N);case"Symbol":return yield*R(k,V,N);case"TemplateLiteral":return yield*E(k,V,N);case"This":return yield*v(k,V,N);case"Tuple":return yield*m(k,V,N);case"Undefined":return yield*J2(k,V,N);case"Union":return yield*d2(k,V,N);case"Uint8Array":return yield*H2(k,V,N);case"Unknown":return yield*O4(k,V,N);case"Void":return yield*Q6(k,V,N);default:if(!Q0.Has(k[P]))throw new M5(U);return yield*i6(k,V,N)}}let l2={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function A0(U,D,N,b=!0){return`(${[...v1(U,D,N,b)].join(" && ")})`}function V0(U){return`check_${MX.Encode(U)}`}function l0(U){let D=`local_${l2.variables.size}`;return l2.variables.set(D,`const ${D} = ${U}`),D}function n6(U,D,N,b,V=!0){let[k,l]=[`
`,(D0)=>"".padStart(D0," ")],A2=J1("value","any"),p2=M8("boolean"),q0=[...v1(D,N,b,V)].map((D0)=>`${l(4)}${D0}`).join(` &&${k}`);return`function ${U}(${A2})${p2} {${k}${l(2)}return (${k}${q0}${k}${l(2)})
}`}function J1(U,D){let N=l2.language==="typescript"?`: ${D}`:"";return`${U}${N}`}function M8(U){return l2.language==="typescript"?`: ${U}`:""}function P4(U,D,N){let b=n6("check",U,D,"value"),V=J1("value","any"),k=M8("boolean"),l=[...l2.functions.values()],A2=[...l2.variables.values()],p2=Y2(U.$id)?`return function check(${V})${k} {
  return ${V0(U.$id)}(value)
}`:`return ${b}`;return[...A2,...l,p2].join(`
`)}function h1(...U){let D={language:"javascript"},[N,b,V]=U.length===2&&u(U[1])?[U[0],U[1],D]:U.length===2&&!u(U[1])?[U[0],[],U[1]]:U.length===3?[U[0],U[1],U[2]]:U.length===1?[U[0],[],D]:[null,[],D];if(l2.language=V.language,l2.variables.clear(),l2.functions.clear(),l2.instances.clear(),!b2(N))throw new zX(N);for(let k of b)if(!b2(k))throw new zX(k);return P4(N,b,V)}$.Code=h1;function y(U,D=[]){let N=h1(U,D,{language:"javascript"}),b=globalThis.Function("kind","format","hash",N),V=new Map(l2.instances);function k(q0,D0,f$){if(!Q0.Has(q0)||!V.has(D0))return!1;let w8=Q0.Get(q0),eW=V.get(D0);return w8(eW,f$)}function l(q0,D0){if(!D2.Has(q0))return!1;return D2.Get(q0)(D0)}function A2(q0){return C$(q0)}let p2=b(k,l,A2);return new q5(U,D,p2,N)}$.Compile=y})(S1||(S1={}));var j1=typeof Bun<"u";var UX={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},cN=($)=>{let Z=$.lastIndexOf(".");return Z===-1?"":$.slice(Z+1)};var BX,GX;class t${constructor($){if(this.path=$,j1)this.value=Bun.file($);else{if(!BX||!GX){if(typeof window<"u"){console.warn("Browser environment does not support file");return}let Z=(Q)=>console.warn(Error(`[elysia] \`file\` require \`fs${Q?"."+Q:""}\` ${Q?.includes(".")?"module ":""}which is not available in this environment`));if(typeof process>"u"||typeof process.getBuiltinModule!="function"){Z();return}let X=process.getBuiltinModule("fs");if(!X){Z();return}if(typeof X.createReadStream!="function"){Z();return}if(typeof X.promises?.stat!="function"){Z();return}BX=X.createReadStream,GX=X.promises.stat}this.value=BX($),this.stats=GX($)}}get type(){return UX[cN(this.path)]||"application/octet-stream"}get length(){return j1?this.value.size:this.stats?.then(($)=>$.size)??0}}var R6="toJSON"in new Headers,kZ=($,Z)=>{let X=new URL($);return X.pathname=Z,X.toString()},mN=($)=>typeof $=="function"&&/^\s*class\s+/.test($.toString())||$.toString&&$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||N2(Object.getPrototypeOf($)),NX=($)=>$&&typeof $=="object"&&!Array.isArray($),Z0=($,Z,X)=>{let Q=X?.skipKeys,J=X?.override??!0,Y=X?.mergeArray??!1;if(!NX($)||!NX(Z))return $;for(let[W,q]of Object.entries(Z))if(!Q?.includes(W)){if(Y&&Array.isArray(q)){$[W]=Array.isArray($[W])?[...$[W],...q]:$[W]=q;continue}if(!NX(q)||!(W in $)||mN(q)){if((J||!(W in $))&&!Object.isFrozen($))try{$[W]=q}catch{}continue}if(!Object.isFrozen($[W]))try{$[W]=Z0($[W],q,{skipKeys:Q,override:J,mergeArray:Y})}catch{}}return $},V6=($,Z)=>{let X=Z0(Object.assign({},$),Z,{skipKeys:["properties"],mergeArray:!1});return X.properties&&delete X.properties,X},g2=($,Z)=>{if(!Z)return $;let X=[],Q=[];if($){Array.isArray($)||($=[$]);for(let J of $)X.push(J),J.checksum&&Q.push(J.checksum)}if(Z){Array.isArray(Z)||(Z=[Z]);for(let J of Z)Q.includes(J.checksum)||X.push(J)}return X},uN=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],Xb=uN.reduce(($,Z)=>($[Z]=!0,$),{}),TZ=($)=>typeof $=="object"&&Object.keys($).every((Z)=>!isNaN(+Z)),z5=($,Z)=>TZ($)&&TZ(Z)?Object.assign({},$,Z):$&&!TZ($)&&TZ(Z)?Object.assign({200:$},Z):Z??$,d8=($,Z)=>!$&&!Z?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:{body:Z?.body??$?.body,headers:Z?.headers??$?.headers,params:Z?.params??$?.params,query:Z?.query??$?.query,cookie:Z?.cookie??$?.cookie,response:z5($?.response,Z?.response)},Q$=($,Z)=>{if(!Z)return $??{};if(!$)return Z??{};if(!Object.values(Z).find((Q)=>Q!=null))return{...$};let X={...$,...Z,body:Z.body??$.body,headers:Z.headers??$.headers,params:Z.params??$.params,query:Z.query??$.query,cookie:Z.cookie??$.cookie,response:z5($.response,Z.response),type:$.type||Z.type,detail:Z0(Z.detail??{},$.detail??{}),parse:g2($.parse,Z.parse),transform:g2($.transform,Z.transform),beforeHandle:g2(g2($0($.resolve,"resolve"),$.beforeHandle),g2($0(Z.resolve,"resolve"),Z.beforeHandle)),afterHandle:g2($.afterHandle,Z.afterHandle),mapResponse:g2($.mapResponse,Z.mapResponse),afterResponse:g2($.afterResponse,Z.afterResponse),trace:g2($.trace,Z.trace),error:g2($.error,Z.error),standaloneSchema:$.standaloneSchema||Z.standaloneSchema?$.standaloneSchema&&!Z.standaloneSchema?$.standaloneSchema:Z.standaloneSchema&&!$.standaloneSchema?Z.standaloneSchema:[...$.standaloneSchema??[],...Z.standaloneSchema??[]]:void 0};return X.resolve&&delete X.resolve,X},B5=($)=>{$.parse&&!Array.isArray($.parse)&&($.parse=[$.parse]),$.transform&&!Array.isArray($.transform)&&($.transform=[$.transform]),$.afterHandle&&!Array.isArray($.afterHandle)&&($.afterHandle=[$.afterHandle]),$.mapResponse&&!Array.isArray($.mapResponse)&&($.mapResponse=[$.mapResponse]),$.afterResponse&&!Array.isArray($.afterResponse)&&($.afterResponse=[$.afterResponse]),$.trace&&!Array.isArray($.trace)&&($.trace=[$.trace]),$.error&&!Array.isArray($.error)&&($.error=[$.error]);let Z=[];return $.resolve&&(Z=$0(Array.isArray($.resolve)?$.resolve:[$.resolve],"resolve"),delete $.resolve),$.beforeHandle&&(Z.length?Z=Z.concat(Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]):Z=Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]),Z.length&&($.beforeHandle=Z),$},pN=typeof Bun<"u",Qb=pN&&typeof Bun.hash=="function",V$=($)=>{let Z=9;for(let X=0;X<$.length;)Z=Math.imul(Z^$.charCodeAt(X++),387420489);return Z=Z^Z>>>9},F1=($,Z)=>{if(!Z)return;if(!Array.isArray(Z)){let Q=Z;return $&&!Q.checksum&&(Q.checksum=$),Q.scope==="scoped"&&(Q.scope="local"),Q}let X=[...Z];for(let Q of X)$&&!Q.checksum&&(Q.checksum=$),Q.scope==="scoped"&&(Q.scope="local");return X},HX=($,Z,X)=>({start:g2($.start,F1(X,Z?.start)),request:g2($.request,F1(X,Z?.request)),parse:g2($.parse,F1(X,Z?.parse)),transform:g2($.transform,F1(X,Z?.transform)),beforeHandle:g2(g2($0($.resolve,"resolve"),$.beforeHandle),F1(X,g2($0(Z?.resolve,"resolve"),Z?.beforeHandle))),afterHandle:g2($.afterHandle,F1(X,Z?.afterHandle)),mapResponse:g2($.mapResponse,F1(X,Z?.mapResponse)),afterResponse:g2($.afterResponse,F1(X,Z?.afterResponse)),trace:g2($.trace,F1(X,Z?.trace)),error:g2($.error,F1(X,Z?.error)),stop:g2($.stop,F1(X,Z?.stop))}),G5=($,Z,{skipIfHasType:X=!1})=>{if(!$)return $;if(!Array.isArray($))return X?$.scope??=Z:$.scope=Z,$;for(let Q of $)X?Q.scope??=Z:Q.scope=Z;return $},R$=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let Z=[];for(let X of $)switch(X.scope){case"global":case"scoped":Z.push({...X});break}return Z},AX=($)=>({...$,type:$?.type,detail:$?.detail,parse:R$($?.parse),transform:R$($?.transform),beforeHandle:R$($?.beforeHandle),afterHandle:R$($?.afterHandle),mapResponse:R$($?.mapResponse),afterResponse:R$($?.afterResponse),error:R$($?.error),trace:R$($?.trace)}),J$={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Enhance Your Calm":420,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},gZ=Object.fromEntries(Object.entries(J$).map(([$,Z])=>[Z,$]));function iN($){let Z=$;for(;Z.endsWith("=");)Z=Z.slice(0,-1);return Z}var w5=new TextEncoder,y8=async($,Z)=>{if(typeof $=="object"?$=JSON.stringify($):typeof $!="string"&&($=$+""),Z===null)throw TypeError("Secret key must be provided.");let X=await crypto.subtle.importKey("raw",w5.encode(Z),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",X,w5.encode($));return $+"."+iN(Buffer.from(Q).toString("base64"))},DX=async($,Z)=>{if(typeof $!="string")throw TypeError("Signed cookie string must be provided.");if(Z===null)throw TypeError("Secret key must be provided.");let X=$.slice(0,$.lastIndexOf("."));return await y8(X,Z)===$?X:!1},U5=($,Z,X)=>{if(!$.standaloneValidator?.length||!Array.isArray($.standaloneValidator)){$.standaloneValidator=[{[Z]:X}];return}let Q=$.standaloneValidator[$.standaloneValidator.length-1];Z in Q?$.standaloneValidator.push({[Z]:X}):Q[Z]=X},nN=($)=>{if(typeof $=="number")return $;if($.length<16){if($.trim().length===0)return null;let Z=Number($);return Number.isNaN(Z)?null:Z}if($.length===16){if($.trim().length===0)return null;let Z=Number($);return Number.isNaN(Z)||Z.toString()!==$?null:Z}return null},fZ=($)=>nN($)!==null;class OX{constructor($=console.error,Z=()=>{}){this.onError=$,this.onFinally=Z,this.root=null,this.promises=[]}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),this.promises.length===1&&this.then(this.onFinally),$}async drain(){for(;this.promises.length>0;){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,Z){return(this.root??Promise.resolve()).then($,Z)}}var $0=($,Z)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $=="function"||typeof $=="string")return Z?{fn:$,subType:Z}:{fn:$};if("fn"in $)return $}let X=[];for(let Q of $)typeof Q=="function"||typeof Q=="string"?X.push(Z?{fn:Q,subType:Z}:{fn:Q}):("fn"in Q)&&X.push(Q);return X},PX=($)=>($.start&&($.start=$0($.start)),$.request&&($.request=$0($.request)),$.parse&&($.parse=$0($.parse)),$.transform&&($.transform=$0($.transform)),$.beforeHandle&&($.beforeHandle=$0($.beforeHandle)),$.afterHandle&&($.afterHandle=$0($.afterHandle)),$.mapResponse&&($.mapResponse=$0($.mapResponse)),$.afterResponse&&($.afterResponse=$0($.afterResponse)),$.trace&&($.trace=$0($.trace)),$.error&&($.error=$0($.error)),$.stop&&($.stop=$0($.stop)),$),LX=($)=>{let Z=Object.create(null);return $.start?.map&&(Z.start=$.start.map((X)=>X.fn)),$.request?.map&&(Z.request=$.request.map((X)=>X.fn)),$.parse?.map&&(Z.parse=$.parse.map((X)=>X.fn)),$.transform?.map&&(Z.transform=$.transform.map((X)=>X.fn)),$.beforeHandle?.map&&(Z.beforeHandle=$.beforeHandle.map((X)=>X.fn)),$.afterHandle?.map&&(Z.afterHandle=$.afterHandle.map((X)=>X.fn)),$.mapResponse?.map&&(Z.mapResponse=$.mapResponse.map((X)=>X.fn)),$.afterResponse?.map&&(Z.afterResponse=$.afterResponse.map((X)=>X.fn)),$.error?.map&&(Z.error=$.error.map((X)=>X.fn)),$.stop?.map&&(Z.stop=$.stop.map((X)=>X.fn)),$.trace?.map?Z.trace=$.trace.map((X)=>X.fn):Z.trace=[],Z},dZ=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server,path:$.path,route:$.route,url:$.url}),Y$=($,Z=302)=>Response.redirect($,Z),X$=Symbol("ElysiaFormData"),W$=Symbol("ElysiaRequestId"),KX=($)=>{let Z=new FormData;if(Z[X$]={},$)for(let[X,Q]of Object.entries($)){if(Array.isArray(Q)){Z[X$][X]=[];for(let J of Q)Q instanceof File?Z.append(X,Q,Q.name):Q instanceof t$?Z.append(X,Q.value,Q.value?.name):Z.append(X,Q),Z[X$][X].push(Q);continue}Q instanceof File?Z.append(X,Q,Q.name):Q instanceof t$?Z.append(X,Q.value,Q.value?.name):Z.append(X,Q),Z[X$][X]=Q}return Z},E$=typeof crypto>"u"?()=>{let $="",Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",X=Z.length;for(let Q=0;Q<16;Q++)$+=Z.charAt(Math.floor(Math.random()*X));return $}:()=>{let $=crypto.randomUUID();return $.slice(0,8)+$.slice(24,32)},SX=($)=>{if(!$.length)return[];let Z=[];for(let X=0;X<$.length;X++){let Q=$[X];Q.checksum&&(Z.includes(Q.checksum)&&($.splice(X,1),X--),Z.push(Q.checksum))}return $},q$=($,Z="scoped")=>{if($){if(Z==="scoped"){for(let X of $)"scope"in X&&X.scope==="local"&&(X.scope="scoped");return}for(let X of $)"scope"in X&&(X.scope="global")}},s$=($)=>$.charCodeAt($.length-1)===47?$.slice(0,$.length-1):$+"/",N2=($)=>{if(!$)return!1;for(let Z in $)return!0;return!1},r$=($,{dynamic:Z=!1}={})=>{let X=encodeURIComponent($).replace(/%2F/g,"/");return Z&&(X=X.replace(/%3A/g,":").replace(/%3F/g,"?")),X},yZ=!!(typeof Bun>"u"||Bun.semver?.satisfies?.(Bun.version,">=1.2.14"));async function N5($){if($.bodyUsed||!$.body)return 0;let Z=0,X=$.body.getReader();for(;;){let{done:Q,value:J}=await X.read();if(Q)break;Z+=J.byteLength}return Z}var H5={headers:!0,cookie:!0,query:!0,params:!0,body:!0,response:!0};var A5=typeof Bun<"u"?Bun.env:typeof process<"u"?process?.env:void 0,a$=Symbol("ElysiaErrorCode"),M$=(A5?.NODE_ENV??A5?.ENV)==="production",lN={101:void 0,204:void 0,205:void 0,304:void 0,307:void 0,308:void 0};class n2{constructor($,Z){let X=Z??($ in gZ?gZ[$]:$);this.code=J$[$]??$,$ in lN?this.response=void 0:this.response=X}}var I1=($,Z)=>new n2($,Z);class v8 extends Error{constructor($){super($??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}}class vZ extends Error{constructor($){super("Bad Request",{cause:$});this.code="PARSE",this.status=400}}class E6 extends Error{constructor($,Z){super(Z??`"${$}" has invalid cookie signature`);this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}}var Y0=($)=>{if(!$)return{summary:void 0};let{message:Z,path:X,value:Q,type:J}=$,Y=X.slice(1).replaceAll("/","."),W=X==="";switch(J){case 42:return{...$,summary:W?"Value should not be provided":`Property '${Y}' should not be provided`};case 45:return{...$,summary:W?"Value is missing":`Property '${Y}' is missing`};case 50:let q=Z.indexOf("'"),M=Z.slice(q+1,Z.indexOf("'",q+1));return{...$,summary:W?"Value should be an email":`Property '${Y}' should be ${M}`};case 54:return{...$,summary:`${Z.slice(0,9).trim()} property '${Y}' to be ${Z.slice(8).trim()} but found: ${Q}`};case 62:let z=$.schema.anyOf.map((w)=>`'${w?.format??w.type}'`).join(", ");return{...$,summary:W?`Value should be one of ${z}`:`Property '${Y}' should be one of: ${z}`};default:return{summary:Z,...$}}};class h8 extends Error{constructor($,Z,X=`"${$}" has invalid file type`){super(X);this.property=$,this.expected=Z,this.message=X,this.code="INVALID_FILE_TYPE",this.status=422,Object.setPrototypeOf(this,h8.prototype)}toResponse($){return M$?new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...$,"content-type":"application/json"}}):new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...$,"content-type":"application/json"}})}}class a extends Error{constructor($,Z,X,Q){let J="",Y,W,q;if(Z?.provider==="standard"||"~standard"in Z||Z.schema&&"~standard"in Z.schema){let M=("~standard"in Z?Z:Z.schema)["~standard"];Y=(Q??M.validate(X).issues)?.[0],M$?J=JSON.stringify({type:"validation",on:$,found:X}):J=JSON.stringify({type:"validation",on:$,property:Y.path?.[0]||"root",message:Y?.message,summary:Y?.problem,expected:W,found:X,errors:Q},null,2),q=Y?.message}else{X&&typeof X=="object"&&X instanceof n2&&(X=X.response),Y=Q?.First()??("Errors"in Z?Z.Errors(X).First():K2.Errors(Z,X).First());let M=Y?.path||"root",z=Z?.schema??Z;if(!M$)try{W=K2.Create(z)}catch(w){W={type:"Could not create expected value",message:w?.message,error:w}}q=Y?.schema?.message||Y?.schema?.error!==void 0?typeof Y.schema.error=="function"?Y.schema.error(M$?{type:"validation",on:$,found:X}:{type:"validation",on:$,value:X,property:M,message:Y?.message,summary:Y0(Y).summary,found:X,expected:W,errors:"Errors"in Z?[...Z.Errors(X)].map(Y0):[...K2.Errors(Z,X)].map(Y0)},Z):Y.schema.error:void 0,q!==void 0?J=typeof q=="object"?JSON.stringify(q):q+"":M$?J=JSON.stringify({type:"validation",on:$,found:X}):J=JSON.stringify({type:"validation",on:$,property:M,message:Y?.message,summary:Y0(Y).summary,expected:W,found:X,errors:"Errors"in Z?[...Z.Errors(X)].map(Y0):[...K2.Errors(Z,X)].map(Y0)},null,2)}super(J);this.type=$,this.validator=Z,this.value=X,this.code="VALIDATION",this.status=422,this.valueError=Y,this.expected=W,this.customError=q,Object.setPrototypeOf(this,a.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(Y0):[...K2.Errors(this.validator,this.value)].map(Y0)}static simplifyModel($){let Z="schema"in $?$.schema:$;try{return K2.Create(Z)}catch{return Z}}get model(){return"~standard"in this.validator?this.validator:a.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:{...$,"content-type":"application/json"}})}detail($){if(!this.customError)return this.message;let Z=this.validator,X=this.value,Q=this.expected,J=this.all;return M$?{type:"validation",on:this.type,found:X,message:$}:{type:"validation",on:this.type,property:this.valueError?.path||"root",message:$,summary:Y0(this.valueError).summary,found:X,expected:Q,errors:J}}}var l8=($,Z)=>{try{return JSON.parse($)}catch{throw new a("property",Z,$)}};function o8($,Z){return Q0.Has($)||Q0.Set($,Z),(X={})=>KZ({...X,[P]:$})}var g1=($)=>{try{let Z=S1.Compile($);return Z.Create=()=>K2.Create($),Z.Error=(X)=>new a("property",$,X,Z.Errors(X)),Z}catch{return{Check:(Z)=>K2.Check($,Z),CheckThrow:(Z)=>{if(!K2.Check($,Z))throw new a("property",$,Z,K2.Errors($,Z))},Decode:(Z)=>K2.Decode($,Z),Create:()=>K2.Create($),Error:(Z)=>new a("property",$,Z,K2.Errors($,Z))}}},JW=($)=>{if(typeof $=="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},lZ=($,Z)=>$.startsWith(Z)?!0:Z.charCodeAt(Z.length-1)===42&&Z.charCodeAt(Z.length-2)===47&&$.startsWith(Z.slice(0,-1)),YW=!1,kH=()=>{YW||(console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),YW=!0)},tZ=async()=>Promise.resolve().then(() => (QW(),XW)).then(($)=>(oZ=$.fileTypeFromBlob,oZ)).catch(kH),oZ,gH=($)=>oZ?oZ($):tZ().then((Z)=>{if(Z)return Z($)}),sZ=async($,Z,X=$?.name??"")=>{if(Array.isArray($))return await Promise.all($.map((J)=>sZ(J,Z,X))),!0;if(!$)return!1;let Q=await gH($);if(!Q)throw new h8(X,Z);if(typeof Z=="string"&&!lZ(Q.mime,Z))throw new h8(X,Z);for(let J=0;J<Z.length;J++)if(lZ(Q.mime,Z[J]))return!0;throw new h8(X,Z)},rZ=($,Z)=>{if(Z instanceof t$)return!0;if(!(Z instanceof Blob)||$.minSize&&Z.size<JW($.minSize)||$.maxSize&&Z.size>JW($.maxSize))return!1;if($.extension){if(typeof $.extension=="string")return lZ(Z.type,$.extension);for(let X=0;X<$.extension.length;X++)if(lZ(Z.type,$.extension[X]))return!0;return!1}return!0};var dX={date:GW,time:fX(!0),"date-time":WW(!0),"iso-time":fX(!1),"iso-date-time":WW(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:uH,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:sH,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:pH,int32:{type:"number",validate:lH},int64:{type:"number",validate:oH},float:{type:"number",validate:MW},double:{type:"number",validate:MW},password:!0,binary:!0};function fH($){return $%4===0&&($%100!==0||$%400===0)}var dH=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,yH=[0,31,28,31,30,31,30,31,31,30,31,30,31];function GW($){let Z=dH.exec($);if(!Z)return!1;let X=+Z[1],Q=+Z[2],J=+Z[3];return Q>=1&&Q<=12&&J>=1&&J<=(Q===2&&fH(X)?29:yH[Q])}var vH=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function fX($){return function(Z){let X=vH.exec(Z);if(!X)return!1;let Q=+X[1],J=+X[2],Y=+X[3],W=X[4],q=X[5]==="-"?-1:1,M=+(X[6]||0),z=+(X[7]||0);if(M>23||z>59||$&&!W)return!1;if(Q<=23&&J<=59&&Y<60)return!0;let w=J-z*q,G=Q-M*q-(w<0?1:0);return(G===23||G===-1)&&(w===59||w===-1)&&Y<61}}var aZ=($)=>$.charCodeAt($.length-6)===32?$.slice(0,-6)+"+"+$.slice(-5):$,hH=/t|\s/i;function WW($){let Z=fX($);return function(X){let Q=X.split(hH);return Q.length===2&&GW(Q[0])&&Z(Q[1])}}var cH=/\/|:/,mH=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function uH($){return cH.test($)&&mH.test($)}var qW=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function pH($){return qW.lastIndex=0,qW.test($)}var iH=-2147483648,nH=2147483647;function lH($){return Number.isInteger($)&&$<=nH&&$>=iH}function oH($){return Number.isInteger($)}function MW(){return!0}var tH=/[^\\]\\Z/;function sH($){if(tH.test($))return!1;try{return new RegExp($),!0}catch{return!1}}var wW=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,zW=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,BW=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,rH=dX.date,aH=dX["date-time"];D2.Has("date")||D2.Set("date",($)=>{let Z=aZ($).replace(/"/g,"");if(wW.test(Z)||zW.test(Z)||BW.test(Z)||rH(Z)){let X=new Date(Z);if(!Number.isNaN(X.getTime()))return!0}return!1}),D2.Has("date-time")||D2.Set("date-time",($)=>{let Z=$.replace(/"/g,"");if(wW.test(Z)||zW.test(Z)||BW.test(Z)||aH(Z)){let X=new Date(Z);if(!Number.isNaN(X.getTime()))return!0}return!1}),Object.entries(dX).forEach(($)=>{let[Z,X]=$;D2.Has(Z)||(X instanceof RegExp?D2.Set(Z,(Q)=>X.test(Q)):typeof X=="function"&&D2.Set(Z,X))}),D2.Has("numeric")||D2.Set("numeric",($)=>!!$&&!isNaN(+$)),D2.Has("integer")||D2.Set("integer",($)=>!!$&&Number.isInteger(+$)),D2.Has("boolean")||D2.Set("boolean",($)=>$==="true"||$==="false"),D2.Has("ObjectString")||D2.Set("ObjectString",($)=>{let Z=$.charCodeAt(0);if((Z===9||Z===10||Z===32)&&(Z=$.trimStart().charCodeAt(0)),Z!==123&&Z!==91)return!1;try{return JSON.parse($),!0}catch{return!1}}),D2.Has("ArrayString")||D2.Set("ArrayString",($)=>{let Z=$.charCodeAt(0);if((Z===9||Z===10||Z===32)&&(Z=$.trimStart().charCodeAt(0)),Z!==123&&Z!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var x=Object.assign({},H1);o8("UnionEnum",($,Z)=>(typeof Z=="number"||typeof Z=="string"||Z===null)&&$.enum.includes(Z)),o8("ArrayBuffer",($,Z)=>Z instanceof ArrayBuffer);var eH=o8("Files",($,Z)=>{if($.minItems&&$.minItems>1&&!Array.isArray(Z))return!1;if(!Array.isArray(Z))return rZ($,Z);if($.minItems&&Z.length<$.minItems||$.maxItems&&Z.length>$.maxItems)return!1;for(let X=0;X<Z.length;X++)if(!rZ($,Z[X]))return!1;return!0}),$A=o8("ElysiaForm",({compiler:$,...Z},X)=>{if(!(X instanceof FormData))return!1;if($){if(!(X$ in X))throw new a("property",Z,X);if(!$.Check(X[X$]))throw $.Error(X[X$])}return!0}),U0={String:($)=>H1.String($),Numeric:($)=>{let Z=H1.Number($),X=g1(Z);return x.Transform(x.Union([x.String({format:"numeric",default:0}),x.Number($)],$)).Decode((Q)=>{let J=+Q;if(isNaN(J))return Q;if($&&!X.Check(J))throw X.Error(J);return J}).Encode((Q)=>Q)},Integer:($)=>{let Z=H1.Integer($),X=g1(Z);return x.Transform(x.Union([x.String({format:"integer",default:0}),H1.Integer($)],$)).Decode((Q)=>{let J=+Q;if(!X.Check(J))throw X.Error(J);return J}).Encode((Q)=>Q)},Date:($)=>{let Z=H1.Date($),X=g1(Z),Q=$?.default?new Date($.default):void 0;return x.Transform(x.Union([H1.Date($),x.String({format:"date-time",default:Q?.toISOString()}),x.String({format:"date",default:Q?.toISOString()}),x.Number({default:Q?.getTime()})],$)).Decode((J)=>{if(typeof J=="number"){let W=new Date(J);if(!X.Check(W))throw X.Error(W);return W}if(J instanceof Date)return J;let Y=new Date(aZ(J));if(!Y||isNaN(Y.getTime()))throw new a("property",Z,Y);if(!X.Check(Y))throw X.Error(Y);return Y}).Encode((J)=>{if(J instanceof Date)return J.toISOString();if(typeof J=="string"){if(isNaN(new Date(aZ(J)).getTime()))throw new a("property",Z,J);return J}if(!X.Check(J))throw X.Error(J);return J})},BooleanString:($)=>{let Z=H1.Boolean($),X=g1(Z);return x.Transform(x.Union([x.Boolean($),x.String({format:"boolean",default:!1})],$)).Decode((Q)=>{if(typeof Q=="string")return Q==="true";if(Q!==void 0&&!X.Check(Q))throw X.Error(Q);return Q}).Encode((Q)=>Q)},ObjectString:($,Z)=>{let X=x.Object($,Z),Q=g1(X);return x.Transform(x.Union([x.String({format:"ObjectString",default:"{}"}),X],{elysiaMeta:"ObjectString"})).Decode((J)=>{if(typeof J=="string"){if(J.charCodeAt(0)!==123)throw new a("property",X,J);if(!Q.Check(J=l8(J,X)))throw Q.Error(J);return Q.Decode(J)}return J}).Encode((J)=>{let Y;if(typeof J=="string"&&(J=l8(Y=J,X)),!Q.Check(J))throw Q.Error(J);return Y??JSON.stringify(J)})},ArrayString:($=x.String(),Z)=>{let X=x.Array($,Z),Q=g1(X),J=(Y,W=!1)=>{if(Y.charCodeAt(0)===91){if(!Q.Check(Y=l8(Y,X)))throw Q.Error(Y);return Q.Decode(Y)}if(W)return Y;throw new a("property",X,Y)};return x.Transform(x.Union([x.String({format:"ArrayString",default:Z?.default}),X])).Decode((Y)=>{if(Array.isArray(Y)){let W=[];for(let q=0;q<Y.length;q++){let M=Y[q];if(typeof M=="string"){let z=J(M,!0);Array.isArray(z)?W=W.concat(z):W.push(z);continue}W.push(M)}return W}return typeof Y=="string"?J(Y):Y}).Encode((Y)=>{let W;if(typeof Y=="string"&&(Y=l8(W=Y,X)),!Q.Check(Y))throw new a("property",X,Y);return W??JSON.stringify(Y)})},ArrayQuery:($=x.String(),Z)=>{let X=x.Array($,Z),Q=g1(X),J=(Y)=>Y.indexOf(",")!==-1?Q.Decode(Y.split(",")):[Y];return x.Transform(x.Union([x.String({default:Z?.default}),X],{elysiaMeta:"ArrayQuery"})).Decode((Y)=>{if(Array.isArray(Y)){let W=[];for(let q=0;q<Y.length;q++){let M=Y[q];if(typeof M=="string"){let z=J(M);Array.isArray(z)?W=W.concat(z):W.push(z);continue}W.push(M)}return W}return typeof Y=="string"?J(Y):Y}).Encode((Y)=>{let W;if(typeof Y=="string"&&(Y=l8(W=Y,X)),!Q.Check(Y))throw new a("property",X,Y);return W??JSON.stringify(Y)})},File:o8("File",rZ),Files:($={})=>x.Transform(eH($)).Decode((Z)=>Array.isArray(Z)?Z:[Z]).Encode((Z)=>Z),Nullable:($,Z)=>x.Union([$,x.Null()],{...Z,nullable:!0}),MaybeEmpty:($,Z)=>x.Union([$,x.Null(),x.Undefined()],Z),Cookie:($,{domain:Z,expires:X,httpOnly:Q,maxAge:J,path:Y,priority:W,sameSite:q,secure:M,secrets:z,sign:w,...G}={})=>{let K=x.Object($,G);return K.config={domain:Z,expires:X,httpOnly:Q,maxAge:J,path:Y,priority:W,sameSite:q,secure:M,secrets:z,sign:w},K},UnionEnum:($,Z={})=>{let X=$.every((Q)=>typeof Q=="string")?{type:"string"}:$.every((Q)=>typeof Q=="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q=="object"&&Q!==null))throw Error("This type does not support objects or arrays");return{default:$[0],...Z,[P]:"UnionEnum",...X,enum:$}},NoValidate:($,Z=!0)=>($.noValidate=Z,$),Form:($,Z={})=>{let X=x.Object($,{default:KX({}),...Z}),Q=g1(X);return x.Union([X,$A({compiler:Q})])},ArrayBuffer($={}){return{default:[1,2,3],...$,[P]:"ArrayBuffer"}},Uint8Array:($)=>{let Z=H1.Uint8Array($),X=g1(Z);return x.Transform(x.Union([x.ArrayBuffer(),H1.Uint8Array($)])).Decode((Q)=>{if(Q instanceof ArrayBuffer){if(!X.Check(Q=new Uint8Array(Q)))throw X.Error(Q);return Q}return Q}).Encode((Q)=>Q)}};x.BooleanString=U0.BooleanString,x.ObjectString=U0.ObjectString,x.ArrayString=U0.ArrayString,x.ArrayQuery=U0.ArrayQuery,x.Numeric=U0.Numeric,x.Integer=U0.Integer,x.File=($)=>($?.type&&tZ(),U0.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"})),x.Files=($)=>($?.type&&tZ(),U0.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}})),x.Nullable=U0.Nullable,x.MaybeEmpty=U0.MaybeEmpty,x.Cookie=U0.Cookie,x.Date=U0.Date,x.UnionEnum=U0.UnionEnum,x.NoValidate=U0.NoValidate,x.Form=U0.Form,x.ArrayBuffer=U0.ArrayBuffer,x.Uint8Array=U0.Uint8Array;var $4=z8(LW(),1),SW=z8(L6(),1);class Q1{constructor($,Z,X={}){this.name=$,this.jar=Z,this.initial=X}get cookie(){return this.jar[this.name]??this.initial}set cookie($){this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]=$}get setCookie(){return this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $=="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $=="function"?$(this.cookie):$),this}remove(){if(this.value!==void 0)return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value=="object"?JSON.stringify(this.value):this.value?.toString()??""}}var KW=($,Z,X)=>($.cookie||($.cookie={}),new Proxy(Z,{get(Q,J){return J in Z?new Q1(J,$.cookie,Object.assign({},X??{},Z[J])):new Q1(J,$.cookie,Object.assign({},X))}})),Z4=async($,Z,{secrets:X,sign:Q,...J}={})=>{if(!Z)return KW($,{},J);let Y=typeof X=="string";Q&&Q!==!0&&!Array.isArray(Q)&&(Q=[Q]);let W={},q=$4.parse(Z);for(let[M,z]of Object.entries(q)){if(z===void 0)continue;let w=SW.default(z);if(w){let G=w.charCodeAt(0),K=w.charCodeAt(w.length-1);if(G===123&&K===125||G===91&&K===93)try{w=JSON.parse(w)}catch{}}if(Q===!0||Q?.includes(M)){if(!X)throw Error("No secret is provided to cookie plugin");if(Y){let G=await DX(w,X);if(G===!1)throw new E6(M);w=G}else{let G=!0;for(let K=0;K<X.length;K++){let B=await DX(w,X[K]);if(B!==!1){G=!0,w=B;break}}if(!G)throw new E6(M)}}W[M]={value:w}}return KW($,W,J)},f6=($)=>{if(!$||!N2($))return;let Z=[];for(let[X,Q]of Object.entries($)){if(!X||!Q)continue;let J=Q.value;J!=null&&Z.push($4.serialize(X,typeof J=="object"?JSON.stringify(J):J+"",Q))}if(Z.length!==0)return Z.length===1?Z[0]:Z};var x2=($,Z)=>{if(!j1&&$ instanceof Promise)return $.then((Y)=>x2(Y,Z));let X=$.size,Q=Z&&(Z.status===206||Z.status===304||Z.status===412||Z.status===416),J=Q?{"transfer-encoding":"chunked"}:{"accept-ranges":"bytes","content-range":X?`bytes 0-${X-1}/${X}`:void 0,"transfer-encoding":"chunked"};if(!Z&&!X)return new Response($);if(!Z)return new Response($,{headers:J});if(Z.headers instanceof Headers){for(let Y of Object.keys(J))Y in Z.headers&&Z.headers.append(Y,J[Y]);return Q&&(Z.headers.delete("content-length"),Z.headers.delete("accept-ranges")),new Response($,Z)}return N2(Z.headers)?new Response($,{status:Z.status,headers:Object.assign(J,Z.headers)}):new Response($,{status:Z.status,headers:J})},hX=($,Z)=>{if(!$)return $;$.delete("set-cookie");for(let X=0;X<Z.length;X++){let Q=Z[X].indexOf("=");$.append("set-cookie",`${Z[X].slice(0,Q)}=${Z[X].slice(Q+1)||""}`)}return $},jW=($,Z)=>{if(Z?.headers){if($)if(R6)Object.assign(Z.headers,$.headers.toJSON());else for(let[X,Q]of $.headers.entries())X in Z.headers&&(Z.headers[X]=Q);return Z.status===200&&(Z.status=$.status),Z.headers["content-encoding"]&&delete Z.headers["content-encoding"],Z}if(!$)return{headers:{},status:Z?.status??200};if(R6)return Z={headers:$.headers.toJSON(),status:Z?.status??200},Z.headers["content-encoding"]&&delete Z.headers["content-encoding"],Z;Z={headers:{},status:Z?.status??200};for(let[X,Q]of $.headers.entries())X!=="content-encoding"&&X in Z.headers&&(Z.headers[X]=Q);return Z},d6=({mapResponse:$,mapCompactResponse:Z})=>async(X,Q,J)=>{let Y=X.next?.();if(Q&&Q8(Q),Y instanceof Promise&&(Y=await Y),Y?.value instanceof ReadableStream)X=Y.value;else if(Y&&(typeof Y?.done>"u"||Y?.done))return Q?$(Y.value,Q,J):Z(Y.value,J);let W=Y?.value?.sse??X?.sse??Q?.headers["content-type"]?.startsWith("text/event-stream"),q=W?(z)=>`data: ${z}

`:(z)=>z,M=W?"text/event-stream":Y?.value&&typeof Y?.value=="object"?"application/json":"text/plain";return Q?.headers?(Q.headers["transfer-encoding"]||(Q.headers["transfer-encoding"]="chunked"),Q.headers["content-type"]||(Q.headers["content-type"]=M),Q.headers["cache-control"]||(Q.headers["cache-control"]="no-cache")):Q={status:200,headers:{"content-type":M,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}},new Response(new ReadableStream({async start(z){let w=!1;if(J?.signal?.addEventListener("abort",()=>{w=!0;try{z.close()}catch{}}),!(!Y||Y.value instanceof ReadableStream)){if(Y.value!==void 0&&Y.value!==null)if(Y.value.toSSE)z.enqueue(Y.value.toSSE());else if(typeof Y.value=="object")try{z.enqueue(q(JSON.stringify(Y.value)))}catch{z.enqueue(q(Y.value.toString()))}else z.enqueue(q(Y.value.toString()))}try{for await(let G of X){if(w)break;if(G!=null)if(G.toSSE)z.enqueue(G.toSSE());else{if(typeof G=="object")try{z.enqueue(q(JSON.stringify(G)))}catch{z.enqueue(q(G.toString()))}else z.enqueue(q(G.toString()));W||await new Promise((K)=>setTimeout(()=>K(),0))}}}catch(G){console.warn(G)}try{z.close()}catch{}}}),Q)};async function*FW($){let Z=$.body;if(!Z)return;let X=Z.getReader(),Q=new TextDecoder;try{for(;;){let{done:J,value:Y}=await X.read();if(J)break;typeof Y=="string"?yield Y:yield Q.decode(Y)}}finally{X.releaseLock()}}var Q8=($)=>{if(typeof $.status=="string"&&($.status=J$[$.status]),$.cookie&&N2($.cookie)){let Z=f6($.cookie);Z&&($.headers["set-cookie"]=Z)}$.headers["set-cookie"]&&Array.isArray($.headers["set-cookie"])&&($.headers=hX(new Headers($.headers),$.headers["set-cookie"]))},X4=($)=>{let Z=d6($);return(X,Q,J)=>{let Y=!1;if(Q.headers instanceof Headers)for(let q of Q.headers.keys())if(q==="set-cookie"){if(Y)continue;Y=!0;for(let M of Q.headers.getSetCookie())X.headers.append("set-cookie",M)}else X.headers.append(q,Q.headers?.get(q)??"");else for(let q in Q.headers)X.headers.append(q,Q.headers[q]);let W=Q.status??200;if(X.status!==W&&W!==200&&(X.status<=300||X.status>400)){let q=new Response(X.body,{headers:X.headers,status:Q.status});return!q.headers.has("content-length")&&q.headers.get("transfer-encoding")==="chunked"?Z(FW(q),jW(q,Q),J):q}return!X.headers.has("content-length")&&X.headers.get("transfer-encoding")==="chunked"?Z(FW(X),jW(X,Q),J):X}};var Q4=($,Z={headers:{}})=>{let X=$.path,Q=UX[X.slice(X.lastIndexOf(".")+1)];return Q&&(Z.headers["content-type"]=Q),$.stats&&Z.status!==206&&Z.status!==304&&Z.status!==412&&Z.status!==416?$.stats.then((J)=>{let Y=J.size;return Y!==void 0&&(Z.headers["content-range"]=`bytes 0-${Y-1}/${Y}`,Z.headers["content-length"]=Y),x2($.value,Z)}):x2($.value,Z)},R0=($,Z,X)=>{if(N2(Z.headers)||Z.status!==200||Z.cookie)switch(Q8(Z),$?.constructor?.name){case"String":return Z.headers["content-type"]="text/plain",new Response($,Z);case"Array":case"Object":return Z.headers["content-type"]="application/json",new Response(JSON.stringify($),Z);case"ElysiaFile":return Q4($,Z);case"File":return x2($,Z);case"Blob":return x2($,Z);case"ElysiaCustomStatusResponse":return Z.status=$.code,R0($.response,Z,X);case void 0:return $?new Response(JSON.stringify($),Z):new Response("",Z);case"Response":return J4($,Z,X);case"Error":return I$($,Z);case"Promise":return $.then((Q)=>R0(Q,Z,X));case"Function":return R0($(),Z,X);case"Number":case"Boolean":return new Response($.toString(),Z);case"Cookie":return $ instanceof Q1?new Response($.value,Z):new Response($?.toString(),Z);case"FormData":return new Response($,Z);default:if($ instanceof Response)return J4($,Z,X);if($ instanceof Promise)return $.then((Q)=>R0(Q,Z));if($ instanceof Error)return I$($,Z);if($ instanceof n2)return Z.status=$.code,R0($.response,Z,X);if(typeof $?.next=="function"||$ instanceof ReadableStream)return y6($,Z,X);if(typeof $?.then=="function")return $.then((Q)=>R0(Q,Z));if(typeof $?.toResponse=="function")return R0($.toResponse(),Z);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return Z.headers["Content-Type"]||(Z.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),Z)}return new Response($,Z)}return typeof $?.next=="function"||$ instanceof ReadableStream?y6($,Z,X):f1($,X)},C0=($,Z,X)=>{if($!=null)if(N2(Z.headers)||Z.status!==200||Z.cookie)switch(Q8(Z),$?.constructor?.name){case"String":return Z.headers["content-type"]="text/plain",new Response($,Z);case"Array":case"Object":return Z.headers["content-type"]="application/json",new Response(JSON.stringify($),Z);case"ElysiaFile":return Q4($,Z);case"File":return x2($,Z);case"Blob":return x2($,Z);case"ElysiaCustomStatusResponse":return Z.status=$.code,C0($.response,Z,X);case void 0:return $?new Response(JSON.stringify($),Z):void 0;case"Response":return J4($,Z,X);case"Promise":return $.then((Q)=>C0(Q,Z));case"Error":return I$($,Z);case"Function":return C0($(),Z);case"Number":case"Boolean":return new Response($.toString(),Z);case"FormData":return new Response($);case"Cookie":return $ instanceof Q1?new Response($.value,Z):new Response($?.toString(),Z);default:if($ instanceof Response)return J4($,Z,X);if($ instanceof Promise)return $.then((Q)=>C0(Q,Z));if($ instanceof Error)return I$($,Z);if($ instanceof n2)return Z.status=$.code,C0($.response,Z,X);if(typeof $?.next=="function"||$ instanceof ReadableStream)return y6($,Z,X);if(typeof $?.then=="function")return $.then((Q)=>C0(Q,Z));if(typeof $?.toResponse=="function")return C0($.toResponse(),Z);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return Z.headers["Content-Type"]||(Z.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),Z)}return new Response($,Z)}else switch($?.constructor?.name){case"String":return Z.headers["content-type"]="text/plain",new Response($);case"Array":case"Object":return Z.headers["content-type"]="application/json",new Response(JSON.stringify($),Z);case"ElysiaFile":return Q4($,Z);case"File":return x2($,Z);case"Blob":return x2($,Z);case"ElysiaCustomStatusResponse":return Z.status=$.code,C0($.response,Z,X);case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Promise":return $.then((Q)=>{let J=C0(Q,Z);if(J!==void 0)return J});case"Error":return I$($,Z);case"Function":return f1($(),X);case"Number":case"Boolean":return new Response($.toString());case"Cookie":return $ instanceof Q1?new Response($.value,Z):new Response($?.toString(),Z);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>C0(Q,Z));if($ instanceof Error)return I$($,Z);if($ instanceof n2)return Z.status=$.code,C0($.response,Z,X);if(typeof $?.next=="function"||$ instanceof ReadableStream)return y6($,Z,X);if(typeof $?.then=="function")return $.then((Q)=>C0(Q,Z));if(typeof $?.toResponse=="function")return C0($.toResponse(),Z);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return Z.headers["Content-Type"]||(Z.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),Z)}return new Response($)}},f1=($,Z)=>{switch($?.constructor?.name){case"String":return new Response($,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return Q4($);case"File":return x2($);case"Blob":return x2($);case"ElysiaCustomStatusResponse":return R0($.response,{status:$.code,headers:{}});case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Error":return I$($);case"Promise":return $.then((X)=>f1(X,Z));case"Function":return f1($(),Z);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((X)=>f1(X,Z));if($ instanceof Error)return I$($);if($ instanceof n2)return R0($.response,{status:$.code,headers:{}});if(typeof $?.next=="function"||$ instanceof ReadableStream)return y6($,void 0,Z);if(typeof $?.then=="function")return $.then((X)=>R0(X,set));if(typeof $?.toResponse=="function")return f1($.toResponse());if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},I$=($,Z)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:Z?.status!==200?Z?.status??500:500,headers:Z?.headers}),_W=($,Z,X={})=>{if(typeof $=="function")return;let Q=R0($,{headers:X});if(!Z.parse?.length&&!Z.transform?.length&&!Z.beforeHandle?.length&&!Z.afterHandle?.length)return()=>Q.clone()},J4=X4({mapResponse:R0,mapCompactResponse:f1}),y6=d6({mapResponse:R0,mapCompactResponse:f1});var w$={name:"web-standard",isWebStandard:!0,handler:{mapResponse:R0,mapEarlyResponse:C0,mapCompactResponse:f1,createStaticHandler:_W},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json($){return $?`try{c.body=await c.request.json()}catch{}
`:`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData($){let Z=`
c.body={}
`;return $?Z+="let form;try{form=await c.request.formData()}catch{}":Z+=`const form=await c.request.formData()
`,Z+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},async stop($,Z){if(!$.server)throw Error("Elysia isn't running. Call `app.listen` to start the server.");if($.server&&($.server.stop(Z),$.server=null,$.event.stop?.length))for(let X=0;X<$.event.stop.length;X++)$.event.stop[X].fn($)},composeGeneralHandler:{parameters:"r",createContext($){let Z="",X="",Q=$.setHeaders;for(let W of Object.keys($.decorator))Z+=`,'${W}':decorator['${W}']`;let J=$.config.handler?.standardHostname??!0,Y=!!$.event.trace?.length;return X+=`const u=r.url,s=u.indexOf('/',${J?11:7}),qi=u.indexOf('?',s+1)
let p
if(qi===-1)p=u.substring(s)
else p=u.substring(s, qi)
`,Y&&(X+=`const id=randomId()
`),X+="const c={request:r,store,qi,path:p,url:u,redirect,status,set:{headers:",X+=Object.keys(Q??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",X+=",status:200}",$.inference.server&&(X+=",get server(){return app.getServer()}"),Y&&(X+=",[ELYSIA_REQUEST_ID]:id"),X+=Z,X+=`}
`,X},error404($,Z,X=""){let Q="if(route===null){"+X+`
return `;return Z?Q+=`app.handleError(c,notFound,false,${this.parameters})`:Q+=$?"new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"error404.clone()",Q+="}",{declare:Z?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:Q}}},composeError:{mapResponseContext:"",validationError:"return new Response(error.message,{headers:Object.assign({'content-type':'application/json'},set.headers),status:set.status})",unknownError:"return new Response(error.message,{headers:set.headers,status:error.status??set.status??500})"},listen(){return()=>{throw Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}};function CW(){try{if(typeof caches<"u"&&typeof caches.default<"u"||typeof WebSocketPair<"u")return!0}catch{return!1}return!1}var $I={...w$,name:"cloudflare-worker",composeGeneralHandler:{...w$.composeGeneralHandler,error404($,Z,X){let{code:Q}=w$.composeGeneralHandler.error404($,Z,X);return{code:Q,declare:Z?"":`const error404Message=notFound.message.toString()
const error404={clone:()=>new Response(error404Message,{status:404})}
`}}},beforeCompile($){for(let Z of $.routes)Z.compile()},listen($){return(Z,X)=>{console.warn("Cloudflare Worker does not support listen method. Please export default Elysia instance instead."),$.compile()}}};var UA=($)=>{$.startsWith("async")&&($=$.slice(5)),$=$.trimStart();let Z=-1;if($.charCodeAt(0)===40&&(Z=$.indexOf("=>",$.indexOf(")")),Z!==-1)){let J=Z;for(;J>0&&$.charCodeAt(--J)!==41;);let Y=$.slice(Z+2);return Y.charCodeAt(0)===32&&(Y=Y.trimStart()),[$.slice(1,J),Y,{isArrowReturn:Y.charCodeAt(0)!==123}]}if(/^(\w+)=>/g.test($)&&(Z=$.indexOf("=>"),Z!==-1)){let J=$.slice(Z+2);return J.charCodeAt(0)===32&&(J=J.trimStart()),[$.slice(0,Z),J,{isArrowReturn:J.charCodeAt(0)!==123}]}if($.startsWith("function")){Z=$.indexOf("(");let J=$.indexOf(")");return[$.slice(Z+1,J),$.slice(J+2),{isArrowReturn:!1}]}let X=$.indexOf("(");if(X!==-1){let J=$.indexOf(`
`,2),Y=$.slice(0,J),W=Y.lastIndexOf(")")+1,q=$.slice(J+1);return[Y.slice(X,W),"{"+q,{isArrowReturn:!1}]}let Q=$.split(`
`,2);return[Q[0],Q[1],{isArrowReturn:!1}]},NA=($)=>{let Z=$.indexOf("{");if(Z===-1)return[-1,0];let X=Z+1,Q=1;for(;X<$.length;X++){let J=$.charCodeAt(X);if(J===123?Q++:J===125&&Q--,Q===0)break}return Q!==0?[0,$.length]:[Z,X+1]},HA=($)=>{let Z=$.lastIndexOf("}");if(Z===-1)return[-1,0];let X=Z-1,Q=1;for(;X>=0;X--){let J=$.charCodeAt(X);if(J===125?Q++:J===123&&Q--,Q===0)break}return Q!==0?[-1,0]:[X,Z+1]},VW=($)=>{for(;;){let Z=$.indexOf(":");if(Z===-1)break;let X=$.indexOf(",",Z);X===-1&&(X=$.indexOf("}",Z)-1),X===-2&&(X=$.length),$=$.slice(0,Z)+$.slice(X)}return $},EW=($)=>{let Z=!1;$.charCodeAt(0)===40&&($=$.slice(1,-1)),$.charCodeAt(0)===123&&(Z=!0,$=$.slice(1,-1)),$=$.replace(/( |\t|\n)/g,"").trim();let X=[];for(;;){let[J,Y]=NA($);if(J===-1)break;X.push($.slice(0,J-1)),$.charCodeAt(Y)===44&&Y++,$=$.slice(Y)}$=VW($),$&&(X=X.concat($.split(",")));let Q=Object.create(null);for(let J of X){if(J.indexOf(",")===-1){Q[J]=!0;continue}for(let Y of J.split(","))Q[Y.trim()]=!0}return{hasParenthesis:Z,parameters:Q}},AA=($,Z)=>{let{parameters:X,hasParenthesis:Q}=EW($);return X.query&&(Z.query=!0),X.headers&&(Z.headers=!0),X.body&&(Z.body=!0),X.cookie&&(Z.cookie=!0),X.set&&(Z.set=!0),X.server&&(Z.server=!0),X.route&&(Z.route=!0),X.url&&(Z.url=!0),X.path&&(Z.path=!0),Q?`{ ${Object.keys(X).join(", ")} }`:Object.keys(X).join(", ")},RW=($,Z,X)=>{let Q=new RegExp(`${$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);X!==void 0&&(Q.lastIndex=X);let J=Q.exec(Z);return J?J.index:-1};var bW=($,Z,X=0)=>{if(X>5)return[];let Q=[],J=Z;for(;;){let Y=RW(" = "+$,J);if(Y===-1&&(Y=RW("="+$,J)),Y===-1){let z=J.indexOf(" = "+$);if(z===-1&&(z=J.indexOf("="+$)),z+3+$.length!==J.length)break;Y=z}let W=J.slice(0,Y),q=W.lastIndexOf(" "),M=W.slice(q!==-1?q+1:-1);if(M==="}"){let[z,w]=HA(W);Q.push(VW(J.slice(z,w))),J=J.slice(Y+3+$.length);continue}for(;M.charCodeAt(0)===44;)M=M.slice(1);for(;M.charCodeAt(0)===9;)M=M.slice(1);M.includes("(")||Q.push(M),J=J.slice(Y+3+$.length)}for(let Y of Q){if(Y.charCodeAt(0)===123)continue;let W=bW(Y,Z);W.length>0&&Q.push(...W)}return Q},DA=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(","))return $.indexOf("...")!==-1?$.slice($.indexOf("...")+3):void 0;let Z=$.indexOf("...");if(Z!==-1)return $.slice(Z+3).trimEnd()},OA=($,Z,X)=>{let Q=(J,Y)=>new RegExp(`${Y}\\.(${J})|${Y}\\["${J}"\\]|${Y}\\['${J}'\\]`).test($);for(let J of Z)if(J){if(J.charCodeAt(0)===123){let Y=EW(J).parameters;Y.query&&(X.query=!0),Y.headers&&(X.headers=!0),Y.body&&(X.body=!0),Y.cookie&&(X.cookie=!0),Y.set&&(X.set=!0),Y.server&&(X.server=!0),Y.url&&(X.url=!0),Y.route&&(X.route=!0),Y.path&&(X.path=!0);continue}if(!X.query&&(Q("query",J)||$.includes("return "+J)||$.includes("return "+J+".query"))&&(X.query=!0),!X.headers&&Q("headers",J)&&(X.headers=!0),!X.body&&Q("body",J)&&(X.body=!0),!X.cookie&&Q("cookie",J)&&(X.cookie=!0),!X.set&&Q("set",J)&&(X.set=!0),!X.server&&Q("server",J)&&(X.server=!0),!X.route&&Q("route",J)&&(X.route=!0),!X.url&&Q("url",J)&&(X.url=!0),!X.path&&Q("path",J)&&(X.path=!0),X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server&&X.route&&X.url&&X.path)break}return Z};var PA=($,Z,X)=>{try{let Q=new RegExp(`\\w\\((.*?)?${$}`,"gs");Q.test(Z);let J=Z.charCodeAt(Q.lastIndex);return J===41||J===44?(X.query=!0,X.headers=!0,X.body=!0,X.cookie=!0,X.set=!0,X.server=!0,X.url=!0,X.route=!0,X.path=!0,!0):!1}catch{return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(Z),console.log("--- context ---"),console.log($),!0}},Y4,W4={},LA=($)=>{$===null||CW()||($===void 0&&($=295000),Y4&&clearTimeout(Y4),Y4=setTimeout(()=>{W4={},Y4=void 0,j1&&Bun.gc(!1)},$))},q4=($,Z)=>({body:$.body||Z.body,cookie:$.cookie||Z.cookie,headers:$.headers||Z.headers,query:$.query||Z.query,set:$.set||Z.set,server:$.server||Z.server,url:$.url||Z.url,route:$.route||Z.route,path:$.path||Z.path}),J8=($,Z={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},X={})=>{let Q=[];$.request?.length&&Q.push(...$.request),$.beforeHandle?.length&&Q.push(...$.beforeHandle),$.parse?.length&&Q.push(...$.parse),$.error?.length&&Q.push(...$.error),$.transform?.length&&Q.push(...$.transform),$.afterHandle?.length&&Q.push(...$.afterHandle),$.mapResponse?.length&&Q.push(...$.mapResponse),$.afterResponse?.length&&Q.push(...$.afterResponse),$.handler&&typeof $.handler=="function"&&Q.push($.handler);for(let J=0;J<Q.length;J++){let Y=Q[J];if(!Y)continue;let W=typeof Y=="object"?Y.fn:Y;if(typeof W!="function")continue;let q=W.toString(),M=V$(q),z=W4[M];if(z){Z=q4(Z,z);continue}LA(X.gcTime);let w={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[G,K]=UA(q),B=AA(G,w),H=DA(B);if(H){let A=bW(H,K.slice(1,-1));A.splice(0,-1,H);let j=K;j.charCodeAt(0)===123&&j.charCodeAt(K.length-1)===125&&(j=j.slice(1,-1)),PA(H,j,w)||OA(j,A,w),!w.query&&j.includes("return "+H+".query")&&(w.query=!0)}if(W4[M]||(W4[M]=w),Z=q4(Z,w),Z.query&&Z.headers&&Z.body&&Z.cookie&&Z.set&&Z.server&&Z.url&&Z.route&&Z.path)break}return Z};var H0=($,Z,X)=>{if(N2(Z.headers)||Z.status!==200||Z.cookie)switch(Q8(Z),$?.constructor?.name){case"String":return new Response($,Z);case"Array":case"Object":return Z.headers["content-type"]="application/json",new Response(JSON.stringify($),Z);case"ElysiaFile":return x2($.value,Z);case"File":return x2($,Z);case"Blob":return x2($,Z);case"ElysiaCustomStatusResponse":return Z.status=$.code,H0($.response,Z,X);case void 0:return $?new Response(JSON.stringify($),Z):new Response("",Z);case"Response":return M4($,Z,X);case"Error":return T$($,Z);case"Promise":return $.then((Q)=>H0(Q,Z,X));case"Function":return H0($(),Z,X);case"Number":case"Boolean":return new Response($.toString(),Z);case"Cookie":return $ instanceof Q1?new Response($.value,Z):new Response($?.toString(),Z);case"FormData":return new Response($,Z);default:if($ instanceof Response)return M4($,Z,X);if($ instanceof Promise)return $.then((Q)=>H0(Q,Z));if($ instanceof Error)return T$($,Z);if($ instanceof n2)return Z.status=$.code,H0($.response,Z,X);if(typeof $?.next=="function"||$ instanceof ReadableStream)return v6($,Z,X);if(typeof $?.then=="function")return $.then((Q)=>H0(Q,Z));if(typeof $?.toResponse=="function")return H0($.toResponse(),Z);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return Z.headers["Content-Type"]||(Z.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),Z)}return new Response($,Z)}return typeof $?.next=="function"||$ instanceof ReadableStream?v6($,Z,X):d1($,X)},N0=($,Z,X)=>{if($!=null)if(N2(Z.headers)||Z.status!==200||Z.cookie)switch(Q8(Z),$?.constructor?.name){case"String":return new Response($,Z);case"Array":case"Object":return Z.headers["content-type"]="application/json",new Response(JSON.stringify($),Z);case"ElysiaFile":return x2($.value,Z);case"File":return x2($,Z);case"Blob":return x2($,Z);case"ElysiaCustomStatusResponse":return Z.status=$.code,N0($.response,Z,X);case void 0:return $?new Response(JSON.stringify($),Z):void 0;case"Response":return M4($,Z,X);case"Promise":return $.then((Q)=>N0(Q,Z));case"Error":return T$($,Z);case"Function":return N0($(),Z);case"Number":case"Boolean":return new Response($.toString(),Z);case"FormData":return new Response($);case"Cookie":return $ instanceof Q1?new Response($.value,Z):new Response($?.toString(),Z);default:if($ instanceof Response)return M4($,Z,X);if($ instanceof Promise)return $.then((Q)=>N0(Q,Z));if($ instanceof Error)return T$($,Z);if($ instanceof n2)return Z.status=$.code,N0($.response,Z,X);if(typeof $?.next=="function"||$ instanceof ReadableStream)return v6($,Z,X);if(typeof $?.then=="function")return $.then((Q)=>N0(Q,Z));if(typeof $?.toResponse=="function")return N0($.toResponse(),Z);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return Z.headers["Content-Type"]||(Z.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),Z)}return new Response($,Z)}else switch($?.constructor?.name){case"String":return new Response($);case"Array":case"Object":return Z.headers["content-type"]="application/json",new Response(JSON.stringify($),Z);case"ElysiaFile":return x2($.value,Z);case"File":return x2($,Z);case"Blob":return x2($,Z);case"ElysiaCustomStatusResponse":return Z.status=$.code,N0($.response,Z,X);case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Promise":return $.then((Q)=>{let J=N0(Q,Z);if(J!==void 0)return J});case"Error":return T$($,Z);case"Function":return d1($(),X);case"Number":case"Boolean":return new Response($.toString());case"Cookie":return $ instanceof Q1?new Response($.value,Z):new Response($?.toString(),Z);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>N0(Q,Z));if($ instanceof Error)return T$($,Z);if($ instanceof n2)return Z.status=$.code,N0($.response,Z,X);if(typeof $?.next=="function"||$ instanceof ReadableStream)return v6($,Z,X);if(typeof $?.then=="function")return $.then((Q)=>N0(Q,Z));if(typeof $?.toResponse=="function")return N0($.toResponse(),Z);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return Z.headers["Content-Type"]||(Z.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),Z)}return new Response($)}},d1=($,Z)=>{switch($?.constructor?.name){case"String":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return x2($.value);case"File":return x2($);case"Blob":return x2($);case"ElysiaCustomStatusResponse":return H0($.response,{status:$.code,headers:{}});case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Error":return T$($);case"Promise":return $.then((X)=>d1(X,Z));case"Function":return d1($(),Z);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((X)=>d1(X,Z));if($ instanceof Error)return T$($);if($ instanceof n2)return H0($.response,{status:$.code,headers:{}});if(typeof $?.next=="function"||$ instanceof ReadableStream)return v6($,void 0,Z);if(typeof $?.then=="function")return $.then((X)=>H0(X,set));if(typeof $?.toResponse=="function")return d1($.toResponse());if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},T$=($,Z)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:Z?.status!==200?Z?.status??500:500,headers:Z?.headers}),xW=($,Z,X={})=>{if(typeof $=="function")return;let Q=H0($,{headers:X});if(!Z.parse?.length&&!Z.transform?.length&&!Z.beforeHandle?.length&&!Z.afterHandle?.length)return()=>Q.clone()},M4=X4({mapResponse:H0,mapCompactResponse:d1}),v6=d6({mapResponse:H0,mapCompactResponse:d1});var hW=z8(L6(),1);var Y8=z8(L6(),1),t8=1,s8=2,r8=4,z$=8;function cX($,Z=0,X,Q){let J=Object.create(null),Y=0,W=$.length,q=Z-1,M=q;for(let w=0;w<W;w++)switch($.charCodeAt(w)){case 38:z($,w),q=w,M=w,Y=0;break;case 61:M<=q?M=w:Y|=z$;break;case 43:M>q?Y|=r8:Y|=t8;break;case 37:M>q?Y|=z$:Y|=s8;break}return q<W&&z($,W),J;function z(w,G){let K=M>q,B=K?M:G,H=w.slice(q+1,B);if(!K&&H.length===0)return;let A=H;Y&t8&&(A=A.replace(/\+/g," ")),Y&s8&&(A=Y8.default(A)||A);let j="";if(K){let L=w.slice(M+1,G);Y&r8&&(L=L.replace(/\+/g," ")),Y&z$&&(L=Y8.default(L)||L),j=L}let _=J[A];X?.[A]?j.charCodeAt(0)===91?(Q?.[A]?j=JSON.parse(j):j=j.slice(1,-1).split(","),_===void 0?J[A]=j:Array.isArray(_)?_.push(...j):(J[A]=j,J[A].unshift(_))):_===void 0?J[A]=j:Array.isArray(_)?_.push(j):J[A]=[_,j]:J[A]=j}}function IW($,Z=0){let X=Object.create(null),Q=0,J=$.length,Y=Z-1,W=Y;for(let M=0;M<J;M++)switch($.charCodeAt(M)){case 38:q($,M),Y=M,W=M,Q=0;break;case 61:W<=Y?W=M:Q|=z$;break;case 43:W>Y?Q|=r8:Q|=t8;break;case 37:W>Y?Q|=z$:Q|=s8;break}return Y<J&&q($,J),X;function q(M,z){let w=W>Y,G=w?W:z,K=M.slice(Y+1,G);if(!w&&K.length===0)return;let B=K;Q&t8&&(B=B.replace(/\+/g," ")),Q&s8&&(B=Y8.default(B)||B);let H="";if(w){let j=M.slice(W+1,z);Q&r8&&(j=j.replace(/\+/g," ")),Q&z$&&(j=Y8.default(j)||j),H=j}let A=X[B];if(H.charCodeAt(0)===91&&H.charCodeAt(H.length-1)===93){try{H=JSON.parse(H)}catch{}A===void 0?X[B]=H:Array.isArray(A)?A.push(H):X[B]=[A,H]}else if(H.charCodeAt(0)===123&&H.charCodeAt(H.length-1)===125){try{H=JSON.parse(H)}catch{}A===void 0?X[B]=H:Array.isArray(A)?A.push(H):X[B]=[A,H]}else H.includes(",")&&(H=H.split(",")),A===void 0?X[B]=H:Array.isArray(A)?A.push(H):X[B]=[A,H]}}function k$($){let Z=Object.create(null),X=0,Q=$.length,J=-1,Y=-1;for(let q=0;q<Q;q++)switch($.charCodeAt(q)){case 38:W($,q),J=q,Y=q,X=0;break;case 61:Y<=J?Y=q:X|=z$;break;case 43:Y>J?X|=r8:X|=t8;break;case 37:Y>J?X|=z$:X|=s8;break}return J<Q&&W($,Q),Z;function W(q,M){let z=Y>J,w=z?Y:M,G=q.slice(J+1,w);if(!z&&G.length===0)return;let K=G;X&t8&&(K=K.replace(/\+/g," ")),X&s8&&(K=Y8.default(K)||K);let B="";if(z){let A=q.slice(Y+1,M);X&r8&&(A=A.replace(/\+/g," ")),X&z$&&(A=Y8.default(A)||A),B=A}let H=Z[K];H===void 0?Z[K]=B:Array.isArray(H)?H.push(B):Z[K]=[H,B]}}var W8=Symbol("ElysiaTrace"),B$=()=>{let{promise:$,resolve:Z}=Promise.withResolvers(),{promise:X,resolve:Q}=Promise.withResolvers(),{promise:J,resolve:Y}=Promise.withResolvers(),W=[],q=[];return[(M)=>(M&&W.push(M),$),(M)=>{let z=[],w=[],G=null;for(let B=0;B<(M.total??0);B++){let{promise:H,resolve:A}=Promise.withResolvers(),{promise:j,resolve:_}=Promise.withResolvers(),{promise:L,resolve:h}=Promise.withResolvers(),r=[],o=[];z.push((f)=>(f&&r.push(f),H)),w.push((f)=>{let I={...f,end:j,error:L,index:B,onStop(g){return g&&o.push(g),j}};A(I);for(let g=0;g<r.length;g++)r[g](I);return(g=null)=>{let T=performance.now();g&&(G=g);let R={end:T,error:g,get elapsed(){return T-f.begin}};for(let E=0;E<o.length;E++)o[E](R);_(T),h(g)}})}let K={...M,end:X,error:J,onEvent(B){for(let H=0;H<z.length;H++)z[H](B)},onStop(B){return B&&q.push(B),X}};Z(K);for(let B=0;B<W.length;B++)W[B](K);return{resolveChild:w,resolve(B=null){let H=performance.now();!B&&G&&(B=G);let A={end:H,error:B,get elapsed(){return H-M.begin}};for(let j=0;j<q.length;j++)q[j](A);Q(H),Y(B)}}}]},TW=($)=>(Z)=>{let[X,Q]=B$(),[J,Y]=B$(),[W,q]=B$(),[M,z]=B$(),[w,G]=B$(),[K,B]=B$(),[H,A]=B$(),[j,_]=B$(),[L,h]=B$();return $({id:Z[W$],context:Z,set:Z.set,onRequest:X,onParse:J,onTransform:W,onBeforeHandle:M,onHandle:w,onAfterHandle:K,onMapResponse:j,onAfterResponse:L,onError:H,time:Date.now(),store:Z.store}),{request:Q,parse:Y,transform:q,beforeHandle:z,handle:G,afterHandle:B,error:A,mapResponse:_,afterResponse:h}};var f0=Symbol.for("TypeBox.Kind"),KA=Symbol.for("TypeBox.Hint"),gW=($)=>/(\ |-|\t|\n|\.)/.test($)||!isNaN(+$[0]),fW=($,Z,X=!1)=>{if(typeof Z==="number")return`${$}[${Z}]`;if(gW(Z))return`${$}${X?"?.":""}["${Z}"]`;return`${$}${X?"?":""}.${Z}`},SA=($)=>gW($)?`"${$}"`:$,kW=($,Z=0,X)=>{if(X.type!=="string"||X.const||X.trusted)return $;let Q="";for(let J=Z-1;J>=0;J--)Q+=`d.h${J}(`;return Q+$+")".repeat(Z)},dW=($)=>{if(!$.allOf||f0 in $&&($[f0]!=="Intersect"||$.type!=="object"))return $;let{allOf:Z,...X}=$;if(X.properties={},f0 in X)X[f0]="Object";for(let Q of Z){if(Q.type!=="object")continue;let{properties:J,required:Y,type:W,[f0]:q,...M}=Q;if(Y)X.required=X.required?X.required.concat(Y):Y;Object.assign(X,M);for(let z in Q.properties)X.properties[z]=dW(Q.properties[z])}return X},jA=($,Z,X)=>{let Q=$.patternProperties["^(.*)$"]??$.patternProperties[Object.keys($.patternProperties)[0]];if(!Q)return Z;let J=X.array;X.array++;let Y=`(()=>{const ar${J}s=Object.keys(${Z}),ar${J}v={};for(let i=0;i<ar${J}s.length;i++){const ar${J}p=${Z}[ar${J}s[i]];ar${J}v[ar${J}s[i]]=${G$(Q,`ar${J}p`,X)}`,W=X.optionalsInArray[J+1];if(W)for(let q=0;q<W.length;q++){let M=`ar${J}v[ar${J}s[i]].${W[q]}`;Y+=`;if(${M}===undefined)delete ${M}`}return Y+=`}return ar${J}v})()`,Y},FA=($,Z,X)=>{let Q=X.array;X.array++;let J=Z==="v"&&!X.unions.length,Y="";if(!J)Y="(()=>{";Y+=`const ar${Q}v=[`;for(let W=0;W<$.length;W++){if(W!==0)Y+=",";Y+=G$($[W],fW(Z,W,X.parentIsOptional),X)}if(Y+="];",!J)Y+=`return ar${Q}v})()`;return Y};function w4($,Z=new WeakMap){if($===null||typeof $!=="object"||typeof $==="function")return $;if(Z.has($))return Z.get($);if(Array.isArray($)){let X=Array($.length);Z.set($,X);for(let Q=0;Q<$.length;Q++)X[Q]=w4($[Q],Z);return X}if(typeof $==="object"){let X=Object.keys($).concat(Object.getOwnPropertySymbols($)),Q={};for(let J of X)Q[J]=w4($[J],Z);return Q}return $}var _A=($,Z,X)=>{if(X.TypeCompiler===void 0){if(!X.typeCompilerWanred)console.warn(Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),X.typeCompilerWanred=!0;return Z}X.unionKeys[Z]=1;let Q=X.unions.length,J=X.unions[Q]=[],Y=`(()=>{
`,W=(q)=>{if(!(f0 in q)||!q.$ref)return q;if(q[f0]==="This")return w4(X.definitions[q.$ref]);else if(q[f0]==="Ref")if(!X.modules)console.warn(Error("[exact-mirror] modules is required when using nested cyclic reference"));else return X.modules.Import(q.$ref);return q};for(let q=0;q<$.length;q++){let M=W($[q]);if(Array.isArray(M.anyOf))for(let z=0;z<M.anyOf.length;z++)M.anyOf[z]=W(M.anyOf[z]);else if(M.items)if(Array.isArray(M.items))for(let z=0;z<M.items.length;z++)M.items[z]=W(M.items[z]);else M.items=W(M.items);J.push(S1.Compile(M)),Y+=`if(d.unions[${Q}][${q}].Check(${Z})){return ${G$(M,Z,{...X,recursion:X.recursion+1,parentIsOptional:!0})}}
`}return Y+=`return ${X.removeUnknownUnionType?"undefined":Z}})()`,Y},G$=($,Z,X)=>{if(!$)return"";let Q=Z==="v"&&!X.unions.length;if(f0 in $&&$[f0]==="Import"&&$.$ref in $.$defs)return G$($.$defs[$.$ref],Z,{...X,definitions:Object.assign(X.definitions,$.$defs)});if(Q&&$.type!=="object"&&$.type!=="array"&&!$.anyOf)return`return ${kW("v",X.sanitize?.length,$)}`;if(X.recursion>=X.recursionLimit)return Z;let J="";if($.$id&&KA in $)X.definitions[$.$id]=$;switch($.type){case"object":if($[f0]==="Record"){J=jA($,Z,X);break}if($=dW($),J+="{",$.additionalProperties)J+=`...${Z},`;let Y=Object.keys($.properties);for(let z=0;z<Y.length;z++){let w=Y[z],G=!$.required||$.required&&!$.required.includes(w)||Array.isArray($.properties[w].anyOf),K=fW(Z,w,X.parentIsOptional);if(G){let H=X.array;if(Z.startsWith("ar")){let A=K.slice(K.indexOf(".")+1),j=X.optionalsInArray;if(j[H])j[H].push(A);else j[H]=[A]}else X.optionals.push(K)}let B=$.properties[w];if(z!==0)J+=",";J+=`${SA(w)}:${G?`${K}===undefined?undefined:`:""}${G$(B,K,{...X,recursion:X.recursion+1,parentIsOptional:G})}`}J+="}";break;case"array":if($.items.type!=="object"&&$.items.type!=="array")if(Array.isArray($.items)){J=FA($.items,Z,X);break}else if(Q)return"return v";else if(f0 in $.items&&$.items.$ref&&($.items[f0]==="Ref"||$.items[f0]==="This"))J=G$(w4(X.definitions[$.items.$ref]),Z,{...X,parentIsOptional:!0,recursion:X.recursion+1});else{J=Z;break}let W=X.array;X.array++;let q=Z;if(Q)J=`const ar${W}v=new Array(${Z}.length);`;else q=`ar${W}s`,J=`((${q})=>{const ar${W}v=new Array(${q}.length);`;J+=`for(let i=0;i<${q}.length;i++){const ar${W}p=${q}[i];ar${W}v[i]=${G$($.items,`ar${W}p`,X)}`;let M=X.optionalsInArray[W+1];if(M)for(let z=0;z<M.length;z++){let w=`ar${W}v[i].${M[z]}`;J+=`;if(${w}===undefined)delete ${w}`}if(J+="}",!Q)J+=`return ar${W}v})(${Z})`;break;default:if($.$ref&&$.$ref in X.definitions)return G$(X.definitions[$.$ref],Z,X);if(Array.isArray($.anyOf)){J=_A($.anyOf,Z,X);break}J=kW(Z,X.sanitize?.length,$);break}if(!Q)return J;if($.type==="array")J=`${J}const x=ar0v;`;else J=`const x=${J}
`;for(let Y=0;Y<X.optionals.length;Y++){let W=X.optionals[Y],q=W.slice(1);if(J+=`if(${W}===undefined`,X.unionKeys[W])J+=`||x${q}===undefined`;let M=q.charCodeAt(0)!==63&&$.type!=="array";J+=`)delete x${M?q.charCodeAt(0)===91?"?.":"?":""}${q}
`}return`${J}return x`},z4=($,{TypeCompiler:Z,modules:X,definitions:Q,sanitize:J,recursionLimit:Y=8,removeUnknownUnionType:W=!1}={})=>{let q=[];if(typeof J==="function")J=[J];let M=G$($,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:q,unionKeys:{},TypeCompiler:Z,modules:X,definitions:Q??X?.$defs??{},sanitize:J,recursion:0,recursionLimit:Y,removeUnknownUnionType:W});if(!q.length&&!J?.length)return Function("v",M);let z;if(J?.length){z={};for(let w=0;w<J.length;w++)z[`h${w}`]=J[w]}return Function("d",`return function mirror(v){${M}}`)({unions:q,...z})};var iX=($)=>$?$?.[P]==="Import"&&$.References?$.References().some(iX):($.schema&&($=$.schema),!!$&&(X0 in $)):!1,y1=($)=>{if(!$)return!1;let Z=$?.schema??$;if(Z[P]==="Import"&&$.References)return $.References().some(y1);if(Z.anyOf)return Z.anyOf.some(y1);if(Z.someOf)return Z.someOf.some(y1);if(Z.allOf)return Z.allOf.some(y1);if(Z.not)return Z.not.some(y1);if(Z.type==="object"){let X=Z.properties;if("additionalProperties"in Z)return Z.additionalProperties;if("patternProperties"in Z)return!1;for(let Q of Object.keys(X)){let J=X[Q];if(J.type==="object"){if(y1(J))return!0}else if(J.anyOf){for(let Y=0;Y<J.anyOf.length;Y++)if(y1(J.anyOf[Y]))return!0}return J.additionalProperties}return!1}return Z.type==="array"&&Z.items&&!Array.isArray(Z.items)?y1(Z.items):!1},U$=($,Z)=>{if(!Z)return!1;if(P in Z&&Z[P]===$)return!0;if(Z.type==="object"){let X=Z.properties;if(!X)return!1;for(let Q of Object.keys(X)){let J=X[Q];if(J.type==="object"){if(U$($,J))return!0}else if(J.anyOf){for(let Y=0;Y<J.anyOf.length;Y++)if(U$($,J.anyOf[Y]))return!0}if(P in J&&J[P]===$)return!0}return!1}return!!Z.properties&&P in Z.properties&&Z.properties[P]===$},_1=($,Z)=>{if(!Z)return!1;let X=Z?.schema??Z;if(X.elysiaMeta===$)return!0;if(X[P]==="Import"&&Z.References)return Z.References().some((Q)=>_1($,Q));if(X.anyOf)return X.anyOf.some((Q)=>_1($,Q));if(X.someOf)return X.someOf.some((Q)=>_1($,Q));if(X.allOf)return X.allOf.some((Q)=>_1($,Q));if(X.not)return X.not.some((Q)=>_1($,Q));if(X.type==="object"){let Q=X.properties;for(let J of Object.keys(Q)){let Y=Q[J];if(Y.type==="object"){if(_1($,Y))return!0}else if(Y.anyOf){for(let W=0;W<Y.anyOf.length;W++)if(_1($,Y.anyOf[W]))return!0}return X.elysiaMeta===$}return!1}return X.type==="array"&&X.items&&!Array.isArray(X.items)?_1($,X.items):!1},h6=($,Z)=>{if(!Z)return;let X=Z.schema??Z;if(X[P]==="Import"&&Z.References)return Z.References().some((Q)=>h6($,Q));if(X.type==="object"){let Q=X.properties;if(!Q)return!1;for(let J of Object.keys(Q)){let Y=Q[J];if($ in Y)return!0;if(Y.type==="object"){if(h6($,Y))return!0}else if(Y.anyOf){for(let W=0;W<Y.anyOf.length;W++)if(h6($,Y.anyOf[W]))return!0}}return!1}return $ in X},C1=($)=>{if(!$)return!1;if($.oneOf){for(let Z=0;Z<$.oneOf.length;Z++)if(C1($.oneOf[Z]))return!0}if($.anyOf){for(let Z=0;Z<$.anyOf.length;Z++)if(C1($.anyOf[Z]))return!0}if($.oneOf){for(let Z=0;Z<$.oneOf.length;Z++)if(C1($.oneOf[Z]))return!0}if($.allOf){for(let Z=0;Z<$.allOf.length;Z++)if(C1($.allOf[Z]))return!0}if($.not&&C1($.not))return!0;if($.type==="object"&&$.properties){let Z=$.properties;for(let X of Object.keys(Z)){let Q=Z[X];if(C1(Q)||Q.type==="array"&&Q.items&&C1(Q.items))return!0}}return $.type==="array"&&$.items&&C1($.items)?!0:$[P]==="Ref"&&("$ref"in $)},R1=($)=>{if(!$)return!1;if($.$ref&&$.$defs&&$.$ref in $.$defs&&R1($.$defs[$.$ref]))return!0;if($.oneOf){for(let Z=0;Z<$.oneOf.length;Z++)if(R1($.oneOf[Z]))return!0}if($.anyOf){for(let Z=0;Z<$.anyOf.length;Z++)if(R1($.anyOf[Z]))return!0}if($.allOf){for(let Z=0;Z<$.allOf.length;Z++)if(R1($.allOf[Z]))return!0}if($.not&&R1($.not))return!0;if($.type==="object"&&$.properties){let Z=$.properties;for(let X of Object.keys(Z)){let Q=Z[X];if(R1(Q)||Q.type==="array"&&Q.items&&R1(Q.items))return!0}}return $.type==="array"&&$.items&&R1($.items)?!0:(S2 in $)},B4=($,Z,X={})=>{let Q=X;if(Q.root=!0,!Array.isArray(Z))return Z.original=$,W0($,Z,Q);for(let J of Z)J.original=$,$=W0($,J,Q);return $},W0=($,Z,X)=>{if(!$)return $;let Q=X.root;if(Z.onlyFirst&&$.type===Z.onlyFirst)return Z.to($)??$;if(Z.untilObjectFound&&!Q&&$.type==="object")return $;let J=Z.from[P];if($.oneOf){for(let q=0;q<$.oneOf.length;q++)$.oneOf[q]=W0($.oneOf[q],Z,X);return $}if($.anyOf){for(let q=0;q<$.anyOf.length;q++)$.anyOf[q]=W0($.anyOf[q],Z,X);return $}if($.allOf){for(let q=0;q<$.allOf.length;q++)$.allOf[q]=W0($.allOf[q],Z,X);return $}if($.not)return W0($.not,Z,X);let Y=Q&&!!Z.excludeRoot;if($[P]===J){let{anyOf:q,oneOf:M,allOf:z,not:w,properties:G,items:K,...B}=$,H=Z.to(B);if(!H)return $;let A,j=(L)=>{let h=_(L);return h.$id&&delete h.$id,h},_=(L)=>{if(G&&L.type==="object"){let r={};for(let[o,f]of Object.entries(G))r[o]=W0(f,Z,{...X,root:!1});return{...B,...L,properties:r}}if(K&&L.type==="array")return{...B,...L,items:W0(K,Z,{...X,root:!1})};let h={...B,...L};return delete h.required,G&&L.type==="string"&&L.format==="ObjectString"&&L.default==="{}"?(A=x.ObjectString(G,B),h.properties=G):K&&L.type==="string"&&L.format==="ArrayString"&&L.default==="[]"&&(A=x.ArrayString(K,B),h.items=K),h};if(Y){if(G){let L={};for(let[h,r]of Object.entries(G))L[h]=W0(r,Z,{...X,root:!1});return{...B,properties:L}}else if(K?.map)return{...B,items:K.map((L)=>W0(L,Z,{...X,root:!1}))};return B}if(H.anyOf)for(let L=0;L<H.anyOf.length;L++)H.anyOf[L]=j(H.anyOf[L]);else if(H.oneOf)for(let L=0;L<H.oneOf.length;L++)H.oneOf[L]=j(H.oneOf[L]);else if(H.allOf)for(let L=0;L<H.allOf.length;L++)H.allOf[L]=j(H.allOf[L]);else H.not&&(H.not=j(H.not));if(A&&(H[S2]=A[S2]),H.anyOf||H.oneOf||H.allOf||H.not)return H;if(G){let L={};for(let[h,r]of Object.entries(G))L[h]=W0(r,Z,{...X,root:!1});return{...B,...H,properties:L}}else if(K?.map)return{...B,...H,items:K.map((L)=>W0(L,Z,{...X,root:!1}))};return{...B,...H}}let W=$?.properties;if(W&&Q&&Z.rootOnly!==!0)for(let[q,M]of Object.entries(W))switch(M[P]){case J:let{anyOf:z,oneOf:w,allOf:G,not:K,type:B,...H}=M,A=Z.to(H);if(!A)return $;if(A.anyOf)for(let j=0;j<A.anyOf.length;j++)A.anyOf[j]={...H,...A.anyOf[j]};else if(A.oneOf)for(let j=0;j<A.oneOf.length;j++)A.oneOf[j]={...H,...A.oneOf[j]};else if(A.allOf)for(let j=0;j<A.allOf.length;j++)A.allOf[j]={...H,...A.allOf[j]};else A.not&&(A.not={...H,...A.not});W[q]={...H,...W0(H,Z,{...X,root:!1})};break;case"Object":case"Union":W[q]=W0(M,Z,{...X,root:!1});break;default:if(Array.isArray(M.items))for(let j=0;j<M.items.length;j++)M.items[j]=W0(M.items[j],Z,{...X,root:!1});else M.anyOf||M.oneOf||M.allOf||M.not?W[q]=W0(M,Z,{...X,root:!1}):M.type==="array"&&(M.items=W0(M.items,Z,{...X,root:!1}));break}return $.type==="array"&&$.items&&(Array.isArray($.items)?$.items=$.items.map((q)=>W0(q,Z,{...X,root:!1})):$.items=W0($.items,Z,{...X,root:!1})),$},a8=($)=>(Z)=>{if(typeof Z=="object")try{return K2.Clean($,Z)}catch{}return Z},m2=($,{models:Z={},dynamic:X=!1,modules:Q,normalize:J=!1,additionalProperties:Y=!1,forceAdditionalProperties:W=!1,coerce:q=!1,additionalCoerce:M=[],validators:z,sanitize:w}={})=>{if(z=z?.filter((_)=>_),!$){if(!z?.length)return;$=z[0],z=z.slice(1)}let G,K=(_)=>q?B4(_,[{from:x.Number(),to:(L)=>x.Numeric(L),untilObjectFound:!0},{from:x.Boolean(),to:(L)=>x.BooleanString(L),untilObjectFound:!0},...Array.isArray(M)?M:[M]]):B4(_,M),B=(_)=>{if(_&&typeof _!="string"&&"~standard"in _)return _;if(!_)return;let L;if(typeof _!="string")L=_;else if(L=Q&&_ in Q.$defs?Q.Import(_):Z[_],!L)return;if(P in L)if(L[P]==="Import")C1(L.$defs[L.$ref])||(L=L.$defs[L.$ref],(q||M)&&(L=K(L)));else if(C1(L)){let h=E$();L=x.Module({...Q?.$defs,[h]:L}).Import(h)}else(q||M)&&(L=K(L));return L},H=B($),A=z;if("~standard"in H||z?.length&&z.some((_)=>_&&typeof _!="string"&&("~standard"in _))){let _=(f)=>{let I;if(J===!0||J==="exactMirror")try{I=z4(f,{TypeCompiler:S1,sanitize:w?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(f),I=a8(f)}let g=m2(f,{models:Z,modules:Q,dynamic:X,normalize:J,additionalProperties:!0,forceAdditionalProperties:!0,coerce:q,additionalCoerce:M});return g.Decode=I,(T)=>g.Check(T)?{value:g.Decode(T)}:{issues:[...g.Errors(T)]}},L=H["~standard"]?H["~standard"].validate:_(H),h=[];if(z?.length){for(let f of z)if(f&&typeof f!="string"){if(f?.["~standard"]){h.push(f["~standard"]);continue}if(P in f){h.push(_(f));continue}}}async function r(f){let I=L(f);if(I instanceof Promise&&(I=await I),I.issues)return I;let g=[];I&&typeof I=="object"&&g.push(I.value);for(let R=0;R<h.length;R++){if(I=h[R].validate(f),I instanceof Promise&&(I=await I),I.issues)return I;I&&typeof I=="object"&&g.push(I.value)}if(!g.length)return{value:I};if(g.length===1)return{value:g[0]};if(g.length===2)return{value:Z0(g[0],g[1])};let T=Z0(g[0],g[1]);for(let R=2;R<g.length;R++)T=Z0(T,g[R]);return{value:T}}let o={provider:"standard",schema:H,references:"",checkFunc:()=>{},code:"",Check:r,Errors:(f)=>r(f)?.then?.((I)=>I?.issues),Code:()=>"",Decode:r,Encode:(f)=>f,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return o.parse=(f)=>{try{return o.Decode(o.Clean?.(f)??f)}catch{throw[...o.Errors(f)].map(Y0)}},o.safeParse=(f)=>{try{return{success:!0,data:o.Decode(o.Clean?.(f)??f),error:null}}catch{let I=[...j.Errors(f)].map(Y0);return{success:!1,data:null,error:I[0]?.summary,errors:I}}},o}else if(z?.length){let _=!1,L=A,{schema:h,notObjects:r}=CA([H,...L.map(B)]);r&&(H=x.Intersect([...h?[h]:[],...r.map((o)=>{let f=B(o);return f.type==="object"&&"additionalProperties"in f&&(!_&&f.additionalProperties===!1&&(_=!0),delete f.additionalProperties),f})]),H.type==="object"&&_&&(H.additionalProperties=!1))}else H.type==="object"&&(!("additionalProperties"in H)||W)?H.additionalProperties=Y:H=B4(H,{onlyFirst:"object",from:x.Object({}),to({properties:_,...L}){if(_&&!("additionalProperties"in H))return x.Object(_,{...L,additionalProperties:!1})}});if(X)if(P in H){let _={provider:"typebox",schema:H,references:"",checkFunc:()=>{},code:"",Check:(L)=>K2.Check(H,L),Errors:(L)=>K2.Errors(H,L),Code:()=>"",Clean:a8(H),Decode:(L)=>K2.Decode(H,L),Encode:(L)=>K2.Encode(H,L),get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=y1(H)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=h6("default",H)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=iX(H)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=R1(H)},"~hasRef":G,get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=R1(H)}};if(H.config&&(_.config=H.config,_?.schema?.config&&delete _.schema.config),J&&H.additionalProperties===!1)if(J===!0||J==="exactMirror")try{_.Clean=z4(H,{TypeCompiler:S1,sanitize:w?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(H),_.Clean=a8(H)}else _.Clean=a8(H);return _.parse=(L)=>{try{return _.Decode(_.Clean?.(L)??L)}catch{throw[..._.Errors(L)].map(Y0)}},_.safeParse=(L)=>{try{return{success:!0,data:_.Decode(_.Clean?.(L)??L),error:null}}catch{let h=[...j.Errors(L)].map(Y0);return{success:!1,data:null,error:h[0]?.summary,errors:h}}},_}else{let _={provider:"standard",schema:H,references:"",checkFunc:()=>{},code:"",Check:(L)=>H["~standard"].validate(L),Errors(L){let h=H["~standard"].validate(L);if(h instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return h.issues},Code:()=>"",Decode(L){let h=H["~standard"].validate(L);if(h instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return h},Encode:(L)=>L,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return _.parse=(L)=>{try{return _.Decode(_.Clean?.(L)??L)}catch{throw[..._.Errors(L)].map(Y0)}},_.safeParse=(L)=>{try{return{success:!0,data:_.Decode(_.Clean?.(L)??L),error:null}}catch{let h=[...j.Errors(L)].map(Y0);return{success:!1,data:null,error:h[0]?.summary,errors:h}}},_}let j;if(P in H)if(j=S1.Compile(H,Object.values(Z).filter((_)=>(P in _))),j.provider="typebox",H.config&&(j.config=H.config,j?.schema?.config&&delete j.schema.config),J===!0||J==="exactMirror")try{j.Clean=z4(H,{TypeCompiler:S1,sanitize:w?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.dir(H,{depth:null}),j.Clean=a8(H)}else J==="typebox"&&(j.Clean=a8(H));else j={provider:"standard",schema:H,references:"",checkFunc(_){let L=H["~standard"].validate(_);if(L instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return L},code:"",Check:(_)=>H["~standard"].validate(_),Errors(_){let L=H["~standard"].validate(_);if(L instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return L.issues},Code:()=>"",Decode(_){let L=H["~standard"].validate(_);if(L instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return L},Encode:(_)=>_,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return j.parse=(_)=>{try{return j.Decode(j.Clean?.(_)??_)}catch{throw[...j.Errors(_)].map(Y0)}},j.safeParse=(_)=>{try{return{success:!0,data:j.Decode(j.Clean?.(_)??_),error:null}}catch{let L=[...j.Errors(_)].map(Y0);return{success:!1,data:null,error:L[0]?.summary,errors:L}}},P in H&&Object.assign(j,{get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=y1(j)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=h6("default",j)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=iX(j)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=R1(H)},get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=C1(H)},"~hasRef":G}),j},yW=($)=>$[P]==="Union"||!$.schema&&!!$.anyOf,CA=($)=>{if($.length===0)return{schema:void 0,notObjects:[]};if($.length===1)return $[0].type==="object"?{schema:$[0],notObjects:[]}:{schema:void 0,notObjects:$};let Z,X=[],Q=!1,J=!1;for(let Y of $){if(Y.type!=="object"){X.push(Y);continue}if("additionalProperties"in Y&&(Y.additionalProperties===!0?Q=!0:Y.additionalProperties===!1&&(J=!0)),!Z){Z=Y;continue}Z={...Z,...Y,properties:{...Z.properties,...Y.properties},required:[...Z?.required??[],...Y.required]}}return Z&&(Z.required&&(Z.required=[...new Set(Z.required)]),J?Z.additionalProperties=!1:Q&&(Z.additionalProperties=!0)),{schema:Z,notObjects:X}},G4=($,{models:Z={},modules:X,dynamic:Q=!1,normalize:J=!1,additionalProperties:Y=!1,validators:W=[],sanitize:q})=>{if(W=W.filter((w)=>w),!$){if(!W?.length)return;$=W[0],W=W.slice(1)}let M;if(typeof $!="string")M=$;else if(M=X&&$ in X.$defs?X.Import($):Z[$],!M)return;if(!M)return;if(P in M||"~standard"in M)return{200:m2(M,{modules:X,models:Z,additionalProperties:Y,dynamic:Q,normalize:J,coerce:!1,additionalCoerce:[],validators:W.map((w)=>w[200]),sanitize:q})};let z={};return Object.keys(M).forEach((w)=>{if(isNaN(+w))return;let G=M[+w];if(typeof G=="string"){if(G in Z){let K=Z[G];if(!K)return;z[+w]=P in K||"~standard"in K?m2(K,{modules:X,models:Z,additionalProperties:Y,dynamic:Q,normalize:J,coerce:!1,additionalCoerce:[],validators:W.map((B)=>B[+w]),sanitize:q}):K}return}z[+w]=P in G||"~standard"in G?m2(G,{modules:X,models:Z,additionalProperties:Y,dynamic:Q,normalize:J,coerce:!1,additionalCoerce:[],validators:W.map((K)=>K[+w]),sanitize:q}):G}),z},mX,e8=()=>(mX||(mX=[{from:x.Object({}),to:()=>x.ObjectString({}),excludeRoot:!0},{from:x.Array(x.Any()),to:()=>x.ArrayString(x.Any())}]),mX),uX,nX=()=>(uX||(uX=[{from:x.Object({}),to:()=>x.ObjectString({}),excludeRoot:!0},{from:x.Array(x.Any()),to:()=>x.ArrayQuery(x.Any())}]),uX),pX,c6=()=>(pX||(pX=[{from:x.Number(),to:($)=>x.Numeric($),rootOnly:!0},{from:x.Boolean(),to:($)=>x.BooleanString($),rootOnly:!0}]),pX),vW=({validator:$,modules:Z,defaultConfig:X={},config:Q,dynamic:J,normalize:Y=!1,models:W,validators:q,sanitize:M})=>{let z=$?.provider?$:m2($,{modules:Z,dynamic:J,models:W,normalize:Y,additionalProperties:!0,coerce:!0,additionalCoerce:e8(),validators:q,sanitize:M});return z?z.config=V6(z.config,Q):(z=m2(x.Cookie(x.Any()),{modules:Z,dynamic:J,models:W,additionalProperties:!0,validators:q,sanitize:M}),z.config=X),z},q8=($)=>$&&$[P]==="Import"&&$.$defs[$.$ref][P]==="Object"?$.$defs[$.$ref]:$;var u2=($,Z)=>Z?$:"",RA=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],p6=({context:$="c",trace:Z=[],addFn:X})=>{if(!Z.length)return()=>({resolveChild(){return()=>{}},resolve(){}});for(let Q=0;Q<Z.length;Q++)X(`let report${Q},reportChild${Q},reportErr${Q},reportErrChild${Q};let trace${Q}=${$}[ELYSIA_TRACE]?.[${Q}]??trace[${Q}](${$});
`);return(Q,{name:J,total:Y=0}={})=>{J||(J="anonymous");let W=Q==="error"?"reportErr":"report";for(let q=0;q<Z.length;q++)X(`${W}${q} = trace${q}.${Q}({id,event:'${Q}',name:'${J}',begin:performance.now(),total:${Y}})
`);return{resolve(){for(let q=0;q<Z.length;q++)X(`${W}${q}.resolve()
`)},resolveChild(q){for(let M=0;M<Z.length;M++)X(`${W}Child${M}=${W}${M}.resolveChild?.shift()?.({id,event:'${Q}',name:'${q}',begin:performance.now()})
`);return(M)=>{for(let z=0;z<Z.length;z++)X(M?`if(${M} instanceof Error){${W}Child${z}?.(${M}) }else{${W}Child${z}?.()}`:`${W}Child${z}?.()
`)}}}}},m6=({schema:$,name:Z,type:X,typeAlias:Q=X,normalize:J,ignoreTryCatch:Y=!1})=>!J||!$.Clean?"":J===!0||J==="exactMirror"?Y?`${Z}=validator.${Q}.Clean(${Z})
`:`try{${Z}=validator.${Q}.Clean(${Z})
}catch{}`:J==="typebox"?`${Z}=validator.${Q}.Clean(${Z})
`:"",VA=({injectResponse:$="",normalize:Z=!1,validator:X,encodeSchema:Q=!1,isStaticResponse:J=!1,hasSanitize:Y=!1})=>({validate:(W,q=`c.${W}`,M)=>`c.set.status=422;throw new ValidationError('${W}',validator.${W},${q}${M?","+M:""})`,response:(W="r")=>{if(J||!X.response)return"";let q=$+`
`;q+=`if(${W} instanceof ElysiaCustomStatusResponse){c.set.status=${W}.code
${W}=${W}.response}if(${W} instanceof Response === false)switch(c.set.status){`;for(let[M,z]of Object.entries(X.response)){if(q+=`
case ${M}:
`,z.provider==="standard"){q+=`let vare${M}=validator.response[${M}].Check(${W})
if(vare${M} instanceof Promise)vare${M}=await vare${M}
if(vare${M}.issues)throw new ValidationError('response',validator.response[${M}],${W},vare${M}.issues)
${W}=vare${M}.value
c.set.status=${M}
break
`;continue}let w=z.schema?.noValidate===!0;if(!w&&z.schema?.$ref&&z.schema?.$defs){let H=z.schema.$ref,A=typeof H=="string"&&H.includes("/")?H.split("/").pop():H;z.schema.$defs[A]?.noValidate===!0&&(w=!0)}let G=w||Y,K=({ignoreTryCatch:H=!1}={})=>m6({name:W,schema:z,type:"response",typeAlias:`response[${M}]`,normalize:Z,ignoreTryCatch:H});G&&(q+=K());let B=!G&&Z&&!w;Q&&z.hasTransform&&!w?(q+=`try{${W}=validator.response[${M}].Encode(${W})
`,G||(q+=K({ignoreTryCatch:!0})),q+=`c.set.status=${M}}catch{`+(B?`try{
`+K({ignoreTryCatch:!0})+`${W}=validator.response[${M}].Encode(${W})
}catch{throw new ValidationError('response',validator.response[${M}],${W})}`:`throw new ValidationError('response',validator.response[${M}],${W})`)+"}"):(G||(q+=K()),w||(q+=`if(validator.response[${M}].Check(${W})===false)throw new ValidationError('response',validator.response[${M}],${W})
c.set.status=${M}
`)),q+=`break
`}return q+"}"}}),g$=($)=>($?.fn??$).constructor.name==="AsyncFunction",EA=/=>\s?response\.clone\(/,bA=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,I2=($)=>{let Z=typeof $=="object";if(Z&&$.isAsync!==void 0)return $.isAsync;let X=Z?$.fn:$;if(X.constructor.name==="AsyncFunction")return!0;let Q=X.toString();if(EA.test(Q))return Z&&($.isAsync=!1),!1;let J=bA.test(Q);return Z&&($.isAsync=J),J},u6=($)=>{let Z=typeof $=="object";if(Z&&$.hasReturn!==void 0)return $.hasReturn;let X=Z?$.fn.toString():typeof $=="string"?$.toString():$,Q=X.indexOf(")");if(X.charCodeAt(Q+2)===61&&X.charCodeAt(Q+5)!==123)return Z&&($.hasReturn=!0),!0;let J=X.includes("return");return Z&&($.hasReturn=J),J},U4=($)=>{let Z=$?.fn??$;return Z.constructor.name==="AsyncGeneratorFunction"||Z.constructor.name==="GeneratorFunction"},$6=($,Z,X=`c.${Z}`)=>`try{${$}}catch(error){if(error.constructor.name === 'TransformDecodeError'){c.set.status=422
throw error.error ?? new ValidationError('${Z}',validator.${Z},${X})}}`,cW=({app:$,path:Z,method:X,hooks:Q,validator:J,handler:Y,allowMeta:W=!1,inference:q})=>{let M=$["~adapter"].composeHandler,z=$["~adapter"].handler,w=typeof Y=="function";if(!w){Y=z.mapResponse(Y,{headers:$.setHeaders??{}});let y=Y instanceof Response||Y?.constructor?.name==="Response"&&typeof Y?.clone=="function";if(Q.parse?.length&&Q.transform?.length&&Q.beforeHandle?.length&&Q.afterHandle?.length)return y?Function("a",`"use strict";
return function(){return a.clone()}`)(Y):Function("a",`"use strict";
return function(){return a}`)(Y);if(y){let U=Y;Y=()=>U.clone()}}let G=w?"handler(c)":"handler",K=!!Q.trace?.length,B="";if(q=J8(Object.assign({handler:Y},Q),q,$.config.sucrose),M.declare){let y=M.declare(q);y&&(B+=y)}q.server&&(B+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`),J.createBody?.(),J.createQuery?.(),J.createHeaders?.(),J.createParams?.(),J.createCookie?.(),J.createResponse?.();let H=!!J.body||!!J.headers||!!J.params||!!J.query||!!J.cookie||!!J.response,A=q.query||!!J.query,j=Q.parse?.length===1&&Q.parse[0].fn==="none",_=X!==""&&X!=="GET"&&X!=="HEAD"&&(q.body||!!J.body||!!Q.parse?.length)&&!j,L=$.setHeaders,h=L&&!!Object.keys(L).length,r=q.headers||!!J.headers||M.preferWebstandardHeaders!==!0&&q.body,o=q.cookie||!!J.cookie,f=J.cookie?.config?V6(J?.cookie?.config,$.config.cookie):$.config.cookie,I="",g=()=>{if(I)return I;if(f?.sign){if(!f.secrets)throw Error(`t.Cookie required secret which is not set in (${X}) ${Z}.`);let y=f.secrets?typeof f.secrets=="string"?f.secrets:f.secrets[0]:void 0;if(I+=`const _setCookie = c.set.cookie
if(_setCookie){`,f.sign===!0)I+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,'${y}')}`;else for(let U of f.sign)I+=`if(_setCookie['${U}']?.value)c.set.cookie['${U}'].value=await signCookie(_setCookie['${U}'].value,'${y}')
`;I+=`}
`}return I},T=$.config.normalize,R=$.config.encodeSchema,E=VA({normalize:T,validator:J,encodeSchema:R,isStaticResponse:Y instanceof Response,hasSanitize:!!$.config.sanitize});r&&(B+=M.headers),K&&(B+=`const id=c[ELYSIA_REQUEST_ID]
`);let v=p6({trace:Q.trace,addFn:(y)=>{B+=y}});if(B+="try{",o){let y=(D,N)=>{let b=f?.[D]??N;return b?typeof b=="string"?`${D}:'${b}',`:b instanceof Date?`${D}: new Date(${b.getTime()}),`:`${D}:${b},`:typeof N=="string"?`${D}:"${N}",`:`${D}:${N},`},U=f?`{secrets:${f.secrets!==void 0?typeof f.secrets=="string"?`'${f.secrets}'`:"["+f.secrets.reduce((D,N)=>D+`'${N}',`,"")+"]":"undefined"},sign:${f.sign===!0?!0:f.sign!==void 0?"["+f.sign.reduce((D,N)=>D+`'${N}',`,"")+"]":"undefined"},`+y("domain")+y("expires")+y("httpOnly")+y("maxAge")+y("path","/")+y("priority")+y("sameSite")+y("secure")+"}":"undefined";r?B+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${U})
`:B+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${U})
`}if(A){let y={},U={},D=!1,N=!1;if(J.query?.schema){let b=q8(J.query?.schema);if(P in b&&b.properties)for(let[V,k]of Object.entries(b.properties))_1("ArrayQuery",k)&&(y[V]=1,D=!0),_1("ObjectString",k)&&(U[V]=1,N=!0)}B+=`if(c.qi===-1){c.query=Object.create(null)}else{c.query=parseQueryFromURL(c.url,c.qi+1,${D?JSON.stringify(y):void 0},${N?JSON.stringify(U):void 0})}`}let m=typeof Y=="function"&&I2(Y),J2=K||Q.afterResponse?.length?"c.response=c.responseValue= ":"",d2=Object.keys(J.response??{}),H2=d2.length>1,O4=d2.length===0||d2.length===1&&d2[0]==="200",Q6=o||_||m||!!Q.parse?.length||!!Q.afterHandle?.some(I2)||!!Q.beforeHandle?.some(I2)||!!Q.transform?.some(I2)||!!Q.mapResponse?.some(I2)||J.body?.provider==="standard"||J.headers?.provider==="standard"||J.query?.provider==="standard"||J.params?.provider==="standard"||J.cookie?.provider==="standard"||Object.values(J.response??{}).find((y)=>y.provider==="standard"),i6=(typeof Y=="function"?U4(Y):!1)||!!Q.beforeHandle?.some(U4)||!!Q.afterHandle?.some(U4)||!!Q.transform?.some(U4),v1=q.cookie||q.set||r||K||H2||!O4||w&&h||i6,l2,A0=()=>{if(l2!==void 0)return l2;if(!Q.afterResponse?.length&&!K)return"";let y="",U=Q.afterResponse?.some(I2)?"async ":"";y+=`
setImmediate(${U}()=>{`;let D=p6({trace:Q.trace,addFn:(N)=>{y+=N}})("afterResponse",{total:Q.afterResponse?.length});if(Q.afterResponse?.length&&Q.afterResponse)for(let N=0;N<Q.afterResponse.length;N++){let b=D.resolveChild(Q.afterResponse[N].fn.name),V=I2(Q.afterResponse[N])?"await ":"";y+=`
${V}e.afterResponse[${N}](c)
`,b()}return D.resolve(),y+=`})
`,l2=y},V0=(y="r")=>{let U=A0(),D=`${v1?"mapResponse":"mapCompactResponse"}(${J2}${y}${v1?",c.set":""}${l0})
`;return U?`const _res=${D}`+U+"return _res":`return ${D}`},l0=i6||M.mapResponseContext?`,${M.mapResponseContext}`:"";(K||q.route)&&(B+=`c.route=\`${Z}\`
`);let n6=v("parse",{total:Q.parse?.length});if(_){let y=!!Q.parse?.length||q.body||J.body;M.parser.declare&&(B+=M.parser.declare),B+=`
try{`;let U=typeof Q.parse=="string"?Q.parse:Array.isArray(Q.parse)&&Q.parse.length===1?typeof Q.parse[0]=="string"?Q.parse[0]:typeof Q.parse[0].fn=="string"?Q.parse[0].fn:void 0:void 0;if(!U&&J.body&&!Q.parse?.length){let D=J.body.schema;D&&D.anyOf&&D[P]==="Union"&&D.anyOf?.length===2&&D.anyOf?.find((N)=>N[P]==="ElysiaForm")&&(U="formdata")}if(U&&RA.includes(U)){let D=v("parse",{total:Q.parse?.length}),N=!!J.body?.isOptional;switch(U){case"json":case"application/json":B+=M.parser.json(N);break;case"text":case"text/plain":B+=M.parser.text(N);break;case"urlencoded":case"application/x-www-form-urlencoded":B+=M.parser.urlencoded(N);break;case"arrayBuffer":case"application/octet-stream":B+=M.parser.arrayBuffer(N);break;case"formdata":case"multipart/form-data":B+=M.parser.formData(N);break;default:U[0]in $["~parser"]&&(B+=r?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",B+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${U}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`);break}D.resolve()}else if(y){B+=`
`,B+=`let contentType
if(c.request.body)`,B+=r?`contentType=c.headers['content-type']
`:`contentType=c.request.headers.get('content-type')
`;let D=!1;if(Q.parse?.length)B+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{D=!0;let b=!!J.body?.isOptional;B+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+M.parser.json(b)+`break
case 120:`+M.parser.urlencoded(b)+`break
case 111:`+M.parser.arrayBuffer(b)+`break
case 114:`+M.parser.formData(b)+`break
default:if(contentType.charCodeAt(0)===116){`+M.parser.text(b)+`}break
}`}let N=v("parse",{total:Q.parse?.length});if(Q.parse)for(let b=0;b<Q.parse.length;b++){let V=`bo${b}`;if(b!==0&&(B+=`
if(!used){`),typeof Q.parse[b].fn=="string"){let k=N.resolveChild(Q.parse[b].fn),l=!!J.body?.isOptional;switch(Q.parse[b].fn){case"json":case"application/json":D=!0,B+=M.parser.json(l);break;case"text":case"text/plain":D=!0,B+=M.parser.text(l);break;case"urlencoded":case"application/x-www-form-urlencoded":D=!0,B+=M.parser.urlencoded(l);break;case"arrayBuffer":case"application/octet-stream":D=!0,B+=M.parser.arrayBuffer(l);break;case"formdata":case"multipart/form-data":D=!0,B+=M.parser.formData(l);break;default:B+=`let ${V}=parser['${Q.parse[b].fn}'](c,contentType)
if(${V} instanceof Promise)${V}=await ${V}
if(${V}!==undefined){c.body=${V};used=true;}
`}k()}else{let k=N.resolveChild(Q.parse[b].fn.name);B+=`let ${V}=e.parse[${b}]
${V}=${V}(c,contentType)
if(${V} instanceof Promise)${V}=await ${V}
if(${V}!==undefined){c.body=${V};used=true}`,k()}if(b!==0&&(B+="}"),D)break}if(N.resolve(),!D){let b=!!J.body?.isOptional;Q.parse?.length&&(B+=`
if(!used){
`),B+=`switch(contentType){case 'application/json':
`+M.parser.json(b)+`break
case 'text/plain':`+M.parser.text(b)+`break
case 'application/x-www-form-urlencoded':`+M.parser.urlencoded(b)+`break
case 'application/octet-stream':`+M.parser.arrayBuffer(b)+`break
case 'multipart/form-data':`+M.parser.formData(b)+`break
`;for(let V of Object.keys($["~parser"]))B+=`case '${V}':let bo${V}=parser['${V}'](c,contentType)
if(bo${V} instanceof Promise)bo${V}=await bo${V}
if(bo${V} instanceof ElysiaCustomStatusResponse){`+V0(`bo${V}`)+`}if(bo${V}!==undefined)c.body=bo${V}
break
`;Q.parse?.length&&(B+="}"),B+="}"}Q.parse?.length&&(B+=`
delete c.contentType`)}B+="}catch(error){throw new ParseError(error)}"}if(n6.resolve(),Q?.transform||K){let y=v("transform",{total:Q.transform?.length});if(Q.transform?.length){B+=`let transformed
`;for(let U=0;U<Q.transform.length;U++){let D=Q.transform[U],N=y.resolveChild(D.fn.name);B+=I2(D)?`transformed=await e.transform[${U}](c)
`:`transformed=e.transform[${U}](c)
`,D.subType==="mapDerive"?B+="if(transformed instanceof ElysiaCustomStatusResponse){"+V0("transformed")+`}else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`:B+="if(transformed instanceof ElysiaCustomStatusResponse){"+V0("transformed")+`}else Object.assign(c,transformed)
`,N()}}y.resolve()}let J1=[];if(J){if(J.headers){if(J.headers.hasDefault)for(let[y,U]of Object.entries(K2.Default(J.headers.schema,{}))){let D=typeof U=="object"?JSON.stringify(U):typeof U=="string"?`'${U}'`:U;D!==void 0&&(B+=`c.headers['${y}']??=${D}
`)}B+=m6({name:"c.headers",schema:J.headers,type:"headers",normalize:T}),J.headers.isOptional&&(B+="if(isNotEmpty(c.headers)){"),J.headers?.provider==="standard"?B+=`let vah=validator.headers.Check(c.headers)
if(vah instanceof Promise)vah=await vah
if(vah.issues){`+E.validate("headers",void 0,"vah.issues")+`}else{c.headers=vah.value}
`:J.headers?.schema?.noValidate!==!0&&(B+="if(validator.headers.Check(c.headers) === false){"+E.validate("headers")+"}"),J.headers.hasTransform&&(B+=$6(`c.headers=validator.headers.Decode(c.headers)
`,"headers")),J.headers.isOptional&&(B+="}")}if(J.params){if(J.params.hasDefault)for(let[y,U]of Object.entries(K2.Default(J.params.schema,{}))){let D=typeof U=="object"?JSON.stringify(U):typeof U=="string"?`'${U}'`:U;D!==void 0&&(B+=`c.params['${y}']??=${D}
`)}J.params.provider==="standard"?B+=`let vap=validator.params.Check(c.params)
if(vap instanceof Promise)vap=await vap
if(vap.issues){`+E.validate("params",void 0,"vap.issues")+`}else{c.params=vap.value}
`:J.params?.schema?.noValidate!==!0&&(B+="if(validator.params.Check(c.params)===false){"+E.validate("params")+"}"),J.params.hasTransform&&(B+=$6(`c.params=validator.params.Decode(c.params)
`,"params"))}if(J.query){if(P in J.query?.schema&&J.query.hasDefault)for(let[y,U]of Object.entries(K2.Default(J.query.schema,{}))){let D=typeof U=="object"?JSON.stringify(U):typeof U=="string"?`'${U}'`:U;D!==void 0&&(B+=`if(c.query['${y}']===undefined)c.query['${y}']=${D}
`)}B+=m6({name:"c.query",schema:J.query,type:"query",normalize:T}),J.query.isOptional&&(B+="if(isNotEmpty(c.query)){"),J.query.provider==="standard"?B+=`let vaq=validator.query.Check(c.query)
if(vaq instanceof Promise)vaq=await vaq
if(vaq.issues){`+E.validate("query",void 0,"vaq.issues")+`}else{c.query=vaq.value}
`:J.query?.schema?.noValidate!==!0&&(B+="if(validator.query.Check(c.query)===false){"+E.validate("query")+"}"),J.query.hasTransform&&(B+=$6(`c.query=validator.query.Decode(c.query)
`,"query"),B+=$6(`c.query=validator.query.Decode(c.query)
`,"query")),J.query.isOptional&&(B+="}")}if(_&&J.body){(J.body.hasTransform||J.body.isOptional)&&(B+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&(isNotEmpty(c.body)||c.body instanceof ArrayBuffer))
`);let y=yW(J.body.schema),U=!1;if(J.body.hasDefault){let D=K2.Default(J.body.schema,J.body.schema.type==="object"||q8(J.body.schema)[P]==="Object"?{}:void 0),N=q8(J.body.schema);if(!y&&D&&typeof D=="object"&&(U$("File",N)||U$("Files",N))){U=!0;for(let[V,k]of Object.entries(D))(k==="File"||k==="Files")&&delete D[V];N2(D)||(D=void 0)}let b=typeof D=="object"?JSON.stringify(D):typeof D=="string"?`'${D}'`:D;D!=null&&(Array.isArray(D)?B+=`if(!c.body)c.body=${b}
`:typeof D=="object"?B+=`c.body=Object.assign(${b},c.body)
`:B+=`c.body=${b}
`),B+=m6({name:"c.body",schema:J.body,type:"body",normalize:T}),J.body.provider==="standard"?B+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+E.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`:J.body?.schema?.noValidate!==!0&&(J.body.isOptional?B+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+E.validate("body")+"}":B+="if(validator.body.Check(c.body)===false){"+E.validate("body")+"}")}else B+=m6({name:"c.body",schema:J.body,type:"body",normalize:T}),J.body.provider==="standard"?B+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+E.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`:J.body?.schema?.noValidate!==!0&&(J.body.isOptional?B+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+E.validate("body")+"}":B+="if(validator.body.Check(c.body)===false){"+E.validate("body")+"}");if(J.body.hasTransform&&(B+=$6(`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`,"body")),y&&J.body.schema.anyOf?.length){let D=Object.values(J.body.schema.anyOf);for(let N=0;N<D.length;N++){let b=D[N];if(U$("File",b)||U$("Files",b)){let V=m2(b,{modules:$.definitions.typebox,dynamic:!$.config.aot,models:$.definitions.type,normalize:$.config.normalize,additionalCoerce:c6(),sanitize:()=>$.config.sanitize});if(V){let k=J1.length===0,l=Object.entries(b.properties),A2=k?`
`:" else ";A2+=`if(fileUnions[${J1.length}].Check(c.body)){`;let p2="",q0=0;for(let D0=0;D0<l.length;D0++){let[f$,w8]=l[D0];!w8.extension||w8[P]!=="File"&&w8[P]!=="Files"||(q0&&(p2+=","),p2+=`fileType(c.body.${f$},${JSON.stringify(w8.extension)},'body.${f$}')`,q0++)}p2&&(q0===1?A2+=`await ${p2}
`:q0>1&&(A2+=`await Promise.all([${p2}])
`),A2+="}",B+=A2,J1.push(V))}}}}else if(U||!y&&(U$("File",q8(J.body.schema))||U$("Files",q8(J.body.schema)))){let D="",N=0;for(let[b,V]of Object.entries(q8(J.body.schema).properties))!V.extension||V[P]!=="File"&&V[P]!=="Files"||(N&&(D+=","),D+=`fileType(c.body.${b},${JSON.stringify(V.extension)},'body.${b}')`,N++);N&&(B+=`
`),N===1?B+=`await ${D}
`:N>1&&(B+=`await Promise.all([${D}])
`)}}J.cookie&&(J.cookie.config=V6(J.cookie.config,J.cookie?.config??{}),B+=`let cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,J.cookie.isOptional&&(B+="if(isNotEmpty(c.cookie)){"),J.cookie.provider==="standard"?(B+=`let vac=validator.cookie.Check(cookieValue)
if(vac instanceof Promise)vac=await vac
if(vac.issues){`+E.validate("cookie",void 0,"vac.issues")+`}else{cookieValue=vac.value}
`,B+=`for(const k of Object.keys(cookieValue))c.cookie[k].value=cookieValue[k]
`):J.body?.schema?.noValidate!==!0&&(B+="if(validator.cookie.Check(cookieValue)===false){"+E.validate("cookie","cookieValue")+"}",J.cookie.hasTransform&&(B+=$6("for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue))){c.cookie[key].value=value}","cookie"))),J.cookie.isOptional&&(B+="}"))}if(Q?.beforeHandle||K){let y=v("beforeHandle",{total:Q.beforeHandle?.length}),U=!1;if(Q.beforeHandle?.length)for(let D=0;D<Q.beforeHandle.length;D++){let N=Q.beforeHandle[D],b=y.resolveChild(N.fn.name),V=u6(N);if(N.subType==="resolve"||N.subType==="mapResolve")U||(U=!0,B+=`
let resolved
`),B+=I2(N)?`resolved=await e.beforeHandle[${D}](c);
`:`resolved=e.beforeHandle[${D}](c);
`,N.subType==="mapResolve"?B+="if(resolved instanceof ElysiaCustomStatusResponse){"+V0("resolved")+`}else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`:B+="if(resolved instanceof ElysiaCustomStatusResponse){"+V0("resolved")+`}else Object.assign(c, resolved)
`,b();else if(!V)B+=I2(N)?`await e.beforeHandle[${D}](c)
`:`e.beforeHandle[${D}](c)
`,b();else{if(B+=I2(N)?`be=await e.beforeHandle[${D}](c)
`:`be=e.beforeHandle[${D}](c)
`,b("be"),B+="if(be!==undefined){",y.resolve(),Q.afterHandle?.length||K){v("handle",{name:w?Y.name:void 0}).resolve();let l=v("afterHandle",{total:Q.afterHandle?.length});if(Q.afterHandle?.length)for(let A2=0;A2<Q.afterHandle.length;A2++){let p2=Q.afterHandle[A2],q0=u6(p2),D0=l.resolveChild(p2.fn.name);B+=`c.response=c.responseValue=be
`,q0?(B+=I2(p2.fn)?`af=await e.afterHandle[${A2}](c)
`:`af=e.afterHandle[${A2}](c)
`,B+=`if(af!==undefined) c.response=c.responseValue=be=af
`):B+=I2(p2.fn)?`await e.afterHandle[${A2}](c, be)
`:`e.afterHandle[${A2}](c, be)
`,D0("af")}l.resolve()}J.response&&(B+=E.response("be"));let k=v("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){B+=`c.response=c.responseValue=be
`;for(let l=0;l<Q.mapResponse.length;l++){let A2=Q.mapResponse[l],p2=k.resolveChild(A2.fn.name);B+=`if(mr===undefined){mr=${g$(A2)?"await ":""}e.mapResponse[${l}](c)
if(mr!==undefined)be=c.response=c.responseValue=mr}`,p2()}}k.resolve(),B+=A0(),B+=g(),B+=`return mapEarlyResponse(${J2}be,c.set${l0})}
`}}y.resolve()}if(Q.afterHandle?.length||K){let y=v("handle",{name:w?Y.name:void 0});Q.afterHandle?.length?B+=m?`let r=c.response=c.responseValue=await ${G}
`:`let r=c.response=c.responseValue=${G}
`:B+=m?`let r=await ${G}
`:`let r=${G}
`,y.resolve();let U=v("afterHandle",{total:Q.afterHandle?.length});if(Q.afterHandle?.length)for(let N=0;N<Q.afterHandle.length;N++){let b=Q.afterHandle[N],V=u6(b),k=U.resolveChild(b.fn.name);V?(B+=I2(b.fn)?`af=await e.afterHandle[${N}](c)
`:`af=e.afterHandle[${N}](c)
`,k("af"),J.response?(B+="if(af!==undefined){",U.resolve(),B+=E.response("af"),B+="c.response=c.responseValue=af}"):(B+="if(af!==undefined){",U.resolve(),B+="c.response=c.responseValue=af}")):(B+=I2(b.fn)?`await e.afterHandle[${N}](c)
`:`e.afterHandle[${N}](c)
`,k())}U.resolve(),Q.afterHandle?.length&&(B+=`r=c.response
`),J.response&&(B+=E.response()),B+=g();let D=v("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length)for(let N=0;N<Q.mapResponse.length;N++){let b=Q.mapResponse[N],V=D.resolveChild(b.fn.name);B+=`mr=${g$(b)?"await ":""}e.mapResponse[${N}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr
`,V()}D.resolve(),B+=V0()}else{let y=v("handle",{name:w?Y.name:void 0});if(J.response||Q.mapResponse?.length||K){B+=m?`let r=await ${G}
`:`let r=${G}
`,y.resolve(),J.response&&(B+=E.response());let U=v("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){B+=`
c.response=c.responseValue=r
`;for(let D=0;D<Q.mapResponse.length;D++){let N=Q.mapResponse[D],b=U.resolveChild(N.fn.name);B+=`
if(mr===undefined){mr=${g$(N)?"await ":""}e.mapResponse[${D}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}
`,b()}}U.resolve(),B+=g(),Y instanceof Response?(B+=A0(),B+=q.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${J2}${G}.clone(),c.set${l0})
else return ${G}.clone()`:`return ${G}.clone()`,B+=`
`):B+=V0()}else if(o||K){B+=m?`let r=await ${G}
`:`let r=${G}
`,y.resolve();let U=v("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){B+=`c.response=c.responseValue= r
`;for(let D=0;D<Q.mapResponse.length;D++){let N=Q.mapResponse[D],b=U.resolveChild(N.fn.name);B+=`if(mr===undefined){mr=${g$(N)?"await ":""}e.mapResponse[${D}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}`,b()}}U.resolve(),B+=g()+V0()}else{y.resolve();let U=m?`await ${G}`:G;Y instanceof Response?(B+=A0(),B+=q.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${J2}${G}.clone(),c.set${l0})
else return ${G}.clone()
`:`return ${G}.clone()
`):B+=V0(U)}}if(B+=`
}catch(error){`,!Q6&&Q.error?.length&&(B+="return(async()=>{"),B+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,o&&(B+=g()),K&&Q.trace)for(let y=0;y<Q.trace.length;y++)B+=`report${y}?.resolve(error);reportChild${y}?.(error)
`;let M8=v("error",{total:Q.error?.length});if(Q.error?.length){B+=`c.error=error
`,H?B+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`:B+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`,B+=`let er
`,Q.mapResponse?.length&&(B+=`let mep
`);for(let y=0;y<Q.error.length;y++){let U=M8.resolveChild(Q.error[y].fn.name);if(I2(Q.error[y])?B+=`er=await e.error[${y}](c)
`:B+=`er=e.error[${y}](c)
if(er instanceof Promise)er=await er
`,U(),Q.mapResponse?.length){let D=v("mapResponse",{total:Q.mapResponse?.length});for(let N=0;N<Q.mapResponse.length;N++){let b=Q.mapResponse[N],V=D.resolveChild(b.fn.name);B+=`c.response=c.responseValue=er
mep=e.mapResponse[${N}](c)
if(mep instanceof Promise)er=await er
if(mep!==undefined)er=mep
`,V()}D.resolve()}if(B+=`er=mapEarlyResponse(er,set${l0})
`,B+="if(er){",K&&Q.trace){for(let D=0;D<Q.trace.length;D++)B+=`report${D}.resolve()
`;M8.resolve()}B+="return er}"}}M8.resolve(),B+="return handleError(c,error,true)",!Q6&&Q.error?.length&&(B+="})()"),B+="}";let P4=M.inject?Object.keys(M.inject).join(",")+",":"",h1="const {handler,handleError,hooks:e, "+u2("validator,",H)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+u2("parseQuery,",_)+u2("parseQueryFromURL,",A)+"},error:{"+u2("ValidationError,",H)+u2("ParseError",_)+"},fileType,schema,definitions,ERROR_CODE,"+u2("parseCookie,",o)+u2("signCookie,",o)+u2("decodeURIComponent,",A)+"ElysiaCustomStatusResponse,"+u2("ELYSIA_TRACE,",K)+u2("ELYSIA_REQUEST_ID,",K)+u2("parser,",Q.parse?.length)+u2("getServer,",q.server)+u2("fileUnions,",J1.length)+P4+u2("TypeBoxError",H)+`}=hooks
const trace=e.trace
return ${Q6?"async ":""}function handle(c){`;Q.beforeHandle?.length&&(h1+=`let be
`),Q.afterHandle?.length&&(h1+=`let af
`),Q.mapResponse?.length&&(h1+=`let mr
`),W&&(h1+=`c.schema=schema
c.defs=definitions
`),B=h1+B+"}",h1="";try{return Function("hooks",`"use strict";
`+B)({handler:Y,hooks:LX(Q),validator:H?J:void 0,handleError:$.handleError,mapResponse:z.mapResponse,mapCompactResponse:z.mapCompactResponse,mapEarlyResponse:z.mapEarlyResponse,isNotEmpty:N2,utils:{parseQuery:_?k$:void 0,parseQueryFromURL:A?J.query?.provider==="standard"?IW:cX:void 0},error:{ValidationError:H?a:void 0,ParseError:_?vZ:void 0},fileType:sZ,schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:a$,parseCookie:o?Z4:void 0,signCookie:o?y8:void 0,decodeURIComponent:A?hW.default:void 0,ElysiaCustomStatusResponse:n2,ELYSIA_TRACE:K?W8:void 0,ELYSIA_REQUEST_ID:K?W$:void 0,getServer:q.server?()=>$.getServer():void 0,fileUnions:J1.length?J1:void 0,TypeBoxError:H?p:void 0,parser:$["~parser"],...M.inject})}catch(y){let U=LX(Q);console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof Y=="function"?Y.toString():Y,instruction:B,hooks:{...U,transform:U?.transform?.map?.((D)=>D.toString()),resolve:U?.resolve?.map?.((D)=>D.toString()),beforeHandle:U?.beforeHandle?.map?.((D)=>D.toString()),afterHandle:U?.afterHandle?.map?.((D)=>D.toString()),mapResponse:U?.mapResponse?.map?.((D)=>D.toString()),parse:U?.parse?.map?.((D)=>D.toString()),error:U?.error?.map?.((D)=>D.toString()),afterResponse:U?.afterResponse?.map?.((D)=>D.toString()),stop:U?.stop?.map?.((D)=>D.toString())},validator:J,definitions:$.definitions.type,error:y}),console.log("---"),process.exit(1)}},lX=($,Z)=>{let X="",Q=p6({trace:$.event.trace,addFn:Z??((J)=>{X+=J})})("request",{total:$.event.request?.length});if($.event.request?.length){X+="try{";for(let J=0;J<$.event.request.length;J++){let Y=$.event.request[J],W=u6(Y),q=I2(Y),M=Q.resolveChild($.event.request[J].fn.name);W?(X+=`re=mapEarlyResponse(${q?"await ":""}onRequest[${J}](c),c.set)
`,M("re"),X+=`if(re!==undefined)return re
`):(X+=`${q?"await ":""}onRequest[${J}](c)
`,M())}X+="}catch(error){return app.handleError(c,error,false)}"}return Q.resolve(),X},oX=($,Z="map")=>{let X=$.extender.higherOrderFunctions;if(!X.length)return"return "+Z;let Q=$["~adapter"].composeGeneralHandler,J=Z;for(let Y=0;Y<X.length;Y++)J=`hoc[${Y}](${J},${Q.parameters})`;return`return function hocMap(${Q.parameters}){return ${J}(${Q.parameters})}`},N4=($)=>{let Z=$["~adapter"].composeGeneralHandler;$.router.http.build();let X=$["~adapter"].isWebStandard,Q=$.event.trace?.length,J="",Y=$.router,W=Y.http.root.WS?"const route=router.find(r.method==='GET'&&r.headers.get('upgrade')==='websocket'?'WS':r.method,p)":"const route=router.find(r.method,p)";W+=Y.http.root.ALL?`??router.find('ALL',p)
`:`
`,X&&(W+=`if(r.method==='HEAD'){const route=router.find('GET',p)
if(route){c.params=route.params
const _res=route.store.handler?route.store.handler(c):route.store.compile()(c)
if(_res)return getResponseLength(_res).then((length)=>{_res.headers.set('content-length', length)
return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers})
})}}`);let q=`c.error=notFound
`;if($.event.afterResponse?.length&&!$.event.error){q=`
c.error=notFound
`;let H=$.event.afterResponse.some(I2)?"async":"";q+=`
setImmediate(${H}()=>{`;for(let A=0;A<$.event.afterResponse.length;A++){let j=$.event.afterResponse[A].fn;q+=`
${g$(j)?"await ":""}afterResponse[${A}](c)
`}q+=`})
`}$.inference.query&&(q+=`
if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}`);let M=Z.error404(!!$.event.request?.length,!!$.event.error?.length,q);W+=M.code,W+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let z="";for(let[H,A]of Object.entries(Y.static)){z+=`case'${H}':`,$.config.strictPath!==!0&&(z+=`case'${s$(H)}':`);let j=r$(H);H!==j&&(z+=`case'${j}':`),z+="switch(r.method){",(("GET"in A)||("WS"in A))&&(z+="case 'GET':",("WS"in A)&&(z+=`if(r.headers.get('upgrade')==='websocket')return ht[${A.WS}].composed(c)
`,("GET"in A)||("ALL"in A?z+=`return ht[${A.ALL}].composed(c)
`:z+=`break map
`)),("GET"in A)&&(z+=`return ht[${A.GET}].composed(c)
`)),X&&(("GET"in A)||("ALL"in A))&&!("HEAD"in A)&&(z+=`case 'HEAD':const _res=ht[${A.GET??A.ALL}].composed(c)
return getResponseLength(_res).then((length)=>{_res.headers.set('content-length', length)
return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers})
})
`);for(let[_,L]of Object.entries(A))_==="ALL"||_==="GET"||_==="WS"||(z+=`case '${_}':return ht[${L}].composed(c)
`);"ALL"in A?z+=`default:return ht[${A.ALL}].composed(c)
`:z+=`default:break map
`,z+="}"}let w=!!$.event.request?.some(I2),G=Z.inject?Object.keys(Z.inject).join(",")+",":"";J+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,getResponseLength,`+u2("parseQueryFromURL,",$.inference.query)+u2("ELYSIA_TRACE,",Q)+u2("ELYSIA_REQUEST_ID,",Q)+G+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,$.event.request?.length&&(J+=`const onRequest=app.event.request.map(x=>x.fn)
`),$.event.afterResponse?.length&&(J+=`const afterResponse=app.event.afterResponse.map(x=>x.fn)
`),J+=M.declare,$.event.trace?.length&&(J+="const "+$.event.trace.map((H,A)=>`tr${A}=app.event.trace[${A}].fn`).join(",")+`
`),J+=`${w?"async ":""}function map(${Z.parameters}){`,$.event.request?.length&&(J+=`let re
`),J+=Z.createContext($),$.event.trace?.length&&(J+="c[ELYSIA_TRACE]=["+$.event.trace.map((H,A)=>`tr${A}(c)`).join(",")+`]
`),J+=lX($),z&&(J+=`
map: switch(p){
`+z+"}"),J+=W+`}
`+oX($);let K=tX($);$.handleError=K;let B=Function("data",`"use strict";
`+J)({app:$,mapEarlyResponse:$["~adapter"].handler.mapEarlyResponse,NotFoundError:v8,randomId:E$,handleError:K,status:I1,redirect:Y$,getResponseLength:N5,parseQueryFromURL:$.inference.query?cX:void 0,ELYSIA_TRACE:Q?W8:void 0,ELYSIA_REQUEST_ID:Q?W$:void 0,...Z.inject});return j1&&Bun.gc(!1),B},tX=($)=>{let Z=$.event,X="",Q=$["~adapter"].composeError,J=Q.inject?Object.keys(Q.inject).join(",")+",":"",Y=!!$.event.trace?.length;X+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,"+u2("onError,",$.event.error)+u2("afterResponse,",$.event.afterResponse)+u2("trace,",$.event.trace)+u2("onMapResponse,",$.event.mapResponse)+u2("ELYSIA_TRACE,",Y)+u2("ELYSIA_REQUEST_ID,",Y)+J+`}=inject
`,X+=`return ${$.event.error?.find(I2)||$.event.mapResponse?.find(I2)?"async ":""}function(context,error,skipGlobal){`,X+="",Y&&(X+=`const id=context[ELYSIA_REQUEST_ID]
`);let W=p6({context:"context",trace:Z.trace,addFn:(G)=>{X+=G}}),q=()=>{if(!Z.afterResponse?.length&&!Y)return"";let G="",K=Z.afterResponse?.some(I2)?"async":"";G+=`
setImmediate(${K}()=>{`;let B=p6({context:"context",trace:Z.trace,addFn:(H)=>{G+=H}})("afterResponse",{total:Z.afterResponse?.length,name:"context"});if(Z.afterResponse?.length&&Z.afterResponse)for(let H=0;H<Z.afterResponse.length;H++){let A=Z.afterResponse[H].fn,j=B.resolveChild(A.name);G+=`
${g$(A)?"await ":""}afterResponse[${H}](context)
`,j()}return B.resolve(),G+=`})
`,G};X+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,Q.declare&&(X+=Q.declare);let M=Y||Z.afterResponse?.length?"context.response = ":"";if($.event.error)for(let G=0;G<$.event.error.length;G++){let K=$.event.error[G],B=`${I2(K)?"await ":""}onError[${G}](context)
`;if(X+="if(skipGlobal!==true){",u6(K)){X+=`_r=${B}
if(_r!==undefined){if(_r instanceof Response){`+q()+`return mapResponse(_r,set${Q.mapResponseContext})}if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message = error.response}if(set.status===200||!set.status)set.status=error.status
`;let H=W("mapResponse",{total:Z.mapResponse?.length,name:"context"});if(Z.mapResponse?.length)for(let A=0;A<Z.mapResponse.length;A++){let j=Z.mapResponse[A],_=H.resolveChild(j.fn.name);X+=`context.response=context.responseValue=_r_r=${g$(j)?"await ":""}onMapResponse[${A}](context)
`,_()}H.resolve(),X+=q()+`return mapResponse(${M}_r,set${Q.mapResponseContext})}`}else X+=B;X+="}"}X+=`if(error.constructor.name==="ValidationError"||error.constructor.name==="TransformDecodeError"){
if(error.error)error=error.error
set.status=error.status??422
`+q()+Q.validationError+`
}
`,X+="if(error instanceof Error){"+q()+`
if(typeof error.toResponse==='function')return context.response=context.responseValue=error.toResponse()
`+Q.unknownError+`
}`;let z=W("mapResponse",{total:Z.mapResponse?.length,name:"context"});if(X+=`
if(!context.response)context.response=context.responseValue=error.message??error
`,Z.mapResponse?.length){X+=`let mr
`;for(let G=0;G<Z.mapResponse.length;G++){let K=Z.mapResponse[G],B=z.resolveChild(K.fn.name);X+=`if(mr===undefined){mr=${g$(K)?"await ":""}onMapResponse[${G}](context)
if(mr!==undefined)error=context.response=context.responseValue=mr}`,B()}}z.resolve(),X+=q()+`
return mapResponse(${M}error,set${Q.mapResponseContext})}`;let w=(G)=>typeof G=="function"?G:G.fn;return Function("inject",`"use strict";
`+X)({mapResponse:$["~adapter"].handler.mapResponse,ERROR_CODE:a$,ElysiaCustomStatusResponse:n2,onError:$.event.error?.map(w),afterResponse:$.event.afterResponse?.map(w),trace:$.event.trace?.map(w),onMapResponse:$.event.mapResponse?.map(w),ELYSIA_TRACE:Y?W8:void 0,ELYSIA_REQUEST_ID:Y?W$:void 0,...Q.inject})};var N$=($,Z)=>Z?$:"",mW=($,Z,X,Q=!1)=>{let J="",Y=$.setHeaders,W=!!$.event.trace?.length;W&&(J+=`const id=randomId()
`);let q=/[:*]/.test(Z.path),M=`const u=request.url,s=u.indexOf('/',${$.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?', s + 1)
`,z=X.query||!!Z.hooks.query||!!Z.hooks.standaloneValidator?.find((G)=>G.query)||$.event.request?.length;z&&(J+=M);let w=X.path?q?"get path(){"+(z?"":M)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`:`path:'${Z.path}',`:"";J+=N$("const c=",!Q)+"{request,store,"+N$("qi,",z)+N$("params:request.params,",q)+w+N$("url:request.url,",W||X.url||z)+"redirect,status,set:{headers:"+(N2(Y)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",X.server&&(J+=",get server(){return app.getServer()}"),W&&(J+=",[ELYSIA_REQUEST_ID]:id");{let G="";for(let K of Object.keys($.singleton.decorator))G+=`,'${K}':decorator['${K}']`;J+=G}return J+=`}
`,J},H4=($,Z)=>{let X=!!$.event.trace?.length,Q=!!$.extender.higherOrderFunctions.length,J=J8(Z.hooks,$.inference);J=J8({handler:Z.handler},J);let Y="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+N$("randomId=data.randomId,",X)+N$("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",X)+N$("ELYSIA_TRACE=data.ELYSIA_TRACE,",X)+N$("trace=data.trace,",X)+N$("hoc=data.hoc,",Q)+`status=data.status
`;$.event.request?.length&&(Y+=`const onRequest=app.event.request.map(x=>x.fn)
`),Y+=`${$.event.request?.find(I2)?"async":""} function map(request){`;let W=J.query||!!Z.hooks.query||!!Z.hooks.standaloneValidator?.find((q)=>q.query);return X||W||$.event.request?.length?(Y+=mW($,Z,J),Y+=lX($),Y+="return handler(c)}"):Y+=`return handler(${mW($,Z,J,!0)})}`,Y+=oX($),Function("data",Y)({app:$,handler:Z.compile?.()??Z.composed,redirect:Y$,status:I1,hoc:$.extender.higherOrderFunctions.map((q)=>q.fn),store:$.store,decorator:$.decorator,route:Z.path,randomId:X?E$:void 0,ELYSIA_TRACE:X?W8:void 0,ELYSIA_REQUEST_ID:X?W$:void 0,trace:X?$.event.trace?.map((q)=>q?.fn??q):void 0,mapEarlyResponse:N0})};var uW=($,Z,X)=>{if(typeof $=="function"||$ instanceof Blob)return;if(A4($))return()=>$;let Q=H0($,X??{headers:{}});if(!Z.parse?.length&&!Z.transform?.length&&!Z.beforeHandle?.length&&!Z.afterHandle?.length)return Q instanceof Promise?Q.then((J)=>{if(J)return J.headers.has("content-type")||J.headers.append("content-type","text/plain"),J.clone()}):(Q.headers.has("content-type")||Q.headers.append("content-type","text/plain"),()=>Q.clone())};var sX={open($){$.data.open?.($)},message($,Z){$.data.message?.($,Z)},drain($){$.data.drain?.($)},close($,Z,X){$.data.close?.($,Z,X)}};class Z6{constructor($,Z,X=void 0){this.raw=$,this.data=Z,this.body=X,this.validator=$.data?.validator,this.sendText=$.sendText.bind($),this.sendBinary=$.sendBinary.bind($),this.close=$.close.bind($),this.terminate=$.terminate.bind($),this.publishText=$.publishText.bind($),this.publishBinary=$.publishBinary.bind($),this.subscribe=$.subscribe.bind($),this.unsubscribe=$.unsubscribe.bind($),this.isSubscribed=$.isSubscribed.bind($),this.cork=$.cork.bind($),this.remoteAddress=$.remoteAddress,this.binaryType=$.binaryType,this.data=$.data,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send($,Z){return Buffer.isBuffer($)?this.raw.send($,Z):this.validator?.Check($)===!1?this.raw.send(new a("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.send($,Z))}ping($){return Buffer.isBuffer($)?this.raw.ping($):this.validator?.Check($)===!1?this.raw.send(new a("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.ping($))}pong($){return Buffer.isBuffer($)?this.raw.pong($):this.validator?.Check($)===!1?this.raw.send(new a("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.pong($))}publish($,Z,X){return Buffer.isBuffer(Z)?this.raw.publish($,Z,X):this.validator?.Check(Z)===!1?this.raw.send(new a("message",this.validator,Z).message):(typeof Z=="object"&&(Z=JSON.stringify(Z)),this.raw.publish($,Z,X))}get readyState(){return this.raw.readyState}get id(){return this.data.id}}var pW=($)=>{let Z=typeof $=="function"?[$]:$;return async function(X,Q){if(typeof Q=="string"){let J=Q?.charCodeAt(0);if(J===34||J===47||J===91||J===123)try{Q=JSON.parse(Q)}catch{}else fZ(Q)?Q=+Q:Q==="true"?Q=!0:Q==="false"?Q=!1:Q==="null"&&(Q=null)}if(Z)for(let J=0;J<Z.length;J++){let Y=Z[J](X,Q);if(Y instanceof Promise&&(Y=await Y),Y!==void 0)return Y}return Q}},iW=($)=>{let Z=(X,Q)=>{if(Q instanceof Promise)return Q.then((W)=>Z(X,W));if(Buffer.isBuffer(Q))return X.send(Q.toString());if(Q===void 0)return;let J=(W)=>{if($?.Check(W)===!1)return X.send(new a("message",$,W).message);if(typeof W=="object")return X.send(JSON.stringify(W));X.send(W)};if(typeof Q?.next!="function")return void J(Q);let Y=Q.next();if(Y instanceof Promise)return(async()=>{let W=await Y;if($?.Check(W)===!1)return X.send(new a("message",$,W).message);if(J(W.value),!W.done)for await(let q of Q)J(q)})();if(J(Y.value),!Y.done)for(let W of Q)J(W)};return Z};var xA=/:.+?\?(?=\/|$)/,nW=($)=>{let Z=xA.exec($);if(!Z)return[$];let X=[],Q=$.slice(0,Z.index),J=Z[0].slice(0,-1),Y=$.slice(Z.index+Z[0].length);X.push(Q.slice(0,-1)),X.push(Q+J);for(let W of nW(Y))W&&(W.startsWith("/:")||X.push(Q.slice(0,-1)+W),X.push(Q+J+W));return X},A4=($)=>typeof $=="object"&&$!==null&&($.toString()==="[object HTMLBundle]"||typeof $.index=="string"),lW={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},rX=($)=>{if(!$.config.aot||!$.config.systemRouter)return;let Z={},X=(J,Y)=>{let W=encodeURI(J.path);Z[W]?Z[W][J.method]||(Z[W][J.method]=Y):Z[W]={[J.method]:Y}},Q=$.routeTree;for(let J of $.router.history){if(typeof J.handler!="function")continue;let Y=J.method;if(Y==="GET"&&`WS_${J.path}`in Q||Y==="WS"||J.path.charCodeAt(J.path.length-1)===42||!(Y in lW))continue;if(Y==="ALL"){`WS_${J.path}`in Q||(Z[J.path]=J.hooks?.config?.mount?J.hooks.trace||$.event.trace||$.extender.higherOrderFunctions?H4($,J):J.hooks.mount||J.handler:J.handler);continue}let W,q=$.config.precompile?H4($,J):(M)=>W?W(M):(W=H4($,J))(M);for(let M of nW(J.path))X({method:Y,path:M},q)}return Z},X6=($,Z)=>{if(!Z)return $;for(let X of Object.keys(Z))if($[X]!==Z[X]){if(!$[X]){$[X]=Z[X];continue}if($[X]&&Z[X]){if(typeof $[X]=="function"||$[X]instanceof Response){$[X]=Z[X];continue}$[X]={...$[X],...Z[X]}}}return $},oW={...w$,name:"bun",handler:{mapResponse:H0,mapEarlyResponse:N0,mapCompactResponse:d1,createStaticHandler:xW,createNativeStaticHandler:uW},composeHandler:{...w$.composeHandler,headers:R6?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen($){return(Z,X)=>{if(typeof Bun>"u")throw Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if($.compile(),typeof Z=="string"){if(!fZ(Z))throw Error("Port must be a numeric value");Z=parseInt(Z)}let Q=(Y,{withAsync:W=!1}={})=>{let q={},M=[];for(let[z,w]of Object.entries(Y))if(z=encodeURI(z),yZ){if(!w)continue;for(let[G,K]of Object.entries(w))if(!(!K||!(G in lW))){if(K instanceof Promise){W&&(q[z]||(q[z]={}),M.push(K.then((B)=>{B instanceof Response&&(q[z][G]=B),A4(B)&&(q[z][G]=B)})));continue}!(K instanceof Response)&&!A4(K)||(q[z]||(q[z]={}),q[z][G]=K)}}else{if(!w)continue;if(w instanceof Promise){W&&(q[z]||(q[z]={}),M.push(w.then((G)=>{G instanceof Response&&(q[z]=G)})));continue}if(!(w instanceof Response))continue;q[z]=w}return W?Promise.all(M).then(()=>q):q},J=typeof Z=="object"?{development:!M$,reusePort:!0,idleTimeout:30,...$.config.serve||{},...Z||{},routes:X6(X6(Q($.router.response),rX($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...sX||{},...Z.websocket||{}},fetch:$.fetch}:{development:!M$,reusePort:!0,idleTimeout:30,...$.config.serve||{},routes:X6(X6(Q($.router.response),rX($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...sX||{}},port:Z,fetch:$.fetch};if($.server=Bun.serve(J),$.event.start)for(let Y=0;Y<$.event.start.length;Y++)$.event.start[Y].fn($);X&&X($.server),process.on("beforeExit",()=>{if($.server&&($.server.stop?.(),$.server=null,$.event.stop))for(let Y=0;Y<$.event.stop.length;Y++)$.event.stop[Y].fn($)}),$.promisedModules.then(async()=>{$.server?.reload({...J,fetch:$.fetch,routes:X6(X6(await Q($.router.response,{withAsync:!0}),rX($)),$.config.serve?.routes)}),Bun?.gc(!1)})}},async stop($,Z){if($.server){if($.server.stop(Z),$.server=null,$.event.stop?.length)for(let X=0;X<$.event.stop.length;X++)$.event.stop[X].fn($)}else console.log("Elysia isn't running. Call `app.listen` to start the server.",Error().stack)},ws($,Z,X){let{parse:Q,body:J,response:Y,...W}=X,q=m2(J,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize}),M=m2(Y,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize});$.route("WS",Z,async(z)=>{let w=z.server??$.server,{set:G,path:K,qi:B,headers:H,query:A,params:j}=z;if(z.validator=M,X.upgrade)if(typeof X.upgrade=="function"){let I=X.upgrade(z);I instanceof Promise&&await I}else X.upgrade&&Object.assign(G.headers,X.upgrade);if(G.cookie&&N2(G.cookie)){let I=f6(G.cookie);I&&(G.headers["set-cookie"]=I)}G.headers["set-cookie"]&&Array.isArray(G.headers["set-cookie"])&&(G.headers=hX(new Headers(G.headers),G.headers["set-cookie"]));let _=iW(M),L=pW(Q),h;if(typeof X.beforeHandle=="function"){let I=X.beforeHandle(z);I instanceof Promise&&await I}let r=[...X.error?Array.isArray(X.error)?X.error:[X.error]:[],...($.event.error??[]).map((I)=>typeof I=="function"?I:I.fn)].filter((I)=>I),o=r.length>0,f=o?async(I,g)=>{for(let T of r){let R=T(Object.assign(z,{error:g}));if(R instanceof Promise&&(R=await R),await _(I,R),R)break}}:()=>{};if(!w?.upgrade(z.request,{headers:N2(G.headers)?G.headers:void 0,data:{...z,get id(){return h||(h=E$())},validator:M,ping(I,g){X.ping?.(I,g)},pong(I,g){X.pong?.(I,g)},open:async(I)=>{try{await _(I,X.open?.(new Z6(I,z)))}catch(g){f(I,g)}},message:async(I,g)=>{let T=await L(I,g);if(q?.Check(T)===!1){let R=new a("message",q,T);return o?f(I,R):void I.send(R.message)}try{await _(I,X.message?.(new Z6(I,z,T),T))}catch(R){f(I,R)}},drain:async(I)=>{try{await _(I,X.drain?.(new Z6(I,z)))}catch(g){f(I,g)}},close:async(I,g,T)=>{try{await _(I,X.close?.(new Z6(I,z),g,T))}catch(R){f(I,R)}}}}))return G.status=400,"Expected a websocket connection"},{...W,websocket:X})}};var D4=j1?Bun.env:typeof process<"u"&&process?.env?process.env:{};var aX=($,Z)=>{let X=$.schema;if(X&&(X.$defs?.[X.$ref]&&(X=X.$defs[X.$ref]),!!X?.properties))for(let[Q,J]of Object.entries(X.properties))Z[Q]??=J.default},eX=($)=>{let{mapResponse:Z,mapEarlyResponse:X}=$["~adapter"].handler,Q=$.setHeaders;return async(J)=>{let Y=J.url,W=Y.indexOf("/",11),q=Y.indexOf("?",W+1),M=q===-1?Y.substring(W):Y.substring(W,q),z={cookie:{},status:200,headers:Q?{...Q}:{}},w=Object.assign({},$.singleton.decorator,{set:z,store:$.singleton.store,request:J,path:M,qi:q,error:I1,status:I1,redirect:Y$});try{if($.event.request)for(let T=0;T<$.event.request.length;T++){let R=$.event.request[T].fn,E=R(w);if(E instanceof Promise&&(E=await E),E=X(E,z),E)return w.response=E}let G=J.method==="GET"&&J.headers.get("upgrade")?.toLowerCase()==="websocket"?"WS":J.method,K=$.router.dynamic.find(J.method,M)??$.router.dynamic.find(G,M)??$.router.dynamic.find("ALL",M);if(!K)throw w.query=q===-1?{}:k$(Y.substring(q+1)),new v8;let{handle:B,hooks:H,validator:A,content:j,route:_}=K.store,L;if(J.method!=="GET"&&J.method!=="HEAD")if(j)switch(j){case"application/json":L=await J.json();break;case"text/plain":L=await J.text();break;case"application/x-www-form-urlencoded":L=k$(await J.text());break;case"application/octet-stream":L=await J.arrayBuffer();break;case"multipart/form-data":L={};let T=await J.formData();for(let R of T.keys()){if(L[R])continue;let E=T.getAll(R);E.length===1?L[R]=E[0]:L[R]=E}break}else{let T;if(J.body&&(T=J.headers.get("content-type")),T){let R=T.indexOf(";");if(R!==-1&&(T=T.slice(0,R)),w.contentType=T,H.parse)for(let E=0;E<H.parse.length;E++){let v=H.parse[E].fn;if(typeof v=="string")switch(v){case"json":case"application/json":L=await J.json();break;case"text":case"text/plain":L=await J.text();break;case"urlencoded":case"application/x-www-form-urlencoded":L=k$(await J.text());break;case"arrayBuffer":case"application/octet-stream":L=await J.arrayBuffer();break;case"formdata":case"multipart/form-data":L={};let m=await J.formData();for(let d2 of m.keys()){if(L[d2])continue;let H2=m.getAll(d2);H2.length===1?L[d2]=H2[0]:L[d2]=H2}break;default:let J2=$["~parser"][v];if(J2){let d2=J2(w,T);if(d2 instanceof Promise&&(d2=await d2),d2){L=d2;break}}break}else{let m=v(w,T);if(m instanceof Promise&&(m=await m),m){L=m;break}}}if(delete w.contentType,L===void 0)switch(T){case"application/json":L=await J.json();break;case"text/plain":L=await J.text();break;case"application/x-www-form-urlencoded":L=k$(await J.text());break;case"application/octet-stream":L=await J.arrayBuffer();break;case"multipart/form-data":L={};let E=await J.formData();for(let v of E.keys()){if(L[v])continue;let m=E.getAll(v);m.length===1?L[v]=m[0]:L[v]=m}break}}}w.route=_,w.body=L,w.params=K?.params||void 0,w.query=q===-1?{}:k$(Y.substring(q+1)),w.headers={};for(let[T,R]of J.headers.entries())w.headers[T]=R;let h={domain:$.config.cookie?.domain??A?.cookie?.config.domain,expires:$.config.cookie?.expires??A?.cookie?.config.expires,httpOnly:$.config.cookie?.httpOnly??A?.cookie?.config.httpOnly,maxAge:$.config.cookie?.maxAge??A?.cookie?.config.maxAge,path:$.config.cookie?.path??A?.cookie?.config.path,priority:$.config.cookie?.priority??A?.cookie?.config.priority,partitioned:$.config.cookie?.partitioned??A?.cookie?.config.partitioned,sameSite:$.config.cookie?.sameSite??A?.cookie?.config.sameSite,secure:$.config.cookie?.secure??A?.cookie?.config.secure,secrets:$.config.cookie?.secrets??A?.cookie?.config.secrets,sign:$.config.cookie?.sign??A?.cookie?.config.sign},r=J.headers.get("cookie");w.cookie=await Z4(w.set,r,h);let o=A?.createHeaders?.();o&&aX(o,w.headers);let f=A?.createParams?.();f&&aX(f,w.params);let I=A?.createQuery?.();if(I&&aX(I,w.query),H.transform)for(let T=0;T<H.transform.length;T++){let R=H.transform[T],E=R.fn(w);if(E instanceof Promise&&(E=await E),E instanceof n2){let v=X(E,w.set);if(v)return w.response=v}R.subType==="derive"&&Object.assign(w,E)}if(A){if(o){let T=structuredClone(w.headers);for(let[R,E]of J.headers)T[R]=E;if(A.headers.Check(T)===!1)throw new a("header",A.headers,T)}else A.headers?.Decode&&(w.headers=A.headers.Decode(w.headers));if(f?.Check(w.params)===!1)throw new a("params",A.params,w.params);if(A.params?.Decode&&(w.params=A.params.Decode(w.params)),A.query?.schema){let T=A.query.schema;T.$defs?.[T.$ref]&&(T=T.$defs[T.$ref]);let R=T.properties;for(let E of Object.keys(R)){let v=R[E];(v.type==="array"||v.items?.type==="string")&&typeof w.query[E]=="string"&&w.query[E]&&(w.query[E]=w.query[E].split(","))}}if(I?.Check(w.query)===!1)throw new a("query",A.query,w.query);if(A.query?.Decode&&(w.query=A.query.Decode(w.query)),A.createCookie?.()){let T={};for(let[R,E]of Object.entries(w.cookie))T[R]=E.value;if(A.cookie.Check(T)===!1)throw new a("cookie",A.cookie,T);A.cookie?.Decode&&(T=A.cookie.Decode(T))}if(A.createBody?.()?.Check(L)===!1)throw new a("body",A.body,L);A.body?.Decode&&(w.body=A.body.Decode(L))}if(H.beforeHandle)for(let T=0;T<H.beforeHandle.length;T++){let R=H.beforeHandle[T],E=R.fn(w);if(E instanceof Promise&&(E=await E),E instanceof n2){let v=X(E,w.set);if(v)return w.response=v}if(R.subType==="resolve"){Object.assign(w,E);continue}if(E!==void 0){if(w.response=E,H.afterHandle)for(let m=0;m<H.afterHandle.length;m++){let J2=H.afterHandle[m].fn(w);J2 instanceof Promise&&(J2=await J2),J2&&(E=J2)}let v=X(E,w.set);if(v)return w.response=v}}let g=typeof B=="function"?B(w):B;if(g instanceof Promise&&(g=await g),H.afterHandle?.length){w.response=g;for(let T=0;T<H.afterHandle.length;T++){let R=H.afterHandle[T].fn(w);R instanceof Promise&&(R=await R);let E=R instanceof n2,v=E?R.code:z.status?typeof z.status=="string"?J$[z.status]:z.status:200;E&&(z.status=v,R=R.response);let m=A?.createResponse?.()?.[v];if(m?.Check(R)===!1)if(m?.Clean){let d2=m.Clean(R);if(m?.Check(d2)===!1)throw new a("response",m,R);R=d2}else throw new a("response",m,R);m?.Encode&&(w.response=R=m.Encode(R)),m?.Clean&&(w.response=R=m.Clean(R));let J2=X(R,w.set);if(J2!==void 0)return w.response=J2}}else{let T=g instanceof n2,R=T?g.code:z.status?typeof z.status=="string"?J$[z.status]:z.status:200;T&&(z.status=R,g=g.response);let E=A?.createResponse?.()?.[R];if(E?.Check(g)===!1)if(E?.Clean){let v=E.Clean(g);if(E?.Check(v)===!1)throw new a("response",E,g);g=v}else throw new a("response",E,g);E?.Encode&&(g=E.Encode(g)),E?.Clean&&(g=E.Clean(g))}if(w.set.cookie&&h?.sign){let T=h.secrets?typeof h.secrets=="string"?h.secrets:h.secrets[0]:void 0;if(h.sign===!0){if(T)for(let[R,E]of Object.entries(w.set.cookie))w.set.cookie[R].value=await y8(E.value,T)}else{let R=A?.cookie?.schema?.properties;if(T)for(let E of h.sign)E in R&&w.set.cookie[E]?.value&&(w.set.cookie[E].value=await y8(w.set.cookie[E].value,T))}}return Z(w.response=g,w.set)}catch(G){let K=G instanceof RZ&&G.error?G.error:G;return $.handleError(w,K)}finally{$.event.afterResponse&&setImmediate(async()=>{for(let G of $.event.afterResponse)await G.fn(w)})}}},tW=($)=>{let{mapResponse:Z}=$["~adapter"].handler;return async(X,Q)=>{let J=Object.assign(X,{error:Q,code:Q.code});if(J.set=X.set,$.event.error)for(let Y=0;Y<$.event.error.length;Y++){let W=$.event.error[Y].fn(J);if(W instanceof Promise&&(W=await W),W!=null)return X.response=Z(W,X.set)}return new Response(typeof Q.cause=="string"?Q.cause:Q.message,{headers:X.set.headers,status:Q.status??500})}};var sW;sW=Symbol.dispose;var IA=class ${constructor(Z={}){this.server=null,this.dependencies={},this["~Prefix"]="",this["~Singleton"]=null,this["~Definitions"]=null,this["~Metadata"]=null,this["~Ephemeral"]=null,this["~Volatile"]=null,this["~Routes"]=null,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={typebox:x.Module({}),type:{},error:{}},this.extender={macro:{},higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return!this.global&&!this.scoped&&!this.local?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:d8(d8(this.global,this.scoped),this.local)}},this.standaloneValidator={global:null,scoped:null,local:null},this.event={},this.router={"~http":void 0,get http(){return this["~http"]||(this["~http"]=new K4({lazy:!0,onParam:$Q.default})),this["~http"]},"~dynamic":void 0,get dynamic(){return this["~dynamic"]||(this["~dynamic"]=new K4({onParam:$Q.default})),this["~dynamic"]},static:{},response:{},history:[]},this.routeTree={},this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1},this["~parser"]={},this.handle=async(X)=>this.fetch(X),this.fetch=(X)=>(this.fetch=this.config.aot?N4(this):eX(this))(X),this.handleError=async(X,Q)=>(this.handleError=this.config.aot?tX(this):tW(this))(X,Q),this.listen=(X,Q)=>(this["~adapter"].listen(this)(X,Q),this),this.stop=async(X)=>(await this["~adapter"].stop?.(this,X),this),this[sW]=()=>{this.server&&this.stop()},Z.tags&&(Z.detail?Z.detail.tags=Z.tags:Z.detail={tags:Z.tags}),this.config={aot:D4.ELYSIA_AOT!=="false",nativeStaticResponse:!0,systemRouter:!0,encodeSchema:!0,normalize:!0,...Z,prefix:Z.prefix?Z.prefix.charCodeAt(0)===47?Z.prefix:`/${Z.prefix}`:void 0,cookie:{path:"/",...Z?.cookie},experimental:Z?.experimental??{},seed:Z?.seed===void 0?"":Z?.seed},this["~adapter"]=Z.adapter??(typeof Bun<"u"?oW:w$),Z?.analytic&&(Z?.name||Z?.seed!==void 0)&&(this.telemetry={stack:Error().stack})}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}getServer(){return this.server}getParent(){return null}get promisedModules(){return this._promisedModules||(this._promisedModules=new OX(console.error,()=>{})),this._promisedModules}env(Z,X=D4){if(m2(Z,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(X)===!1){let Q=new a("env",Z,X);throw Error(Q.all.map((J)=>J.summary).join(`
`))}return this}wrap(Z){return this.extender.higherOrderFunctions.push({checksum:V$(JSON.stringify({name:this.config.name,seed:this.config.seed,content:Z.toString()})),fn:Z}),this}get models(){let Z={};for(let X of Object.keys(this.definitions.type))Z[X]=m2(this.definitions.typebox.Import(X));return Z.modules=this.definitions.typebox,Z}add(Z,X,Q,J,Y){let W=Y?.skipPrefix??!1,q=Y?.allowMeta??!1;J??={},this.applyMacro(J);let M=[];if(J.standaloneValidator&&(M=M.concat(J.standaloneValidator)),this.standaloneValidator.local&&(M=M.concat(this.standaloneValidator.local)),this.standaloneValidator.scoped&&(M=M.concat(this.standaloneValidator.scoped)),this.standaloneValidator.global&&(M=M.concat(this.standaloneValidator.global)),X!==""&&X.charCodeAt(0)!==47&&(X="/"+X),this.config.prefix&&!W&&(X=this.config.prefix+X),J?.type)switch(J.type){case"text":J.type="text/plain";break;case"json":J.type="application/json";break;case"formdata":J.type="multipart/form-data";break;case"urlencoded":J.type="application/x-www-form-urlencoded";break;case"arrayBuffer":J.type="application/octet-stream";break;default:break}let z=this.validator.getCandidate(),w={body:J?.body??z?.body,headers:J?.headers??z?.headers,params:J?.params??z?.params,query:J?.query??z?.query,cookie:J?.cookie??z?.cookie,response:J?.response??z?.response},G=this.config.precompile===!0||typeof this.config.precompile=="object"&&this.config.precompile.compose===!0,K=()=>{let R=this.definitions.type,E=!this.config.aot,v=this.config.normalize,m=this.definitions.typebox,J2=()=>this.config.sanitize,d2=()=>{if(w.cookie||M.find((H2)=>H2.cookie))return vW({modules:m,validator:w.cookie,defaultConfig:this.config.cookie,normalize:v,config:w.cookie?.config??{},dynamic:E,models:R,validators:M.map((H2)=>H2.cookie),sanitize:J2})};return G?{body:m2(w.body,{modules:m,dynamic:E,models:R,normalize:v,additionalCoerce:c6(),validators:M.map((H2)=>H2.body),sanitize:J2}),headers:m2(w.headers,{modules:m,dynamic:E,models:R,additionalProperties:!0,coerce:!0,additionalCoerce:e8(),validators:M.map((H2)=>H2.headers),sanitize:J2}),params:m2(w.params,{modules:m,dynamic:E,models:R,coerce:!0,additionalCoerce:e8(),validators:M.map((H2)=>H2.params),sanitize:J2}),query:m2(w.query,{modules:m,dynamic:E,models:R,normalize:v,coerce:!0,additionalCoerce:nX(),validators:M.map((H2)=>H2.query),sanitize:J2}),cookie:d2(),response:G4(w.response,{modules:m,dynamic:E,models:R,normalize:v,validators:M.map((H2)=>H2.response),sanitize:J2})}:{createBody(){return this.body?this.body:this.body=m2(w.body,{modules:m,dynamic:E,models:R,normalize:v,additionalCoerce:c6(),validators:M.map((H2)=>H2.body),sanitize:J2})},createHeaders(){return this.headers?this.headers:this.headers=m2(w.headers,{modules:m,dynamic:E,models:R,normalize:v,additionalProperties:!v,coerce:!0,additionalCoerce:e8(),validators:M.map((H2)=>H2.headers),sanitize:J2})},createParams(){return this.params?this.params:this.params=m2(w.params,{modules:m,dynamic:E,models:R,normalize:v,coerce:!0,additionalCoerce:e8(),validators:M.map((H2)=>H2.params),sanitize:J2})},createQuery(){return this.query?this.query:this.query=m2(w.query,{modules:m,dynamic:E,models:R,normalize:v,coerce:!0,additionalCoerce:nX(),validators:M.map((H2)=>H2.query),sanitize:J2})},createCookie(){return this.cookie?this.cookie:this.cookie=d2()},createResponse(){return this.response?this.response:this.response=G4(w.response,{modules:m,dynamic:E,models:R,normalize:v,validators:M.map((H2)=>H2.response),sanitize:J2})}}};(z.body||z.cookie||z.headers||z.params||z.query||z.response)&&(J=Q$(J,z)),J.tags&&(J.detail?J.detail.tags=J.tags:J.detail={tags:J.tags}),N2(this.config.detail)&&(J.detail=Z0(Object.assign({},this.config.detail),J.detail));let B=N2(this.event)?Q$(this.event,PX(J)):{...B5(PX(J))};if(M.length&&Object.assign(B,{standaloneValidator:M}),this.config.aot===!1){let R=K();this.router.dynamic.add(Z,X,{validator:R,hooks:B,content:J?.type,handle:Q,route:X});let E=r$(X,{dynamic:!0});if(X!==E&&this.router.dynamic.add(Z,E,{validator:R,hooks:B,content:J?.type,handle:Q,route:X}),this.config.strictPath===!1){let v=s$(X);this.router.dynamic.add(Z,v,{validator:R,hooks:B,content:J?.type,handle:Q,route:X});let m=r$(v);v!==m&&this.router.dynamic.add(Z,v,{validator:R,hooks:B,content:J?.type,handle:Q,route:X})}this.router.history.push({method:Z,path:X,composed:null,handler:Q,compile:void 0,hooks:B});return}let H=this["~adapter"].handler,A=typeof Q!="function"?()=>{let R={redirect:Y$,request:this["~adapter"].isWebStandard?new Request(`http://e.ly${X}`,{method:Z}):void 0,server:null,set:{headers:Object.assign({},this.setHeaders)},status:I1,store:this.store};try{this.event.request?.map((v)=>{if(typeof v.fn=="function")return v.fn(R);if(typeof v=="function")return v(R)})}catch(v){let m;R.error=v,this.event.error?.some((J2)=>{if(typeof J2.fn=="function")return m=J2.fn(R);if(typeof J2=="function")return m=J2(R)}),m!==void 0&&(Q=m)}let E=H.createNativeStaticHandler?.(Q,B,R.set);return E instanceof Promise?E.then((v)=>{if(v)return v}):E?.()}:void 0,j=this.config.nativeStaticResponse===!0,_=(R)=>{!j||!A||(yZ?this.router.response[R]?this.router.response[R][Z]=A():this.router.response[R]={[Z]:A()}:this.router.response[R]=A())};_(X);let L,h=()=>L||(L=cW({app:this,path:X,method:Z,hooks:B,validator:K(),handler:typeof Q!="function"&&typeof H.createStaticHandler!="function"?()=>Q:Q,allowMeta:q,inference:this.inference})),r;if(`${Z}_${X}`in this.routeTree)for(let R=0;R<this.router.history.length;R++){let E=this.router.history[R];if(E.path===X&&E.method===Z){r=R;break}}else this.routeTree[`${Z}_${X}`]=this.router.history.length;let o=r??this.router.history.length,f=G?h():(R)=>(this.router.history[o].composed=h())(R);r!==void 0?this.router.history[r]=Object.assign({method:Z,path:X,composed:f,compile:h,handler:Q,hooks:B},M.length?{standaloneValidators:M}:void 0,J.webSocket?{websocket:J.websocket}:void 0):this.router.history.push(Object.assign({method:Z,path:X,composed:f,compile:h,handler:Q,hooks:B},J.webSocket?{websocket:J.websocket}:void 0));let I={handler:G?f:void 0,compile(){return this.handler=h()}},g=this.router.static,T=X.indexOf(":")===-1&&X.indexOf("*")===-1;if(Z==="WS"){if(T){X in g?g[X][Z]=o:g[X]={[Z]:o};return}this.router.http.add("WS",X,I),this.config.strictPath||this.router.http.add("WS",s$(X),I);let R=r$(X,{dynamic:!0});X!==R&&this.router.http.add("WS",R,I);return}if(T)X in g?g[X][Z]=o:g[X]={[Z]:o},this.config.strictPath||_(s$(X));else{if(this.router.http.add(Z,X,I),!this.config.strictPath){let E=s$(X);_(E),this.router.http.add(Z,E,I)}let R=r$(X,{dynamic:!0});X!==R&&(this.router.http.add(Z,R,I),_(R))}}headers(Z){return Z?(this.setHeaders||(this.setHeaders={}),this.setHeaders=Z0(this.setHeaders,Z),this):this}onStart(Z){return this.on("start",Z),this}onRequest(Z){return this.on("request",Z),this}onParse(Z,X){return X?this.on(Z,"parse",X):typeof Z=="string"?this.on("parse",this["~parser"][Z]):this.on("parse",Z)}parser(Z,X){return this["~parser"][Z]=X,this}onTransform(Z,X){return X?this.on(Z,"transform",X):this.on("transform",Z)}resolve(Z,X){X||(X=Z,Z={as:"local"});let Q={subType:"resolve",fn:X};return this.onBeforeHandle(Z,Q)}mapResolve(Z,X){X||(X=Z,Z={as:"local"});let Q={subType:"mapResolve",fn:X};return this.onBeforeHandle(Z,Q)}onBeforeHandle(Z,X){return X?this.on(Z,"beforeHandle",X):this.on("beforeHandle",Z)}onAfterHandle(Z,X){return X?this.on(Z,"afterHandle",X):this.on("afterHandle",Z)}mapResponse(Z,X){return X?this.on(Z,"mapResponse",X):this.on("mapResponse",Z)}onAfterResponse(Z,X){return X?this.on(Z,"afterResponse",X):this.on("afterResponse",Z)}trace(Z,X){X||(X=Z,Z={as:"local"}),Array.isArray(X)||(X=[X]);for(let Q of X)this.on(Z,"trace",TW(Q));return this}error(Z,X){switch(typeof Z){case"string":return X.prototype[a$]=Z,this.definitions.error[Z]=X,this;case"function":return this.definitions.error=Z(this.definitions.error),this}for(let[Q,J]of Object.entries(Z))J.prototype[a$]=Q,this.definitions.error[Q]=J;return this}onError(Z,X){return X?this.on(Z,"error",X):this.on("error",Z)}onStop(Z){return this.on("stop",Z),this}on(Z,X,Q){let J;switch(typeof Z){case"string":J=Z,Q=X;break;case"object":J=X,!Array.isArray(X)&&typeof X=="object"&&(Q=X);break}Array.isArray(Q)?Q=$0(Q):typeof Q=="function"?Q=[{fn:Q}]:Q=[Q];let Y=Q;for(let W of Y)W.scope=typeof Z=="string"?"local":Z?.as??"local",(J==="resolve"||J==="derive")&&(W.subType=J);J!=="trace"&&(this.inference=J8({[J]:Y.map((W)=>W.fn)},this.inference,this.config.sucrose));for(let W of Y){let q=G5(W,"global",{skipIfHasType:!0});switch(J){case"start":this.event.start??=[],this.event.start.push(q);break;case"request":this.event.request??=[],this.event.request.push(q);break;case"parse":this.event.parse??=[],this.event.parse.push(q);break;case"transform":this.event.transform??=[],this.event.transform.push(q);break;case"derive":this.event.transform??=[],this.event.transform.push($0(q,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(q);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push($0(q,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(q);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(q);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(q);break;case"trace":this.event.trace??=[],this.event.trace.push(q);break;case"error":this.event.error??=[],this.event.error.push(q);break;case"stop":this.event.stop??=[],this.event.stop.push(q);break}}return this}as(Z){return q$(this.event.parse,Z),q$(this.event.transform,Z),q$(this.event.beforeHandle,Z),q$(this.event.afterHandle,Z),q$(this.event.mapResponse,Z),q$(this.event.afterResponse,Z),q$(this.event.trace,Z),q$(this.event.error,Z),Z==="scoped"?(this.validator.scoped=d8(this.validator.scoped,this.validator.local),this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null)):Z==="global"&&(this.validator.global=d8(this.validator.global,d8(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null),this.standaloneValidator.scoped!==null&&(this.standaloneValidator.global||=[],this.standaloneValidator.global.push(...this.standaloneValidator.scoped),this.standaloneValidator.scoped=null)),this}group(Z,X,Q){let J=new $({...this.config,prefix:""});J.singleton={...this.singleton},J.definitions={...this.definitions},J.getServer=()=>this.getServer(),J.inference=dZ(this.inference),J.extender={...this.extender},J["~parser"]=this["~parser"],J.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let Y=typeof X=="object",W=(Y?Q:X)(J);return this.singleton=Z0(this.singleton,J.singleton),this.definitions=Z0(this.definitions,J.definitions),W.event.request?.length&&(this.event.request=[...this.event.request||[],...W.event.request||[]]),W.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]]),this.model(W.definitions.type),Object.values(J.router.history).forEach(({method:q,path:M,handler:z,hooks:w})=>{if(M=(Y?"":this.config.prefix??"")+Z+M,Y){let{body:G,headers:K,query:B,params:H,cookie:A,response:j,..._}=X,L=w,h=G||K||B||H||A||j;this.add(q,M,z,Q$(_,{...L||{},error:L.error?Array.isArray(L.error)?[...L.error??[],...W.event.error??[]]:[L.error,...W.event.error??[]]:W.event.error,standaloneValidator:h?[...L.standaloneValidator??[],{body:G,headers:K,query:B,params:H,cookie:A,response:j}]:L.standaloneValidator}),void 0)}else this.add(q,M,z,Q$(w,{error:W.event.error}),{skipPrefix:!0})}),this}guard(Z,X){if(!X){if(typeof Z=="object"){this.applyMacro(Z),Z.detail&&(this.config.detail?this.config.detail=Z0(Object.assign({},this.config.detail),Z.detail):this.config.detail=Z.detail),Z.tags&&(this.config.detail?this.config.detail.tags=Z.tags:this.config.detail={tags:Z.tags});let Y=Z.as??"local";if(Z.schema==="standalone"){this.standaloneValidator[Y]||(this.standaloneValidator[Y]=[]);let W=Z?.response?typeof Z.response=="string"||P in Z.response||"~standard"in Z.response?{200:Z.response}:Z?.response:void 0;this.standaloneValidator[Y].push({body:Z.body,headers:Z.headers,params:Z.params,query:Z.query,response:W,cookie:Z.cookie})}else this.validator[Y]={body:Z.body??this.validator[Y]?.body,headers:Z.headers??this.validator[Y]?.headers,params:Z.params??this.validator[Y]?.params,query:Z.query??this.validator[Y]?.query,response:Z.response??this.validator[Y]?.response,cookie:Z.cookie??this.validator[Y]?.cookie};return Z.parse&&this.on({as:Y},"parse",Z.parse),Z.transform&&this.on({as:Y},"transform",Z.transform),Z.derive&&this.on({as:Y},"derive",Z.derive),Z.beforeHandle&&this.on({as:Y},"beforeHandle",Z.beforeHandle),Z.resolve&&this.on({as:Y},"resolve",Z.resolve),Z.afterHandle&&this.on({as:Y},"afterHandle",Z.afterHandle),Z.mapResponse&&this.on({as:Y},"mapResponse",Z.mapResponse),Z.afterResponse&&this.on({as:Y},"afterResponse",Z.afterResponse),Z.error&&this.on({as:Y},"error",Z.error),this}return this.guard({},Z)}let Q=new $({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.inference=dZ(this.inference),Q.extender={...this.extender},Q.getServer=()=>this.getServer();let J=X(Q);return this.singleton=Z0(this.singleton,Q.singleton),this.definitions=Z0(this.definitions,Q.definitions),J.getServer=()=>this.server,J.event.request?.length&&(this.event.request=[...this.event.request||[],...J.event.request||[]]),J.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...J.event.mapResponse||[]]),this.model(J.definitions.type),Object.values(Q.router.history).forEach(({method:Y,path:W,handler:q,hooks:M})=>{let{body:z,headers:w,query:G,params:K,cookie:B,response:H,...A}=Z,j=z||w||G||K||B||H;this.add(Y,W,q,Q$(A,{...M||{},error:M.error?Array.isArray(M.error)?[...M.error??[],...J.event.error??[]]:[M.error,...J.event.error??[]]:J.event.error,standaloneValidator:j?[...M.standaloneValidator??[],{body:z,headers:w,query:G,params:K,cookie:B,response:H}]:M.standaloneValidator}))}),this}use(Z){if(!Z)return this;if(Array.isArray(Z)){let X=this;for(let Q of Z)X=X.use(Q);return X}return Z instanceof Promise?(this.promisedModules.add(Z.then((X)=>{if(typeof X=="function")return X(this);if(X instanceof $)return this._use(X).compile();if(X.constructor?.name==="Elysia")return this._use(X).compile();if(typeof X.default=="function")return X.default(this);if(X.default instanceof $)return this._use(X.default);if(X.constructor?.name==="Elysia")return this._use(X.default);if(X.constructor?.name==="_Elysia")return this._use(X.default);try{return this._use(X.default)}catch(Q){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),Q}}).then((X)=>(X&&typeof X.compile=="function"&&X.compile(),X))),this):this._use(Z)}propagatePromiseModules(Z){if(Z.promisedModules.size<=0)return this;for(let X of Z.promisedModules.promises)this.promisedModules.add(X.then((Q)=>{if(!Q)return;let J=this._use(Q);return J instanceof Promise?J.then((Y)=>{Y?Y.compile():Q.compile()}):Q.compile()}));return this}_use(Z){if(typeof Z=="function"){let J=Z(this);return J instanceof Promise?(this.promisedModules.add(J.then((Y)=>{if(Y instanceof $){Y.getServer=()=>this.getServer(),Y.getGlobalRoutes=()=>this.getGlobalRoutes(),Y.getGlobalDefinitions=()=>this.getGlobalDefinitions(),Y.model(this.definitions.type),Y.error(this.definitions.error);for(let{method:W,path:q,handler:M,hooks:z}of Object.values(Y.router.history))this.add(W,q,M,z,void 0);return Y===this?void 0:(this.propagatePromiseModules(Y),Y)}return typeof Y=="function"?Y(this):typeof Y.default=="function"?Y.default(this):this._use(Y)}).then((Y)=>(Y&&typeof Y.compile=="function"&&Y.compile(),Y))),this):J}this.propagatePromiseModules(Z);let X=Z.config.name,Q=Z.config.seed;if(Z.getParent=()=>this,Z.getServer=()=>this.getServer(),Z.getGlobalRoutes=()=>this.getGlobalRoutes(),Z.getGlobalDefinitions=()=>this.getGlobalDefinitions(),Z.standaloneValidator?.scoped&&(this.standaloneValidator.local?this.standaloneValidator.local=this.standaloneValidator.local.concat(Z.standaloneValidator.scoped):this.standaloneValidator.local=Z.standaloneValidator.scoped),Z.standaloneValidator?.global&&(this.standaloneValidator.global?this.standaloneValidator.global=this.standaloneValidator.global.concat(Z.standaloneValidator.global):this.standaloneValidator.global=Z.standaloneValidator.global),N2(Z["~parser"])&&(this["~parser"]={...Z["~parser"],...this["~parser"]}),Z.setHeaders&&this.headers(Z.setHeaders),X){X in this.dependencies||(this.dependencies[X]=[]);let J=Q!==void 0?V$(X+JSON.stringify(Q)):0;this.dependencies[X].some(({checksum:Y})=>J===Y)||(this.extender.macro={...this.extender.macro,...Z.extender.macro},this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(Z.extender.higherOrderFunctions))}else N2(Z.extender.macro)&&(this.extender.macro={...this.extender.macro,...Z.extender.macro}),Z.extender.higherOrderFunctions.length&&(this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(Z.extender.higherOrderFunctions));if(Z.extender.higherOrderFunctions.length){SX(this.extender.higherOrderFunctions);let J=[];for(let Y=0;Y<this.extender.higherOrderFunctions.length;Y++){let W=this.extender.higherOrderFunctions[Y];W.checksum&&(J.includes(W.checksum)&&(this.extender.higherOrderFunctions.splice(Y,1),Y--),J.push(W.checksum))}J.length=0}this.inference=q4(this.inference,Z.inference),N2(Z.singleton.decorator)&&this.decorate(Z.singleton.decorator),N2(Z.singleton.store)&&this.state(Z.singleton.store),N2(Z.definitions.type)&&this.model(Z.definitions.type),N2(Z.definitions.error)&&this.error(Z.definitions.error),N2(Z.extender.macro)&&(this.extender.macro={...this.extender.macro,...Z.extender.macro});for(let{method:J,path:Y,handler:W,hooks:q}of Object.values(Z.router.history))this.add(J,Y,W,q);if(X){X in this.dependencies||(this.dependencies[X]=[]);let J=Q!==void 0?V$(X+JSON.stringify(Q)):0;if(this.dependencies[X].some(({checksum:Y})=>J===Y))return this;this.dependencies[X].push(this.config?.analytic?{name:Z.config.name,seed:Z.config.seed,checksum:J,dependencies:Z.dependencies,stack:Z.telemetry?.stack,routes:Z.router.history,decorators:Z.singleton,store:Z.singleton.store,error:Z.definitions.error,derive:Z.event.transform?.filter((Y)=>Y?.subType==="derive").map((Y)=>({fn:Y.toString(),stack:Error().stack??""})),resolve:Z.event.transform?.filter((Y)=>Y?.subType==="resolve").map((Y)=>({fn:Y.toString(),stack:Error().stack??""}))}:{name:Z.config.name,seed:Z.config.seed,checksum:J,dependencies:Z.dependencies}),N2(Z.event)&&(this.event=HX(this.event,AX(Z.event),J))}else N2(Z.event)&&(this.event=HX(this.event,AX(Z.event)));return Z.validator.global&&(this.validator.global=Q$(this.validator.global,{...Z.validator.global})),Z.validator.scoped&&(this.validator.local=Q$(this.validator.local,{...Z.validator.scoped})),this}macro(Z,X){if(typeof Z=="string"&&!X)throw Error("Macro function is required");return typeof Z=="string"?this.extender.macro[Z]=X:this.extender.macro={...this.extender.macro,...Z},this}applyMacro(Z,X=Z,{iteration:Q=0,applied:J={}}={}){if(Q>=16)return;let Y=this.extender.macro;for(let[W,q]of Object.entries(X)){if(!(W in Y))continue;let M=typeof Y[W]=="function"?Y[W](q):Y[W];if(!M||typeof Y[W]=="object"&&q===!1)return;let z=V$(W+JSON.stringify(M.seed??q));if(!(z in J)){J[z]=!0;for(let[w,G]of Object.entries(M))if(w!=="seed"){if(w in H5){U5(Z,w,G),delete Z[W];continue}if(w==="detail"){Z.detail||(Z.detail={}),Z.detail=Z0(Z.detail,G,{mergeArray:!0}),delete Z[W];continue}if(w in Y){this.applyMacro(Z,{[w]:G},{applied:J,iteration:Q+1}),delete Z[W];continue}switch((w==="derive"||w==="resolve")&&typeof G=="function"&&(G={fn:G,subType:w}),typeof Z[w]){case"function":Z[w]=[Z[w],G];break;case"object":Array.isArray(Z[w])?Z[w].push(G):Z[w]=[Z[w],G];break;case"undefined":Z[w]=G;break}delete Z[W]}}}}mount(Z,X,Q){if(Z instanceof $||typeof Z=="function"||Z.length===0||Z==="/"){let q=typeof Z=="function"?Z:Z instanceof $?Z.compile().fetch:X instanceof $?X.compile().fetch:typeof X=="function"?X:(()=>{throw Error("Invalid handler")})(),M=({request:z,path:w})=>q(new Request(kZ(z.url,w),{method:z.method,headers:z.headers,signal:z.signal,credentials:z.credentials,referrerPolicy:z.referrerPolicy,duplex:z.duplex,redirect:z.redirect,mode:z.mode,keepalive:z.keepalive,integrity:z.integrity,body:z.body}));return this.route("ALL","/*",M,{parse:"none",...Q,detail:{...Q?.detail,hide:!0},config:{mount:q}}),this}let J=X instanceof $?X.compile().fetch:typeof X=="function"?X:(()=>{throw Error("Invalid handler")})(),Y=Z.length-(Z.endsWith("*")?1:0),W=({request:q,path:M})=>J(new Request(kZ(q.url,M.slice(Y)||"/"),{method:q.method,headers:q.headers,signal:q.signal,credentials:q.credentials,referrerPolicy:q.referrerPolicy,duplex:q.duplex,redirect:q.redirect,mode:q.mode,keepalive:q.keepalive,integrity:q.integrity,body:q.body}));return this.route("ALL",Z,W,{parse:"none",...Q,detail:{...Q?.detail,hide:!0},config:{mount:J}}),this.route("ALL",Z+(Z.endsWith("/")?"*":"/*"),W,{parse:"none",...Q,detail:{...Q?.detail,hide:!0},config:{mount:J}}),this}get(Z,X,Q){return this.add("GET",Z,X,Q),this}post(Z,X,Q){return this.add("POST",Z,X,Q),this}put(Z,X,Q){return this.add("PUT",Z,X,Q),this}patch(Z,X,Q){return this.add("PATCH",Z,X,Q),this}delete(Z,X,Q){return this.add("DELETE",Z,X,Q),this}options(Z,X,Q){return this.add("OPTIONS",Z,X,Q),this}all(Z,X,Q){return this.add("ALL",Z,X,Q),this}head(Z,X,Q){return this.add("HEAD",Z,X,Q),this}connect(Z,X,Q){return this.add("CONNECT",Z,X,Q),this}route(Z,X,Q,J){return this.add(Z.toUpperCase(),X,Q,J,J?.config),this}ws(Z,X){return this["~adapter"].ws?this["~adapter"].ws(this,Z,X):console.warn("Current adapter doesn't support WebSocket"),this}state(Z,X,Q){X===void 0?(Q=Z,Z={as:"append"},X=""):Q===void 0&&(typeof Z=="string"?(Q=X,X=Z,Z={as:"append"}):typeof Z=="object"&&(Q=X,X=""));let{as:J}=Z;if(typeof X!="string")return this;switch(typeof Q){case"object":return!Q||!N2(Q)?this:X?((X in this.singleton.store)?this.singleton.store[X]=Z0(this.singleton.store[X],Q,{override:J==="override"}):this.singleton.store[X]=Q,this):Q===null?this:(this.singleton.store=Z0(this.singleton.store,Q,{override:J==="override"}),this);case"function":return X?(J==="override"||!(X in this.singleton.store))&&(this.singleton.store[X]=Q):this.singleton.store=Q(this.singleton.store),this;default:return(J==="override"||!(X in this.singleton.store))&&(this.singleton.store[X]=Q),this}}decorate(Z,X,Q){X===void 0?(Q=Z,Z={as:"append"},X=""):Q===void 0&&(typeof Z=="string"?(Q=X,X=Z,Z={as:"append"}):typeof Z=="object"&&(Q=X,X=""));let{as:J}=Z;if(typeof X!="string")return this;switch(typeof Q){case"object":return X?((X in this.singleton.decorator)?this.singleton.decorator[X]=Z0(this.singleton.decorator[X],Q,{override:J==="override"}):this.singleton.decorator[X]=Q,this):Q===null?this:(this.singleton.decorator=Z0(this.singleton.decorator,Q,{override:J==="override"}),this);case"function":return X?(J==="override"||!(X in this.singleton.decorator))&&(this.singleton.decorator[X]=Q):this.singleton.decorator=Q(this.singleton.decorator),this;default:return(J==="override"||!(X in this.singleton.decorator))&&(this.singleton.decorator[X]=Q),this}}derive(Z,X){X||(X=Z,Z={as:"local"});let Q={subType:"derive",fn:X};return this.onTransform(Z,Q)}model(Z,X){let Q=(J)=>{let Y={};for(let W in J)"~standard"in J[W]||(Y[W]=J[W]);return Y};switch(typeof Z){case"object":let J={},Y=Object.entries(Z);if(!Y.length)return this;for(let[M,z]of Y)M in this.definitions.type||("~standard"in z?this.definitions.type[M]=z:(J[M]=this.definitions.type[M]=z,J[M].$id??=`#/components/schemas/${M}`));return this.definitions.typebox=x.Module({...this.definitions.typebox.$defs,...J}),this;case"function":let W=Z(this.definitions.type);return this.definitions.type=W,this.definitions.typebox=x.Module(Q(W)),this;case"string":if(!X)break;if(this.definitions.type[Z]=X,"~standard"in X)return this;let q={...X,id:X.$id??`#/components/schemas/${Z}`};return this.definitions.typebox=x.Module({...this.definitions.typebox.$defs,...q}),this}return X?(this.definitions.type[Z]=X,("~standard"in X)?this:(this.definitions.typebox=x.Module({...this.definitions.typebox.$defs,[Z]:X}),this)):this}Ref(Z){return x.Ref(Z)}mapDerive(Z,X){X||(X=Z,Z={as:"local"});let Q={subType:"mapDerive",fn:X};return this.onTransform(Z,Q)}affix(Z,X,Q){if(Q==="")return this;let J=["_","-"," "],Y=(z)=>z[0].toUpperCase()+z.slice(1),W=Z==="prefix"?(z,w)=>J.includes(z.at(-1)??"")?z+w:z+Y(w):J.includes(Q.at(-1)??"")?(z,w)=>w+z:(z,w)=>w+Y(z),q=(z)=>{let w={};switch(z){case"decorator":for(let G in this.singleton.decorator)w[W(Q,G)]=this.singleton.decorator[G];this.singleton.decorator=w;break;case"state":for(let G in this.singleton.store)w[W(Q,G)]=this.singleton.store[G];this.singleton.store=w;break;case"model":for(let G in this.definitions.type)w[W(Q,G)]=this.definitions.type[G];this.definitions.type=w;break;case"error":for(let G in this.definitions.error)w[W(Q,G)]=this.definitions.error[G];this.definitions.error=w;break}},M=Array.isArray(X)?X:[X];for(let z of M.some((w)=>w==="all")?["decorator","state","model","error"]:M)q(z);return this}prefix(Z,X){return this.affix("prefix",Z,X)}suffix(Z,X){return this.affix("suffix",Z,X)}compile(){return this["~adapter"].beforeCompile?.(this),this["~adapter"].isWebStandard?(this.fetch=this.config.aot?N4(this):eX(this),typeof this.server?.reload=="function"&&this.server.reload({...this.server||{},fetch:this.fetch}),this):(typeof this.server?.reload=="function"&&this.server.reload(this.server||{}),this._handle=N4(this),this)}get modules(){return this.promisedModules}},rW=IA;var TA=new rW().get("/",()=>"OK"),aW=TA;var ZQ={name:"DockStacks",description:"This Plugin allows for deploying so called stacks. Stacks are prebuilt docker compose file, with tempplating and plugin support",repository:"its4nik/dockstat:dev/apps/dockstore",version:"1.0.0",tags:["compose","management"],author:{email:"info@itsnik.de",license:"MIT",name:"Its4Nik",website:"https://github.com/Its4Nik"},manifest:"src/content/plugins/dockstacks/manifest.ts",repoType:"github"};var kA={...ZQ,routes:aW},sT=kA,oT=ZQ;export{oT as meta,sT as default};

//# debugId=7D21FA970D90EAC764756E2164756E21

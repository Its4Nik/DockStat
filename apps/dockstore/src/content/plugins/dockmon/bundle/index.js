// @bun
/* Bundled by DockStore */
var G$=Object.create;var{getPrototypeOf:Q$,defineProperty:a0,getOwnPropertyNames:H$}=Object;var E$=Object.prototype.hasOwnProperty;var T$=($,X,Z)=>{Z=$!=null?G$(Q$($)):{};let J=X||!$||!$.__esModule?a0(Z,"default",{value:$,enumerable:!0}):Z;for(let Y of H$($))if(!E$.call(J,Y))a0(J,Y,{get:()=>$[Y],enumerable:!0});return J};var A=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var e0=import.meta.require;var Q1=A((y$)=>{var G1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");y$.encode=function($){if(0<=$&&$<G1.length)return G1[$];throw TypeError("Must be between 0 and 63: "+$)};y$.decode=function($){var X=65,Z=90,J=97,Y=122,W=48,z=57,K=43,V=47,_=26,j=52;if(X<=$&&$<=Z)return $-X;if(J<=$&&$<=Y)return $-J+_;if(W<=$&&$<=z)return $-W+j;if($==K)return 62;if($==V)return 63;return-1}});var A0=A((S$)=>{var H1=Q1(),P0=5,E1=1<<P0,T1=E1-1,U1=E1;function M$($){return $<0?(-$<<1)+1:($<<1)+0}function C$($){var X=($&1)===1,Z=$>>1;return X?-Z:Z}S$.encode=function(X){var Z="",J,Y=M$(X);do{if(J=Y&T1,Y>>>=P0,Y>0)J|=U1;Z+=H1.encode(J)}while(Y>0);return Z};S$.decode=function(X,Z,J){var Y=X.length,W=0,z=0,K,V;do{if(Z>=Y)throw Error("Expected more digits in base 64 VLQ value.");if(V=H1.decode(X.charCodeAt(Z++)),V===-1)throw Error("Invalid base64 digit: "+X.charAt(Z-1));K=!!(V&U1),V&=T1,W=W+(V<<z),z+=P0}while(K);J.value=C$(W),J.rest=Z}});var n=A((t$)=>{function d$($,X,Z){if(X in $)return $[X];else if(arguments.length===3)return Z;else throw Error('"'+X+'" is a required argument.')}t$.getArg=d$;var F1=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,g$=/^data:.+\,.+$/;function X0($){var X=$.match(F1);if(!X)return null;return{scheme:X[1],auth:X[2],host:X[3],port:X[4],path:X[5]}}t$.urlParse=X0;function i($){var X="";if($.scheme)X+=$.scheme+":";if(X+="//",$.auth)X+=$.auth+"@";if($.host)X+=$.host;if($.port)X+=":"+$.port;if($.path)X+=$.path;return X}t$.urlGenerate=i;function N0($){var X=$,Z=X0($);if(Z){if(!Z.path)return $;X=Z.path}var J=t$.isAbsolute(X),Y=X.split(/\/+/);for(var W,z=0,K=Y.length-1;K>=0;K--)if(W=Y[K],W===".")Y.splice(K,1);else if(W==="..")z++;else if(z>0)if(W==="")Y.splice(K+1,z),z=0;else Y.splice(K,2),z--;if(X=Y.join("/"),X==="")X=J?"/":".";if(Z)return Z.path=X,i(Z);return X}t$.normalize=N0;function O1($,X){if($==="")$=".";if(X==="")X=".";var Z=X0(X),J=X0($);if(J)$=J.path||"/";if(Z&&!Z.scheme){if(J)Z.scheme=J.scheme;return i(Z)}if(Z||X.match(g$))return X;if(J&&!J.host&&!J.path)return J.host=X,i(J);var Y=X.charAt(0)==="/"?X:N0($.replace(/\/+$/,"")+"/"+X);if(J)return J.path=Y,i(J);return Y}t$.join=O1;t$.isAbsolute=function($){return $.charAt(0)==="/"||F1.test($)};function m$($,X){if($==="")$=".";$=$.replace(/\/$/,"");var Z=0;while(X.indexOf($+"/")!==0){var J=$.lastIndexOf("/");if(J<0)return X;if($=$.slice(0,J),$.match(/^([^\/]+:\/)?\/*$/))return X;++Z}return Array(Z+1).join("../")+X.substr($.length+1)}t$.relative=m$;var D1=function(){var $=Object.create(null);return!("__proto__"in $)}();function B1($){return $}function c$($){if(k1($))return"$"+$;return $}t$.toSetString=D1?B1:c$;function u$($){if(k1($))return $.slice(1);return $}t$.fromSetString=D1?B1:u$;function k1($){if(!$)return!1;var X=$.length;if(X<9)return!1;if($.charCodeAt(X-1)!==95||$.charCodeAt(X-2)!==95||$.charCodeAt(X-3)!==111||$.charCodeAt(X-4)!==116||$.charCodeAt(X-5)!==111||$.charCodeAt(X-6)!==114||$.charCodeAt(X-7)!==112||$.charCodeAt(X-8)!==95||$.charCodeAt(X-9)!==95)return!1;for(var Z=X-10;Z>=0;Z--)if($.charCodeAt(Z)!==36)return!1;return!0}function p$($,X,Z){var J=s($.source,X.source);if(J!==0)return J;if(J=$.originalLine-X.originalLine,J!==0)return J;if(J=$.originalColumn-X.originalColumn,J!==0||Z)return J;if(J=$.generatedColumn-X.generatedColumn,J!==0)return J;if(J=$.generatedLine-X.generatedLine,J!==0)return J;return s($.name,X.name)}t$.compareByOriginalPositions=p$;function l$($,X,Z){var J=$.generatedLine-X.generatedLine;if(J!==0)return J;if(J=$.generatedColumn-X.generatedColumn,J!==0||Z)return J;if(J=s($.source,X.source),J!==0)return J;if(J=$.originalLine-X.originalLine,J!==0)return J;if(J=$.originalColumn-X.originalColumn,J!==0)return J;return s($.name,X.name)}t$.compareByGeneratedPositionsDeflated=l$;function s($,X){if($===X)return 0;if($===null)return 1;if(X===null)return-1;if($>X)return 1;return-1}function i$($,X){var Z=$.generatedLine-X.generatedLine;if(Z!==0)return Z;if(Z=$.generatedColumn-X.generatedColumn,Z!==0)return Z;if(Z=s($.source,X.source),Z!==0)return Z;if(Z=$.originalLine-X.originalLine,Z!==0)return Z;if(Z=$.originalColumn-X.originalColumn,Z!==0)return Z;return s($.name,X.name)}t$.compareByGeneratedPositionsInflated=i$;function s$($){return JSON.parse($.replace(/^\)]}'[^\n]*\n/,""))}t$.parseSourceMapInput=s$;function n$($,X,Z){if(X=X||"",$){if($[$.length-1]!=="/"&&X[0]!=="/")$+="/";X=$+X}if(Z){var J=X0(Z);if(!J)throw Error("sourceMapURL could not be parsed");if(J.path){var Y=J.path.lastIndexOf("/");if(Y>=0)J.path=J.path.substring(0,Y+1)}X=O1(i(J),X)}return N0(X)}t$.computeSourceURL=n$});var b0=A((j4)=>{var w0=n(),L0=Object.prototype.hasOwnProperty,g=typeof Map<"u";function f(){this._array=[],this._set=g?new Map:Object.create(null)}f.fromArray=function(X,Z){var J=new f;for(var Y=0,W=X.length;Y<W;Y++)J.add(X[Y],Z);return J};f.prototype.size=function(){return g?this._set.size:Object.getOwnPropertyNames(this._set).length};f.prototype.add=function(X,Z){var J=g?X:w0.toSetString(X),Y=g?this.has(X):L0.call(this._set,J),W=this._array.length;if(!Y||Z)this._array.push(X);if(!Y)if(g)this._set.set(X,W);else this._set[J]=W};f.prototype.has=function(X){if(g)return this._set.has(X);else{var Z=w0.toSetString(X);return L0.call(this._set,Z)}};f.prototype.indexOf=function(X){if(g){var Z=this._set.get(X);if(Z>=0)return Z}else{var J=w0.toSetString(X);if(L0.call(this._set,J))return this._set[J]}throw Error('"'+X+'" is not in the set.')};f.prototype.at=function(X){if(X>=0&&X<this._array.length)return this._array[X];throw Error("No element indexed by "+X)};f.prototype.toArray=function(){return this._array.slice()};j4.ArraySet=f});var q1=A((H4)=>{var I1=n();function Q4($,X){var Z=$.generatedLine,J=X.generatedLine,Y=$.generatedColumn,W=X.generatedColumn;return J>Z||J==Z&&W>=Y||I1.compareByGeneratedPositionsInflated($,X)<=0}function Q0(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Q0.prototype.unsortedForEach=function(X,Z){this._array.forEach(X,Z)};Q0.prototype.add=function(X){if(Q4(this._last,X))this._last=X,this._array.push(X);else this._sorted=!1,this._array.push(X)};Q0.prototype.toArray=function(){if(!this._sorted)this._array.sort(I1.compareByGeneratedPositionsInflated),this._sorted=!0;return this._array};H4.MappingList=Q0});var y0=A((U4)=>{var Z0=A0(),B=n(),H0=b0().ArraySet,T4=q1().MappingList;function L($){if(!$)$={};this._file=B.getArg($,"file",null),this._sourceRoot=B.getArg($,"sourceRoot",null),this._skipValidation=B.getArg($,"skipValidation",!1),this._sources=new H0,this._names=new H0,this._mappings=new T4,this._sourcesContents=null}L.prototype._version=3;L.fromSourceMap=function(X){var Z=X.sourceRoot,J=new L({file:X.file,sourceRoot:Z});return X.eachMapping(function(Y){var W={generated:{line:Y.generatedLine,column:Y.generatedColumn}};if(Y.source!=null){if(W.source=Y.source,Z!=null)W.source=B.relative(Z,W.source);if(W.original={line:Y.originalLine,column:Y.originalColumn},Y.name!=null)W.name=Y.name}J.addMapping(W)}),X.sources.forEach(function(Y){var W=Y;if(Z!==null)W=B.relative(Z,Y);if(!J._sources.has(W))J._sources.add(W);var z=X.sourceContentFor(Y);if(z!=null)J.setSourceContent(Y,z)}),J};L.prototype.addMapping=function(X){var Z=B.getArg(X,"generated"),J=B.getArg(X,"original",null),Y=B.getArg(X,"source",null),W=B.getArg(X,"name",null);if(!this._skipValidation)this._validateMapping(Z,J,Y,W);if(Y!=null){if(Y=String(Y),!this._sources.has(Y))this._sources.add(Y)}if(W!=null){if(W=String(W),!this._names.has(W))this._names.add(W)}this._mappings.add({generatedLine:Z.line,generatedColumn:Z.column,originalLine:J!=null&&J.line,originalColumn:J!=null&&J.column,source:Y,name:W})};L.prototype.setSourceContent=function(X,Z){var J=X;if(this._sourceRoot!=null)J=B.relative(this._sourceRoot,J);if(Z!=null){if(!this._sourcesContents)this._sourcesContents=Object.create(null);this._sourcesContents[B.toSetString(J)]=Z}else if(this._sourcesContents){if(delete this._sourcesContents[B.toSetString(J)],Object.keys(this._sourcesContents).length===0)this._sourcesContents=null}};L.prototype.applySourceMap=function(X,Z,J){var Y=Z;if(Z==null){if(X.file==null)throw Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);Y=X.file}var W=this._sourceRoot;if(W!=null)Y=B.relative(W,Y);var z=new H0,K=new H0;this._mappings.unsortedForEach(function(V){if(V.source===Y&&V.originalLine!=null){var _=X.originalPositionFor({line:V.originalLine,column:V.originalColumn});if(_.source!=null){if(V.source=_.source,J!=null)V.source=B.join(J,V.source);if(W!=null)V.source=B.relative(W,V.source);if(V.originalLine=_.line,V.originalColumn=_.column,_.name!=null)V.name=_.name}}var j=V.source;if(j!=null&&!z.has(j))z.add(j);var G=V.name;if(G!=null&&!K.has(G))K.add(G)},this),this._sources=z,this._names=K,X.sources.forEach(function(V){var _=X.sourceContentFor(V);if(_!=null){if(J!=null)V=B.join(J,V);if(W!=null)V=B.relative(W,V);this.setSourceContent(V,_)}},this)};L.prototype._validateMapping=function(X,Z,J,Y){if(Z&&typeof Z.line!=="number"&&typeof Z.column!=="number")throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(X&&"line"in X&&"column"in X&&X.line>0&&X.column>=0&&!Z&&!J&&!Y)return;else if(X&&"line"in X&&"column"in X&&Z&&"line"in Z&&"column"in Z&&X.line>0&&X.column>=0&&Z.line>0&&Z.column>=0&&J)return;else throw Error("Invalid mapping: "+JSON.stringify({generated:X,source:J,original:Z,name:Y}))};L.prototype._serializeMappings=function(){var X=0,Z=1,J=0,Y=0,W=0,z=0,K="",V,_,j,G,Q=this._mappings.toArray();for(var T=0,k=Q.length;T<k;T++){if(_=Q[T],V="",_.generatedLine!==Z){X=0;while(_.generatedLine!==Z)V+=";",Z++}else if(T>0){if(!B.compareByGeneratedPositionsInflated(_,Q[T-1]))continue;V+=","}if(V+=Z0.encode(_.generatedColumn-X),X=_.generatedColumn,_.source!=null){if(G=this._sources.indexOf(_.source),V+=Z0.encode(G-z),z=G,V+=Z0.encode(_.originalLine-1-Y),Y=_.originalLine-1,V+=Z0.encode(_.originalColumn-J),J=_.originalColumn,_.name!=null)j=this._names.indexOf(_.name),V+=Z0.encode(j-W),W=j}K+=V}return K};L.prototype._generateSourcesContent=function(X,Z){return X.map(function(J){if(!this._sourcesContents)return null;if(Z!=null)J=B.relative(Z,J);var Y=B.toSetString(J);return Object.prototype.hasOwnProperty.call(this._sourcesContents,Y)?this._sourcesContents[Y]:null},this)};L.prototype.toJSON=function(){var X={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null)X.file=this._file;if(this._sourceRoot!=null)X.sourceRoot=this._sourceRoot;if(this._sourcesContents)X.sourcesContent=this._generateSourcesContent(X.sources,X.sourceRoot);return X};L.prototype.toString=function(){return JSON.stringify(this.toJSON())};U4.SourceMapGenerator=L});var P1=A((O4)=>{O4.GREATEST_LOWER_BOUND=1;O4.LEAST_UPPER_BOUND=2;function x0($,X,Z,J,Y,W){var z=Math.floor((X-$)/2)+$,K=Y(Z,J[z],!0);if(K===0)return z;else if(K>0){if(X-z>1)return x0(z,X,Z,J,Y,W);if(W==O4.LEAST_UPPER_BOUND)return X<J.length?X:-1;else return z}else{if(z-$>1)return x0($,z,Z,J,Y,W);if(W==O4.LEAST_UPPER_BOUND)return z;else return $<0?-1:$}}O4.search=function(X,Z,J,Y){if(Z.length===0)return-1;var W=x0(-1,Z.length,X,Z,J,Y||O4.GREATEST_LOWER_BOUND);if(W<0)return-1;while(W-1>=0){if(J(Z[W],Z[W-1],!0)!==0)break;--W}return W}});var A1=A((k4)=>{function M0($,X,Z){var J=$[X];$[X]=$[Z],$[Z]=J}function B4($,X){return Math.round($+Math.random()*(X-$))}function C0($,X,Z,J){if(Z<J){var Y=B4(Z,J),W=Z-1;M0($,Y,J);var z=$[J];for(var K=Z;K<J;K++)if(X($[K],z)<=0)W+=1,M0($,W,K);M0($,W+1,K);var V=W+1;C0($,X,Z,V-1),C0($,X,V+1,J)}}k4.quickSort=function($,X){C0($,X,0,$.length-1)}});var w1=A((R4)=>{var H=n(),S0=P1(),t=b0().ArraySet,q4=A0(),J0=A1().quickSort;function U($,X){var Z=$;if(typeof $==="string")Z=H.parseSourceMapInput($);return Z.sections!=null?new M(Z,X):new R(Z,X)}U.fromSourceMap=function($,X){return R.fromSourceMap($,X)};U.prototype._version=3;U.prototype.__generatedMappings=null;Object.defineProperty(U.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){if(!this.__generatedMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__generatedMappings}});U.prototype.__originalMappings=null;Object.defineProperty(U.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){if(!this.__originalMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__originalMappings}});U.prototype._charIsMappingSeparator=function(X,Z){var J=X.charAt(Z);return J===";"||J===","};U.prototype._parseMappings=function(X,Z){throw Error("Subclasses must implement _parseMappings")};U.GENERATED_ORDER=1;U.ORIGINAL_ORDER=2;U.GREATEST_LOWER_BOUND=1;U.LEAST_UPPER_BOUND=2;U.prototype.eachMapping=function(X,Z,J){var Y=Z||null,W=J||U.GENERATED_ORDER,z;switch(W){case U.GENERATED_ORDER:z=this._generatedMappings;break;case U.ORIGINAL_ORDER:z=this._originalMappings;break;default:throw Error("Unknown order of iteration.")}var K=this.sourceRoot;z.map(function(V){var _=V.source===null?null:this._sources.at(V.source);return _=H.computeSourceURL(K,_,this._sourceMapURL),{source:_,generatedLine:V.generatedLine,generatedColumn:V.generatedColumn,originalLine:V.originalLine,originalColumn:V.originalColumn,name:V.name===null?null:this._names.at(V.name)}},this).forEach(X,Y)};U.prototype.allGeneratedPositionsFor=function(X){var Z=H.getArg(X,"line"),J={source:H.getArg(X,"source"),originalLine:Z,originalColumn:H.getArg(X,"column",0)};if(J.source=this._findSourceIndex(J.source),J.source<0)return[];var Y=[],W=this._findMapping(J,this._originalMappings,"originalLine","originalColumn",H.compareByOriginalPositions,S0.LEAST_UPPER_BOUND);if(W>=0){var z=this._originalMappings[W];if(X.column===void 0){var K=z.originalLine;while(z&&z.originalLine===K)Y.push({line:H.getArg(z,"generatedLine",null),column:H.getArg(z,"generatedColumn",null),lastColumn:H.getArg(z,"lastGeneratedColumn",null)}),z=this._originalMappings[++W]}else{var V=z.originalColumn;while(z&&z.originalLine===Z&&z.originalColumn==V)Y.push({line:H.getArg(z,"generatedLine",null),column:H.getArg(z,"generatedColumn",null),lastColumn:H.getArg(z,"lastGeneratedColumn",null)}),z=this._originalMappings[++W]}}return Y};R4.SourceMapConsumer=U;function R($,X){var Z=$;if(typeof $==="string")Z=H.parseSourceMapInput($);var J=H.getArg(Z,"version"),Y=H.getArg(Z,"sources"),W=H.getArg(Z,"names",[]),z=H.getArg(Z,"sourceRoot",null),K=H.getArg(Z,"sourcesContent",null),V=H.getArg(Z,"mappings"),_=H.getArg(Z,"file",null);if(J!=this._version)throw Error("Unsupported version: "+J);if(z)z=H.normalize(z);Y=Y.map(String).map(H.normalize).map(function(j){return z&&H.isAbsolute(z)&&H.isAbsolute(j)?H.relative(z,j):j}),this._names=t.fromArray(W.map(String),!0),this._sources=t.fromArray(Y,!0),this._absoluteSources=this._sources.toArray().map(function(j){return H.computeSourceURL(z,j,X)}),this.sourceRoot=z,this.sourcesContent=K,this._mappings=V,this._sourceMapURL=X,this.file=_}R.prototype=Object.create(U.prototype);R.prototype.consumer=U;R.prototype._findSourceIndex=function($){var X=$;if(this.sourceRoot!=null)X=H.relative(this.sourceRoot,X);if(this._sources.has(X))return this._sources.indexOf(X);var Z;for(Z=0;Z<this._absoluteSources.length;++Z)if(this._absoluteSources[Z]==$)return Z;return-1};R.fromSourceMap=function(X,Z){var J=Object.create(R.prototype),Y=J._names=t.fromArray(X._names.toArray(),!0),W=J._sources=t.fromArray(X._sources.toArray(),!0);J.sourceRoot=X._sourceRoot,J.sourcesContent=X._generateSourcesContent(J._sources.toArray(),J.sourceRoot),J.file=X._file,J._sourceMapURL=Z,J._absoluteSources=J._sources.toArray().map(function(T){return H.computeSourceURL(J.sourceRoot,T,Z)});var z=X._mappings.toArray().slice(),K=J.__generatedMappings=[],V=J.__originalMappings=[];for(var _=0,j=z.length;_<j;_++){var G=z[_],Q=new N1;if(Q.generatedLine=G.generatedLine,Q.generatedColumn=G.generatedColumn,G.source){if(Q.source=W.indexOf(G.source),Q.originalLine=G.originalLine,Q.originalColumn=G.originalColumn,G.name)Q.name=Y.indexOf(G.name);V.push(Q)}K.push(Q)}return J0(J.__originalMappings,H.compareByOriginalPositions),J};R.prototype._version=3;Object.defineProperty(R.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function N1(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}R.prototype._parseMappings=function(X,Z){var J=1,Y=0,W=0,z=0,K=0,V=0,_=X.length,j=0,G={},Q={},T=[],k=[],q,c,I,y,u;while(j<_)if(X.charAt(j)===";")J++,j++,Y=0;else if(X.charAt(j)===",")j++;else{q=new N1,q.generatedLine=J;for(y=j;y<_;y++)if(this._charIsMappingSeparator(X,y))break;if(c=X.slice(j,y),I=G[c],I)j+=c.length;else{I=[];while(j<y)q4.decode(X,j,Q),u=Q.value,j=Q.rest,I.push(u);if(I.length===2)throw Error("Found a source, but no line and column");if(I.length===3)throw Error("Found a source and line, but no column");G[c]=I}if(q.generatedColumn=Y+I[0],Y=q.generatedColumn,I.length>1){if(q.source=K+I[1],K+=I[1],q.originalLine=W+I[2],W=q.originalLine,q.originalLine+=1,q.originalColumn=z+I[3],z=q.originalColumn,I.length>4)q.name=V+I[4],V+=I[4]}if(k.push(q),typeof q.originalLine==="number")T.push(q)}J0(k,H.compareByGeneratedPositionsDeflated),this.__generatedMappings=k,J0(T,H.compareByOriginalPositions),this.__originalMappings=T};R.prototype._findMapping=function(X,Z,J,Y,W,z){if(X[J]<=0)throw TypeError("Line must be greater than or equal to 1, got "+X[J]);if(X[Y]<0)throw TypeError("Column must be greater than or equal to 0, got "+X[Y]);return S0.search(X,Z,W,z)};R.prototype.computeColumnSpans=function(){for(var X=0;X<this._generatedMappings.length;++X){var Z=this._generatedMappings[X];if(X+1<this._generatedMappings.length){var J=this._generatedMappings[X+1];if(Z.generatedLine===J.generatedLine){Z.lastGeneratedColumn=J.generatedColumn-1;continue}}Z.lastGeneratedColumn=1/0}};R.prototype.originalPositionFor=function(X){var Z={generatedLine:H.getArg(X,"line"),generatedColumn:H.getArg(X,"column")},J=this._findMapping(Z,this._generatedMappings,"generatedLine","generatedColumn",H.compareByGeneratedPositionsDeflated,H.getArg(X,"bias",U.GREATEST_LOWER_BOUND));if(J>=0){var Y=this._generatedMappings[J];if(Y.generatedLine===Z.generatedLine){var W=H.getArg(Y,"source",null);if(W!==null)W=this._sources.at(W),W=H.computeSourceURL(this.sourceRoot,W,this._sourceMapURL);var z=H.getArg(Y,"name",null);if(z!==null)z=this._names.at(z);return{source:W,line:H.getArg(Y,"originalLine",null),column:H.getArg(Y,"originalColumn",null),name:z}}}return{source:null,line:null,column:null,name:null}};R.prototype.hasContentsOfAllSources=function(){if(!this.sourcesContent)return!1;return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(X){return X==null})};R.prototype.sourceContentFor=function(X,Z){if(!this.sourcesContent)return null;var J=this._findSourceIndex(X);if(J>=0)return this.sourcesContent[J];var Y=X;if(this.sourceRoot!=null)Y=H.relative(this.sourceRoot,Y);var W;if(this.sourceRoot!=null&&(W=H.urlParse(this.sourceRoot))){var z=Y.replace(/^file:\/\//,"");if(W.scheme=="file"&&this._sources.has(z))return this.sourcesContent[this._sources.indexOf(z)];if((!W.path||W.path=="/")&&this._sources.has("/"+Y))return this.sourcesContent[this._sources.indexOf("/"+Y)]}if(Z)return null;else throw Error('"'+Y+'" is not in the SourceMap.')};R.prototype.generatedPositionFor=function(X){var Z=H.getArg(X,"source");if(Z=this._findSourceIndex(Z),Z<0)return{line:null,column:null,lastColumn:null};var J={source:Z,originalLine:H.getArg(X,"line"),originalColumn:H.getArg(X,"column")},Y=this._findMapping(J,this._originalMappings,"originalLine","originalColumn",H.compareByOriginalPositions,H.getArg(X,"bias",U.GREATEST_LOWER_BOUND));if(Y>=0){var W=this._originalMappings[Y];if(W.source===J.source)return{line:H.getArg(W,"generatedLine",null),column:H.getArg(W,"generatedColumn",null),lastColumn:H.getArg(W,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};R4.BasicSourceMapConsumer=R;function M($,X){var Z=$;if(typeof $==="string")Z=H.parseSourceMapInput($);var J=H.getArg(Z,"version"),Y=H.getArg(Z,"sections");if(J!=this._version)throw Error("Unsupported version: "+J);this._sources=new t,this._names=new t;var W={line:-1,column:0};this._sections=Y.map(function(z){if(z.url)throw Error("Support for url field in sections not implemented.");var K=H.getArg(z,"offset"),V=H.getArg(K,"line"),_=H.getArg(K,"column");if(V<W.line||V===W.line&&_<W.column)throw Error("Section offsets must be ordered and non-overlapping.");return W=K,{generatedOffset:{generatedLine:V+1,generatedColumn:_+1},consumer:new U(H.getArg(z,"map"),X)}})}M.prototype=Object.create(U.prototype);M.prototype.constructor=U;M.prototype._version=3;Object.defineProperty(M.prototype,"sources",{get:function(){var $=[];for(var X=0;X<this._sections.length;X++)for(var Z=0;Z<this._sections[X].consumer.sources.length;Z++)$.push(this._sections[X].consumer.sources[Z]);return $}});M.prototype.originalPositionFor=function(X){var Z={generatedLine:H.getArg(X,"line"),generatedColumn:H.getArg(X,"column")},J=S0.search(Z,this._sections,function(W,z){var K=W.generatedLine-z.generatedOffset.generatedLine;if(K)return K;return W.generatedColumn-z.generatedOffset.generatedColumn}),Y=this._sections[J];if(!Y)return{source:null,line:null,column:null,name:null};return Y.consumer.originalPositionFor({line:Z.generatedLine-(Y.generatedOffset.generatedLine-1),column:Z.generatedColumn-(Y.generatedOffset.generatedLine===Z.generatedLine?Y.generatedOffset.generatedColumn-1:0),bias:X.bias})};M.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(X){return X.consumer.hasContentsOfAllSources()})};M.prototype.sourceContentFor=function(X,Z){for(var J=0;J<this._sections.length;J++){var Y=this._sections[J],W=Y.consumer.sourceContentFor(X,!0);if(W)return W}if(Z)return null;else throw Error('"'+X+'" is not in the SourceMap.')};M.prototype.generatedPositionFor=function(X){for(var Z=0;Z<this._sections.length;Z++){var J=this._sections[Z];if(J.consumer._findSourceIndex(H.getArg(X,"source"))===-1)continue;var Y=J.consumer.generatedPositionFor(X);if(Y){var W={line:Y.line+(J.generatedOffset.generatedLine-1),column:Y.column+(J.generatedOffset.generatedLine===Y.line?J.generatedOffset.generatedColumn-1:0)};return W}}return{line:null,column:null}};M.prototype._parseMappings=function(X,Z){this.__generatedMappings=[],this.__originalMappings=[];for(var J=0;J<this._sections.length;J++){var Y=this._sections[J],W=Y.consumer._generatedMappings;for(var z=0;z<W.length;z++){var K=W[z],V=Y.consumer._sources.at(K.source);V=H.computeSourceURL(Y.consumer.sourceRoot,V,this._sourceMapURL),this._sources.add(V),V=this._sources.indexOf(V);var _=null;if(K.name)_=Y.consumer._names.at(K.name),this._names.add(_),_=this._names.indexOf(_);var j={source:V,generatedLine:K.generatedLine+(Y.generatedOffset.generatedLine-1),generatedColumn:K.generatedColumn+(Y.generatedOffset.generatedLine===K.generatedLine?Y.generatedOffset.generatedColumn-1:0),originalLine:K.originalLine,originalColumn:K.originalColumn,name:_};if(this.__generatedMappings.push(j),typeof j.originalLine==="number")this.__originalMappings.push(j)}}J0(this.__generatedMappings,H.compareByGeneratedPositionsDeflated),J0(this.__originalMappings,H.compareByOriginalPositions)};R4.IndexedSourceMapConsumer=M});var L1=A((y4)=>{var w4=y0().SourceMapGenerator,E0=n(),L4=/(\r?\n)/,b4=10,o="$$$isSourceNode$$$";function N($,X,Z,J,Y){if(this.children=[],this.sourceContents={},this.line=$==null?null:$,this.column=X==null?null:X,this.source=Z==null?null:Z,this.name=Y==null?null:Y,this[o]=!0,J!=null)this.add(J)}N.fromStringWithSourceMap=function(X,Z,J){var Y=new N,W=X.split(L4),z=0,K=function(){var Q=k(),T=k()||"";return Q+T;function k(){return z<W.length?W[z++]:void 0}},V=1,_=0,j=null;if(Z.eachMapping(function(Q){if(j!==null)if(V<Q.generatedLine)G(j,K()),V++,_=0;else{var T=W[z]||"",k=T.substr(0,Q.generatedColumn-_);W[z]=T.substr(Q.generatedColumn-_),_=Q.generatedColumn,G(j,k),j=Q;return}while(V<Q.generatedLine)Y.add(K()),V++;if(_<Q.generatedColumn){var T=W[z]||"";Y.add(T.substr(0,Q.generatedColumn)),W[z]=T.substr(Q.generatedColumn),_=Q.generatedColumn}j=Q},this),z<W.length){if(j)G(j,K());Y.add(W.splice(z).join(""))}return Z.sources.forEach(function(Q){var T=Z.sourceContentFor(Q);if(T!=null){if(J!=null)Q=E0.join(J,Q);Y.setSourceContent(Q,T)}}),Y;function G(Q,T){if(Q===null||Q.source===void 0)Y.add(T);else{var k=J?E0.join(J,Q.source):Q.source;Y.add(new N(Q.originalLine,Q.originalColumn,k,T,Q.name))}}};N.prototype.add=function(X){if(Array.isArray(X))X.forEach(function(Z){this.add(Z)},this);else if(X[o]||typeof X==="string"){if(X)this.children.push(X)}else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+X);return this};N.prototype.prepend=function(X){if(Array.isArray(X))for(var Z=X.length-1;Z>=0;Z--)this.prepend(X[Z]);else if(X[o]||typeof X==="string")this.children.unshift(X);else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+X);return this};N.prototype.walk=function(X){var Z;for(var J=0,Y=this.children.length;J<Y;J++)if(Z=this.children[J],Z[o])Z.walk(X);else if(Z!=="")X(Z,{source:this.source,line:this.line,column:this.column,name:this.name})};N.prototype.join=function(X){var Z,J,Y=this.children.length;if(Y>0){Z=[];for(J=0;J<Y-1;J++)Z.push(this.children[J]),Z.push(X);Z.push(this.children[J]),this.children=Z}return this};N.prototype.replaceRight=function(X,Z){var J=this.children[this.children.length-1];if(J[o])J.replaceRight(X,Z);else if(typeof J==="string")this.children[this.children.length-1]=J.replace(X,Z);else this.children.push("".replace(X,Z));return this};N.prototype.setSourceContent=function(X,Z){this.sourceContents[E0.toSetString(X)]=Z};N.prototype.walkSourceContents=function(X){for(var Z=0,J=this.children.length;Z<J;Z++)if(this.children[Z][o])this.children[Z].walkSourceContents(X);var Y=Object.keys(this.sourceContents);for(var Z=0,J=Y.length;Z<J;Z++)X(E0.fromSetString(Y[Z]),this.sourceContents[Y[Z]])};N.prototype.toString=function(){var X="";return this.walk(function(Z){X+=Z}),X};N.prototype.toStringWithSourceMap=function(X){var Z={code:"",line:1,column:0},J=new w4(X),Y=!1,W=null,z=null,K=null,V=null;return this.walk(function(_,j){if(Z.code+=_,j.source!==null&&j.line!==null&&j.column!==null){if(W!==j.source||z!==j.line||K!==j.column||V!==j.name)J.addMapping({source:j.source,original:{line:j.line,column:j.column},generated:{line:Z.line,column:Z.column},name:j.name});W=j.source,z=j.line,K=j.column,V=j.name,Y=!0}else if(Y)J.addMapping({generated:{line:Z.line,column:Z.column}}),W=null,Y=!1;for(var G=0,Q=_.length;G<Q;G++)if(_.charCodeAt(G)===b4){if(Z.line++,Z.column=0,G+1===Q)W=null,Y=!1;else if(Y)J.addMapping({source:j.source,original:{line:j.line,column:j.column},generated:{line:Z.line,column:Z.column},name:j.name})}else Z.column++}),this.walkSourceContents(function(_,j){J.setSourceContent(_,j)}),{code:Z.code,map:J}};y4.SourceNode=N});var b1=A((v4)=>{v4.SourceMapGenerator=y0().SourceMapGenerator;v4.SourceMapConsumer=w1().SourceMapConsumer;v4.SourceNode=L1().SourceNode});var x1=A((p8,y1)=>{var f4=Object.prototype.toString,f0=typeof Buffer<"u"&&typeof Buffer.alloc==="function"&&typeof Buffer.allocUnsafe==="function"&&typeof Buffer.from==="function";function h4($){return f4.call($).slice(8,-1)==="ArrayBuffer"}function d4($,X,Z){X>>>=0;var J=$.byteLength-X;if(J<0)throw RangeError("'offset' is out of bounds");if(Z===void 0)Z=J;else if(Z>>>=0,Z>J)throw RangeError("'length' is out of bounds");return f0?Buffer.from($.slice(X,X+Z)):new Buffer(new Uint8Array($.slice(X,X+Z)))}function g4($,X){if(typeof X!=="string"||X==="")X="utf8";if(!Buffer.isEncoding(X))throw TypeError('"encoding" must be a valid string encoding');return f0?Buffer.from($,X):new Buffer($,X)}function m4($,X,Z){if(typeof $==="number")throw TypeError('"value" argument must not be a number');if(h4($))return d4($,X,Z);if(typeof $==="string")return g4($,X);return f0?Buffer.from($):new Buffer($)}y1.exports=m4});var g1=A((Z8,m0)=>{var c4=b1().SourceMapConsumer,h0=e0("path"),C;try{if(C=e0("fs"),!C.existsSync||!C.readFileSync)C=null}catch($){}var u4=x1();function v1($,X){return $.require(X)}var M1=!1,C1=!1,d0=!1,Y0="auto",m={},W0={},p4=/^data:application\/json[^,]+base64,/,h=[],d=[];function c0(){if(Y0==="browser")return!0;if(Y0==="node")return!1;return typeof window<"u"&&typeof XMLHttpRequest==="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function l4(){return typeof process==="object"&&process!==null&&typeof process.on==="function"}function i4(){if(typeof process==="object"&&process!==null)return process.version;else return""}function s4(){if(typeof process==="object"&&process!==null)return process.stderr}function n4($){if(typeof process==="object"&&process!==null&&typeof process.exit==="function")return process.exit($)}function T0($){return function(X){for(var Z=0;Z<$.length;Z++){var J=$[Z](X);if(J)return J}return null}}var u0=T0(h);h.push(function($){if($=$.trim(),/^file:/.test($))$=$.replace(/file:\/\/\/(\w:)?/,function(J,Y){return Y?"":"/"});if($ in m)return m[$];var X="";try{if(!C){var Z=new XMLHttpRequest;if(Z.open("GET",$,!1),Z.send(null),Z.readyState===4&&Z.status===200)X=Z.responseText}else if(C.existsSync($))X=C.readFileSync($,"utf8")}catch(J){}return m[$]=X});function g0($,X){if(!$)return X;var Z=h0.dirname($),J=/^\w+:\/\/[^\/]*/.exec(Z),Y=J?J[0]:"",W=Z.slice(Y.length);if(Y&&/^\/\w\:/.test(W))return Y+="/",Y+h0.resolve(Z.slice(Y.length),X).replace(/\\/g,"/");return Y+h0.resolve(Z.slice(Y.length),X)}function t4($){var X;if(c0())try{var Z=new XMLHttpRequest;Z.open("GET",$,!1),Z.send(null),X=Z.readyState===4?Z.responseText:null;var J=Z.getResponseHeader("SourceMap")||Z.getResponseHeader("X-SourceMap");if(J)return J}catch(K){}X=u0($);var Y=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,W,z;while(z=Y.exec(X))W=z;if(!W)return null;return W[1]}var p0=T0(d);d.push(function($){var X=t4($);if(!X)return null;var Z;if(p4.test(X)){var J=X.slice(X.indexOf(",")+1);Z=u4(J,"base64").toString(),X=$}else X=g0($,X),Z=u0(X);if(!Z)return null;return{url:X,map:Z}});function l0($){var X=W0[$.source];if(!X){var Z=p0($.source);if(Z){if(X=W0[$.source]={url:Z.url,map:new c4(Z.map)},X.map.sourcesContent)X.map.sources.forEach(function(Y,W){var z=X.map.sourcesContent[W];if(z){var K=g0(X.url,Y);m[K]=z}})}else X=W0[$.source]={url:null,map:null}}if(X&&X.map&&typeof X.map.originalPositionFor==="function"){var J=X.map.originalPositionFor($);if(J.source!==null)return J.source=g0(X.url,J.source),J}return $}function f1($){var X=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec($);if(X){var Z=l0({source:X[2],line:+X[3],column:X[4]-1});return"eval at "+X[1]+" ("+Z.source+":"+Z.line+":"+(Z.column+1)+")"}if(X=/^eval at ([^(]+) \((.+)\)$/.exec($),X)return"eval at "+X[1]+" ("+f1(X[2])+")";return $}function o4(){var $,X="";if(this.isNative())X="native";else{if($=this.getScriptNameOrSourceURL(),!$&&this.isEval())X=this.getEvalOrigin(),X+=", ";if($)X+=$;else X+="<anonymous>";var Z=this.getLineNumber();if(Z!=null){X+=":"+Z;var J=this.getColumnNumber();if(J)X+=":"+J}}var Y="",W=this.getFunctionName(),z=!0,K=this.isConstructor(),V=!(this.isToplevel()||K);if(V){var _=this.getTypeName();if(_==="[object Object]")_="null";var j=this.getMethodName();if(W){if(_&&W.indexOf(_)!=0)Y+=_+".";if(Y+=W,j&&W.indexOf("."+j)!=W.length-j.length-1)Y+=" [as "+j+"]"}else Y+=_+"."+(j||"<anonymous>")}else if(K)Y+="new "+(W||"<anonymous>");else if(W)Y+=W;else Y+=X,z=!1;if(z)Y+=" ("+X+")";return Y}function S1($){var X={};return Object.getOwnPropertyNames(Object.getPrototypeOf($)).forEach(function(Z){X[Z]=/^(?:is|get)/.test(Z)?function(){return $[Z].call($)}:$[Z]}),X.toString=o4,X}function h1($,X){if(X===void 0)X={nextPosition:null,curPosition:null};if($.isNative())return X.curPosition=null,$;var Z=$.getFileName()||$.getScriptNameOrSourceURL();if(Z){var J=$.getLineNumber(),Y=$.getColumnNumber()-1,W=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,z=W.test(i4())?0:62;if(J===1&&Y>z&&!c0()&&!$.isEval())Y-=z;var K=l0({source:Z,line:J,column:Y});X.curPosition=K,$=S1($);var V=$.getFunctionName;return $.getFunctionName=function(){if(X.nextPosition==null)return V();return X.nextPosition.name||V()},$.getFileName=function(){return K.source},$.getLineNumber=function(){return K.line},$.getColumnNumber=function(){return K.column+1},$.getScriptNameOrSourceURL=function(){return K.source},$}var _=$.isEval()&&$.getEvalOrigin();if(_)return _=f1(_),$=S1($),$.getEvalOrigin=function(){return _},$;return $}function r4($,X){if(d0)m={},W0={};var Z=$.name||"Error",J=$.message||"",Y=Z+": "+J,W={nextPosition:null,curPosition:null},z=[];for(var K=X.length-1;K>=0;K--)z.push(`
    at `+h1(X[K],W)),W.nextPosition=W.curPosition;return W.curPosition=W.nextPosition=null,Y+z.reverse().join("")}function d1($){var X=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec($.stack);if(X){var Z=X[1],J=+X[2],Y=+X[3],W=m[Z];if(!W&&C&&C.existsSync(Z))try{W=C.readFileSync(Z,"utf8")}catch(K){W=""}if(W){var z=W.split(/(?:\r\n|\r|\n)/)[J-1];if(z)return Z+":"+J+`
`+z+`
`+Array(Y).join(" ")+"^"}}return null}function a4($){var X=d1($),Z=s4();if(Z&&Z._handle&&Z._handle.setBlocking)Z._handle.setBlocking(!0);if(X)console.error(),console.error(X);console.error($.stack),n4(1)}function e4(){var $=process.emit;process.emit=function(X){if(X==="uncaughtException"){var Z=arguments[1]&&arguments[1].stack,J=this.listeners(X).length>0;if(Z&&!J)return a4(arguments[1])}return $.apply(this,arguments)}}var $8=h.slice(0),X8=d.slice(0);Z8.wrapCallSite=h1;Z8.getErrorSource=d1;Z8.mapSourcePosition=l0;Z8.retrieveSourceMap=p0;Z8.install=function($){if($=$||{},$.environment){if(Y0=$.environment,["node","browser","auto"].indexOf(Y0)===-1)throw Error("environment "+Y0+" was unknown. Available options are {auto, browser, node}")}if($.retrieveFile){if($.overrideRetrieveFile)h.length=0;h.unshift($.retrieveFile)}if($.retrieveSourceMap){if($.overrideRetrieveSourceMap)d.length=0;d.unshift($.retrieveSourceMap)}if($.hookRequire&&!c0()){var X=v1(m0,"module"),Z=X.prototype._compile;if(!Z.__sourceMapSupport)X.prototype._compile=function(W,z){return m[z]=W,W0[z]=void 0,Z.call(this,W,z)},X.prototype._compile.__sourceMapSupport=!0}if(!d0)d0="emptyCacheBetweenOperations"in $?$.emptyCacheBetweenOperations:!1;if(!M1)M1=!0,Error.prepareStackTrace=r4;if(!C1){var J="handleUncaughtExceptions"in $?$.handleUncaughtExceptions:!0;try{var Y=v1(m0,"worker_threads");if(Y.isMainThread===!1)J=!1}catch(W){}if(J&&l4())C1=!0,e4()}};Z8.resetRetrieveHandlers=function(){h.length=0,d.length=0,h=$8.slice(0),d=X8.slice(0),p0=T0(d),u0=T0(h)}});var $1=($=0)=>(X)=>`\x1B[${X+$}m`,X1=($=0)=>(X)=>`\x1B[${38+$};5;${X}m`,Z1=($=0)=>(X,Z,J)=>`\x1B[${38+$};2;${X};${Z};${J}m`,F={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},B8=Object.keys(F.modifier),U$=Object.keys(F.color),F$=Object.keys(F.bgColor),k8=[...U$,...F$];function O$(){let $=new Map;for(let[X,Z]of Object.entries(F)){for(let[J,Y]of Object.entries(Z))F[J]={open:`\x1B[${Y[0]}m`,close:`\x1B[${Y[1]}m`},Z[J]=F[J],$.set(Y[0],Y[1]);Object.defineProperty(F,X,{value:Z,enumerable:!1})}return Object.defineProperty(F,"codes",{value:$,enumerable:!1}),F.color.close="\x1B[39m",F.bgColor.close="\x1B[49m",F.color.ansi=$1(),F.color.ansi256=X1(),F.color.ansi16m=Z1(),F.bgColor.ansi=$1(10),F.bgColor.ansi256=X1(10),F.bgColor.ansi16m=Z1(10),Object.defineProperties(F,{rgbToAnsi256:{value(X,Z,J){if(X===Z&&Z===J){if(X<8)return 16;if(X>248)return 231;return Math.round((X-8)/247*24)+232}return 16+36*Math.round(X/255*5)+6*Math.round(Z/255*5)+Math.round(J/255*5)},enumerable:!1},hexToRgb:{value(X){let Z=/[a-f\d]{6}|[a-f\d]{3}/i.exec(X.toString(16));if(!Z)return[0,0,0];let[J]=Z;if(J.length===3)J=[...J].map((W)=>W+W).join("");let Y=Number.parseInt(J,16);return[Y>>16&255,Y>>8&255,Y&255]},enumerable:!1},hexToAnsi256:{value:(X)=>F.rgbToAnsi256(...F.hexToRgb(X)),enumerable:!1},ansi256ToAnsi:{value(X){if(X<8)return 30+X;if(X<16)return 90+(X-8);let Z,J,Y;if(X>=232)Z=((X-232)*10+8)/255,J=Z,Y=Z;else{X-=16;let K=X%36;Z=Math.floor(X/36)/5,J=Math.floor(K/6)/5,Y=K%6/5}let W=Math.max(Z,J,Y)*2;if(W===0)return 30;let z=30+(Math.round(Y)<<2|Math.round(J)<<1|Math.round(Z));if(W===2)z+=60;return z},enumerable:!1},rgbToAnsi:{value:(X,Z,J)=>F.ansi256ToAnsi(F.rgbToAnsi256(X,Z,J)),enumerable:!1},hexToAnsi:{value:(X)=>F.ansi256ToAnsi(F.hexToAnsi256(X)),enumerable:!1}}),F}var D$=O$(),x=D$;import k0 from"process";import B$ from"os";import J1 from"tty";function w($,X=globalThis.Deno?globalThis.Deno.args:k0.argv){let Z=$.startsWith("-")?"":$.length===1?"-":"--",J=X.indexOf(Z+$),Y=X.indexOf("--");return J!==-1&&(Y===-1||J<Y)}var{env:O}=k0,j0;if(w("no-color")||w("no-colors")||w("color=false")||w("color=never"))j0=0;else if(w("color")||w("colors")||w("color=true")||w("color=always"))j0=1;function k$(){if("FORCE_COLOR"in O){if(O.FORCE_COLOR==="true")return 1;if(O.FORCE_COLOR==="false")return 0;return O.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(O.FORCE_COLOR,10),3)}}function I$($){if($===0)return!1;return{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function q$($,{streamIsTTY:X,sniffFlags:Z=!0}={}){let J=k$();if(J!==void 0)j0=J;let Y=Z?j0:J;if(Y===0)return 0;if(Z){if(w("color=16m")||w("color=full")||w("color=truecolor"))return 3;if(w("color=256"))return 2}if("TF_BUILD"in O&&"AGENT_NAME"in O)return 1;if($&&!X&&Y===void 0)return 0;let W=Y||0;if(O.TERM==="dumb")return W;if(k0.platform==="win32"){let z=B$.release().split(".");if(Number(z[0])>=10&&Number(z[2])>=10586)return Number(z[2])>=14931?3:2;return 1}if("CI"in O){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((z)=>(z in O)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((z)=>(z in O))||O.CI_NAME==="codeship")return 1;return W}if("TEAMCITY_VERSION"in O)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(O.TEAMCITY_VERSION)?1:0;if(O.COLORTERM==="truecolor")return 3;if(O.TERM==="xterm-kitty")return 3;if(O.TERM==="xterm-ghostty")return 3;if(O.TERM==="wezterm")return 3;if("TERM_PROGRAM"in O){let z=Number.parseInt((O.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(O.TERM_PROGRAM){case"iTerm.app":return z>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(O.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(O.TERM))return 1;if("COLORTERM"in O)return 1;return W}function Y1($,X={}){let Z=q$($,{streamIsTTY:$&&$.isTTY,...X});return I$(Z)}var R$={stdout:Y1({isTTY:J1.isatty(1)}),stderr:Y1({isTTY:J1.isatty(2)})},W1=R$;function z1($,X,Z){let J=$.indexOf(X);if(J===-1)return $;let Y=X.length,W=0,z="";do z+=$.slice(W,J)+X+Z,W=J+Y,J=$.indexOf(X,W);while(J!==-1);return z+=$.slice(W),z}function K1($,X,Z,J){let Y=0,W="";do{let z=$[J-1]==="\r";W+=$.slice(Y,z?J-1:J)+X+(z?`\r
`:`
`)+Z,Y=J+1,J=$.indexOf(`
`,Y)}while(J!==-1);return W+=$.slice(Y),W}var{stdout:V1,stderr:_1}=W1,I0=Symbol("GENERATOR"),p=Symbol("STYLER"),e=Symbol("IS_EMPTY"),j1=["ansi","ansi","ansi256","ansi16m"],l=Object.create(null),P$=($,X={})=>{if(X.level&&!(Number.isInteger(X.level)&&X.level>=0&&X.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let Z=V1?V1.level:0;$.level=X.level===void 0?Z:X.level};var A$=($)=>{let X=(...Z)=>Z.join(" ");return P$(X,$),Object.setPrototypeOf(X,$0.prototype),X};function $0($){return A$($)}Object.setPrototypeOf($0.prototype,Function.prototype);for(let[$,X]of Object.entries(x))l[$]={get(){let Z=G0(this,R0(X.open,X.close,this[p]),this[e]);return Object.defineProperty(this,$,{value:Z}),Z}};l.visible={get(){let $=G0(this,this[p],!0);return Object.defineProperty(this,"visible",{value:$}),$}};var q0=($,X,Z,...J)=>{if($==="rgb"){if(X==="ansi16m")return x[Z].ansi16m(...J);if(X==="ansi256")return x[Z].ansi256(x.rgbToAnsi256(...J));return x[Z].ansi(x.rgbToAnsi(...J))}if($==="hex")return q0("rgb",X,Z,...x.hexToRgb(...J));return x[Z][$](...J)},N$=["rgb","hex","ansi256"];for(let $ of N$){l[$]={get(){let{level:Z}=this;return function(...J){let Y=R0(q0($,j1[Z],"color",...J),x.color.close,this[p]);return G0(this,Y,this[e])}}};let X="bg"+$[0].toUpperCase()+$.slice(1);l[X]={get(){let{level:Z}=this;return function(...J){let Y=R0(q0($,j1[Z],"bgColor",...J),x.bgColor.close,this[p]);return G0(this,Y,this[e])}}}}var w$=Object.defineProperties(()=>{},{...l,level:{enumerable:!0,get(){return this[I0].level},set($){this[I0].level=$}}}),R0=($,X,Z)=>{let J,Y;if(Z===void 0)J=$,Y=X;else J=Z.openAll+$,Y=X+Z.closeAll;return{open:$,close:X,openAll:J,closeAll:Y,parent:Z}},G0=($,X,Z)=>{let J=(...Y)=>L$(J,Y.length===1?""+Y[0]:Y.join(" "));return Object.setPrototypeOf(J,w$),J[I0]=$,J[p]=X,J[e]=Z,J},L$=($,X)=>{if($.level<=0||!X)return $[e]?"":X;let Z=$[p];if(Z===void 0)return X;let{openAll:J,closeAll:Y}=Z;if(X.includes("\x1B"))while(Z!==void 0)X=z1(X,Z.close,Z.open),Z=Z.parent;let W=X.indexOf(`
`);if(W!==-1)X=K1(X,Y,J,W);return J+X+Y};Object.defineProperties($0.prototype,l);var b$=$0(),y8=$0({level:_1?_1.level:0});var v=b$;var m1=T$(g1(),1);m1.default.install();var c1=2;if(Bun.env.DOCKSTAT_LOGGER_FULL_FILE_PATH==="true")c1=1;function _8(){let $=Error().stack?.split(`
`);if($)for(let X=4;X<$.length;X++){let Z=$[X];if(Z){let Y=Z.trim().match(/\(?(.+):(\d+):(\d+)\)?$/);if(Y){if(Y[1])return`${Y[1].split("/").pop()}:${Y[c1]}`}}}return""}var j8={error:v.red.bold,warn:v.yellow.bold,info:v.green.bold,debug:v.blue.bold};function U0($,X,Z,J){let Y=v.magenta(new Date().toISOString().slice(11,19)),W=j8[$]($.toUpperCase()),z=v.blue(_8()),K=J.length>=1?`[${v.cyan(X)}${v.yellow(`@${J.join("@")}`)}`:`[${v.cyan(X)}`;return`${`${Y} ${K} ${z} ${W}]`} : ${v.grey(Z)}`}class u1{name;parents;constructor($,X=[]){this.name=$,this.parents=X}error($){console.error(U0("error",this.name,$,this.parents))}warn($){console.warn(U0("warn",this.name,$,this.parents))}info($){console.info(U0("info",this.name,$,this.parents))}debug($){console.debug(U0("debug",this.name,$,this.parents))}getParents(){return this.parents}getParentsForLoggerChaining(){return[this.name,...this.parents]}addParent($){return this.parents=[$,...this.parents],this.parents}}var p1=u1;function l1($,X){if($.length<=X)return $;return`${$.slice(0,X)}...`}function G8($){if(!$||$.length===0)return"";let X=JSON.stringify($);return l1(X,60)}class z0{logger;tableName;constructor($,X,Z){this.logger=X?X.spawn($):new p1($),this.tableName=Z}child($){return new z0($,this.logger,this.tableName)}forTable($){return new z0($,this.logger,$)}debug($){this.logger.debug($)}info($){this.logger.info($)}warn($){this.logger.warn($)}error($){this.logger.error($)}connection($,X){this.logger.info(`Database ${X}: ${$}`)}query($,X,Z){let J=G8(Z),Y=l1(X.replace(/\s+/g," ").trim(),100),W=J?`${$} | ${Y} | params=${J}`:`${$} | ${Y}`;this.logger.debug(W)}result($,X){this.logger.debug(`${$} | rows=${X}`)}tableCreate($,X){this.logger.debug(`CREATE TABLE ${$} | columns=[${X.join(", ")}]`)}backup($,X){let Z=X?`Backup ${$}: ${X}`:`Backup ${$}`;this.logger.info(Z)}transform($,X){if(X.length===0)return;this.logger.debug(`Transform ${$}: [${X.join(", ")}]`)}parserConfig($,X,Z){let J=[];if($.length>0)J.push(`JSON=[${$.join(",")}]`);if(X.length>0)J.push(`BOOL=[${X.join(",")}]`);if(Z.length>0)J.push(`MODULE=[${Z.join(",")}]`);if(J.length>0)this.logger.debug(`Parser config: ${J.join(" ")}`)}transaction($,X){let Z=X?`Transaction ${$}: ${X}`:`Transaction ${$}`;this.logger.debug(Z)}getBaseLogger(){return this.logger}addParents($){this.logger.addParents($)}getParentsForLoggerChaining(){return this.logger.getParentsForLoggerChaining()}}var i0=new z0("Sqlite");function P($){return i0.child($)}function E($){return`"${$.replace(/"/g,'""')}"`}function s0($){return $.map(E).join(", ")}function F0($){let X=typeof $==="number"?$:$.length;return Array(X).fill("?").join(", ")}function K0($){return $.map((X)=>`${E(X)} = ?`).join(", ")}function n0($){let X=$.toUpperCase().trim();if(!["=","!=","<>","<","<=",">",">=","LIKE","GLOB","IS","IS NOT"].includes(X))throw Error(`Invalid SQL operator: "${$}"`);return X}function O0($,X,Z=!1){if(X.length===0)throw Error("IN clause requires at least one value");let J=E($),Y=F0(X);return{sql:`${J} ${Z?"NOT IN":"IN"} (${Y})`,params:X}}function D0($,X,Z,J=!1){return{sql:`${E($)} ${J?"NOT BETWEEN":"BETWEEN"} ? AND ?`,params:[X,Z]}}var V0=P("transformer");function B0($,X){if(!$||typeof $!=="object")return $;let Z=X?.parser;if(!Z)return $;let J={...$},Y=[];if(Z.JSON&&Z.JSON.length>0)for(let W of Z.JSON){let z=String(W),K=J[z];if(K!==null&&K!==void 0&&typeof K==="string")try{J[z]=JSON.parse(K),Y.push(`JSON:${z}`)}catch{V0.warn(`Failed to parse JSON column: ${z}`)}}if(Z.BOOLEAN&&Z.BOOLEAN.length>0)for(let W of Z.BOOLEAN){let z=String(W),K=J[z];if(K===null||K===void 0)continue;if(typeof K==="boolean")continue;if(typeof K==="number"){J[z]=K===1,Y.push(`BOOL:${z}`);continue}if(typeof K==="string"){let V=K.trim().toLowerCase();if(["1","true","t","yes"].includes(V))J[z]=!0,Y.push(`BOOL:${z}`);else if(["0","false","f","no"].includes(V))J[z]=!1,Y.push(`BOOL:${z}`);else{let _=Number(V);if(!Number.isNaN(_))J[z]=_===1,Y.push(`BOOL:${z}`)}}}if(Z.MODULE&&Object.keys(Z.MODULE).length>0)for(let[W,z]of Object.entries(Z.MODULE)){let K=J[W];if(K!==void 0&&K!==null&&typeof K==="string")try{let _=new Bun.Transpiler(z).transformSync(K),j=new Blob([_],{type:"text/javascript"});J[W]=URL.createObjectURL(j),Y.push(`MODULE:${W}`)}catch(V){V0.warn(`Failed to transpile MODULE column: ${W}`)}}if(Y.length>0)V0.transform("deserialize",Y);return J}function t0($,X){if(!$||!Array.isArray($))return[];return $.map((Z)=>B0(Z,X))}function o0($,X){if(!$||typeof $!=="object")return $;let Z=X?.parser;if(!Z)return $;let J={...$},Y=[];if(Z.JSON&&Z.JSON.length>0)for(let W of Z.JSON){let z=String(W),K=J[z];if(K!==void 0&&K!==null&&typeof K==="object")J[z]=JSON.stringify(K),Y.push(`JSON:${z}`)}if(Z.MODULE&&Object.keys(Z.MODULE).length>0)for(let[W,z]of Object.entries(Z.MODULE)){let K=J[W];if(K!==void 0&&K!==null&&typeof K==="function")try{let V=new Bun.Transpiler(z),_=K;J[W]=V.transformSync(_.toString()),Y.push(`MODULE:${W}`)}catch{V0.warn(`Failed to serialize MODULE column: ${W}`)}}if(Y.length>0)V0.transform("serialize",Y);return J}class r0{state;log=P("query");constructor($,X,Z){this.state={db:$,tableName:X,whereConditions:[],whereParams:[],regexConditions:[],parser:Z},this.log.debug(`QueryBuilder initialized for table: ${X}`)}getDb(){return this.state.db}getTableName(){return this.state.tableName}getParser(){return this.state.parser}reset(){if(this.state.whereConditions=[],this.state.whereParams=[],this.state.regexConditions=[],"orderColumn"in this)this.orderColumn=void 0;if("orderDirection"in this)this.orderDirection="ASC";if("limitValue"in this)this.limitValue=void 0;if("offsetValue"in this)this.offsetValue=void 0;if("selectedColumns"in this)this.selectedColumns=["*"]}resetWhereConditions(){this.state.whereConditions=[],this.state.whereParams=[],this.state.regexConditions=[]}quoteIdentifier($){return E($)}buildWhereClause(){if(this.state.whereConditions.length===0)return["",[]];let $=` WHERE ${this.state.whereConditions.join(" AND ")}`,X=[...this.state.whereParams];return[$,X]}hasRegexConditions(){return this.state.regexConditions.length>0}applyRegexFiltering($){if(!this.hasRegexConditions())return $;return $.filter((X)=>this.state.regexConditions.every(({column:Z,regex:J})=>{let Y=X[String(Z)];if(Y===null||Y===void 0)return!1;return J.test(String(Y))}))}requireWhereClause($){let X=this.state.whereConditions.length>0,Z=this.state.regexConditions.length>0;if(!X&&!Z){let J=`${$} requires at least one WHERE condition. Use where(), whereRaw(), whereIn(), whereOp(), or whereRgx().`;throw this.log.error(J),Error(J)}}transformRowFromDb($){return B0($,{parser:this.state.parser})}transformRowsFromDb($){return t0($,{parser:this.state.parser})}transformRowToDb($){return o0($,{parser:this.state.parser})}}class _0 extends r0{removeExistingCondition($,X){let Z=X?`${$} ${X}`:`${$} `,J=this.state.whereConditions.findIndex((Y)=>Y.startsWith(Z)||Y.startsWith(`"${$}"`));if(J!==-1){if(this.state.whereConditions.splice(J,1),J<this.state.whereParams.length)this.state.whereParams.splice(J,1)}this.state.regexConditions=this.state.regexConditions.filter((Y)=>String(Y.column)!==$)}toSqliteValue($){if(typeof $==="boolean")return $?1:0;return $}where($){for(let[X,Z]of Object.entries($))if(this.removeExistingCondition(X),Z===null||Z===void 0)this.state.whereConditions.push(`${E(X)} IS NULL`);else this.state.whereConditions.push(`${E(X)} = ?`),this.state.whereParams.push(this.toSqliteValue(Z));return this}whereRgx($){for(let[X,Z]of Object.entries($))if(this.removeExistingCondition(X),Z instanceof RegExp)this.state.regexConditions.push({column:X,regex:Z});else if(typeof Z==="string")this.state.regexConditions.push({column:X,regex:new RegExp(Z)});else if(Z!==null&&Z!==void 0)this.state.whereConditions.push(`${E(X)} = ?`),this.state.whereParams.push(Z);return this}whereExpr($,X=[]){if(!$||typeof $!=="string")throw Error("whereExpr: expression must be a non-empty string");if(this.state.whereConditions.push(`(${$})`),X.length>0)this.state.whereParams.push(...X);return this}whereRaw($,X=[]){return this.whereExpr($,X)}whereIn($,X){if(!Array.isArray(X)||X.length===0)throw Error("whereIn: values must be a non-empty array");this.removeExistingCondition(String($),"IN");let{sql:Z,params:J}=O0(String($),X,!1);return this.state.whereConditions.push(Z),this.state.whereParams.push(...J),this}whereNotIn($,X){if(!Array.isArray(X)||X.length===0)throw Error("whereNotIn: values must be a non-empty array");this.removeExistingCondition(String($),"NOT IN");let{sql:Z,params:J}=O0(String($),X,!0);return this.state.whereConditions.push(Z),this.state.whereParams.push(...J),this}whereOp($,X,Z){let J=n0(X),Y=String($);if(Z===null||Z===void 0){if(J==="="||J==="IS")return this.state.whereConditions.push(`${E(Y)} IS NULL`),this;if(J==="!="||J==="<>"||J==="IS NOT")return this.state.whereConditions.push(`${E(Y)} IS NOT NULL`),this}return this.state.whereConditions.push(`${E(Y)} ${J} ?`),this.state.whereParams.push(Z),this}whereBetween($,X,Z){this.removeExistingCondition(String($),"BETWEEN");let{sql:J,params:Y}=D0(String($),X,Z,!1);return this.state.whereConditions.push(J),this.state.whereParams.push(...Y),this}whereNotBetween($,X,Z){this.removeExistingCondition(String($),"NOT BETWEEN");let{sql:J,params:Y}=D0(String($),X,Z,!0);return this.state.whereConditions.push(J),this.state.whereParams.push(...Y),this}whereNull($){return this.removeExistingCondition(String($)),this.state.whereConditions.push(`${E(String($))} IS NULL`),this}whereNotNull($){return this.removeExistingCondition(String($)),this.state.whereConditions.push(`${E(String($))} IS NOT NULL`),this}}class r extends _0{selectedColumns=["*"];orderColumn;orderDirection="ASC";limitValue;offsetValue;selectLog=P("select");select($){return this.selectedColumns=$,this}orderBy($){return this.orderColumn=$,this}desc(){return this.orderDirection="DESC",this}asc(){return this.orderDirection="ASC",this}limit($){if($<0)throw Error("limit: amount must be non-negative");return this.limitValue=$,this}offset($){if($<0)throw Error("offset: start must be non-negative");return this.offsetValue=$,this}buildSelectQuery($=!0){let Z=`SELECT ${this.selectedColumns[0]==="*"?"*":this.selectedColumns.map((W)=>E(W)).join(", ")} FROM ${E(this.getTableName())}`,[J,Y]=this.buildWhereClause();if(Z+=J,$&&!this.hasRegexConditions()){if(this.orderColumn)Z+=` ORDER BY ${E(String(this.orderColumn))} ${this.orderDirection}`;if(this.limitValue!==void 0)Z+=` LIMIT ${this.limitValue}`;else if(this.offsetValue!==void 0)Z+=" LIMIT -1";if(this.offsetValue!==void 0)Z+=` OFFSET ${this.offsetValue}`}return[Z,Y]}applyClientSideOperations($){if(!this.hasRegexConditions())return $;let X=this.applyRegexFiltering($);if(this.orderColumn){let J=String(this.orderColumn),Y=this.orderDirection==="ASC"?1:-1;X.sort((W,z)=>{let K=W[J],V=z[J];if(K===V)return 0;if(K===null||K===void 0)return-Y;if(V===null||V===void 0)return Y;if(K<V)return-Y;return Y})}let Z=this.offsetValue??0;if(this.limitValue!==void 0)X=X.slice(Z,Z+this.limitValue);else if(Z>0)X=X.slice(Z);return X}all(){let $=this.hasRegexConditions(),[X,Z]=this.buildSelectQuery(!$);this.selectLog.query("SELECT",X,Z);let J=this.getDb().prepare(X).all(...Z);this.selectLog.result("SELECT",J.length);let Y=this.transformRowsFromDb(J),W=$?this.applyClientSideOperations(Y):Y;return this.reset(),W}get(){if(!this.hasRegexConditions()&&this.limitValue===void 0){let[X,Z]=this.buildSelectQuery(!0),J=`${X} LIMIT 1`;this.selectLog.query("SELECT (get)",J,Z);let Y=this.getDb().prepare(J).get(...Z);this.selectLog.result("SELECT (get)",Y?1:0);let W=Y?this.transformRowFromDb(Y):null;return this.reset(),W}if(!this.hasRegexConditions()){let[X,Z]=this.buildSelectQuery(!0);this.selectLog.query("SELECT (get)",X,Z);let J=this.getDb().prepare(X).get(...Z);this.selectLog.result("SELECT (get)",J?1:0);let Y=J?this.transformRowFromDb(J):null;return this.reset(),Y}return this.all()[0]??null}first(){let $=this.limitValue;this.limitValue=1;let X=this.get();return this.limitValue=$,X}count(){if(!this.hasRegexConditions()){let[X,Z]=this.buildWhereClause(),J=`SELECT COUNT(*) AS __count FROM ${E(this.getTableName())}${X}`;this.selectLog.query("COUNT",J,Z);let Y=this.getDb().prepare(J).get(...Z);return this.reset(),Y?.__count??0}return this.all().length}exists(){if(!this.hasRegexConditions()){let[$,X]=this.buildWhereClause(),J=`SELECT EXISTS(${`SELECT 1 FROM ${E(this.getTableName())}${$} LIMIT 1`}) AS __exists`;this.selectLog.query("EXISTS",J,X);let Y=this.getDb().prepare(J).get(...X);return this.reset(),Boolean(Y?.__exists)}return this.count()>0}value($){let X=this.first();return X?X[$]:null}pluck($){return this.all().map((Z)=>Z[$])}}class i1 extends r{deleteLog=P("delete");delete(){if(this.requireWhereClause("DELETE"),this.hasRegexConditions())return this.deleteWithRegexConditions();let[$,X]=this.buildWhereClause(),Z=`DELETE FROM ${E(this.getTableName())}${$}`;this.deleteLog.query("DELETE",Z,X);let J=this.getDb().prepare(Z).run(...X);return this.deleteLog.result("DELETE",J.changes),this.reset(),{changes:J.changes}}deleteWithRegexConditions(){let[$,X]=this.buildWhereClause(),Z=`SELECT rowid as _rowid_, * FROM ${E(this.getTableName())}${$}`,J=this.getDb().prepare(Z).all(...X),Y=this.applyRegexFiltering(J);if(Y.length===0)return this.reset(),{changes:0};let W=`DELETE FROM ${E(this.getTableName())} WHERE rowid = ?`,z=this.getDb().prepare(W);this.deleteLog.query("DELETE (regex)",W);let K=0;for(let V of Y){let _=z.run(V._rowid_);K+=_.changes}return this.deleteLog.result("DELETE (regex)",K),this.reset(),{changes:K}}deleteAndGet(){let $=[...this.state.whereConditions],X=[...this.state.whereParams],Z=[...this.state.regexConditions],J=this.all();if(this.state.whereConditions=$,this.state.whereParams=X,this.state.regexConditions=Z,this.delete().changes===0)return[];return J}softDelete($="deleted_at",X=Math.floor(Date.now()/1000)){if(this.requireWhereClause("SOFT DELETE"),this.hasRegexConditions())return this.softDeleteWithRegexConditions($,X);let[Z,J]=this.buildWhereClause(),Y=`UPDATE ${E(this.getTableName())} SET ${E(String($))} = ?${Z}`,W=[X,...J];this.deleteLog.query("SOFT DELETE",Y,W);let z=this.getDb().prepare(Y).run(...W);return this.deleteLog.result("SOFT DELETE",z.changes),this.reset(),{changes:z.changes}}softDeleteWithRegexConditions($,X){let[Z,J]=this.buildWhereClause(),Y=`SELECT rowid as _rowid_, * FROM ${E(this.getTableName())}${Z}`,W=this.getDb().prepare(Y).all(...J),z=this.applyRegexFiltering(W);if(z.length===0)return this.reset(),{changes:0};let K=`UPDATE ${E(this.getTableName())} SET ${E(String($))} = ? WHERE rowid = ?`,V=this.getDb().prepare(K);this.deleteLog.query("SOFT DELETE (regex)",K);let _=0;for(let j of z){let G=V.run(X,j._rowid_);_+=G.changes}return this.deleteLog.result("SOFT DELETE (regex)",_),this.reset(),{changes:_}}restore($="deleted_at"){if(this.requireWhereClause("RESTORE"),this.hasRegexConditions())return this.restoreWithRegexConditions($);let[X,Z]=this.buildWhereClause(),J=`UPDATE ${E(this.getTableName())} SET ${E(String($))} = NULL${X}`;this.deleteLog.query("RESTORE",J,Z);let Y=this.getDb().prepare(J).run(...Z);return this.deleteLog.result("RESTORE",Y.changes),this.reset(),{changes:Y.changes}}restoreWithRegexConditions($){let[X,Z]=this.buildWhereClause(),J=`SELECT rowid as _rowid_, * FROM ${E(this.getTableName())}${X}`,Y=this.getDb().prepare(J).all(...Z),W=this.applyRegexFiltering(Y);if(W.length===0)return this.reset(),{changes:0};let z=`UPDATE ${E(this.getTableName())} SET ${E(String($))} = NULL WHERE rowid = ?`,K=this.getDb().prepare(z);this.deleteLog.query("RESTORE (regex)",z);let V=0;for(let _ of W){let j=K.run(_._rowid_);V+=j.changes}return this.deleteLog.result("RESTORE (regex)",V),this.reset(),{changes:V}}deleteBatch($){if(!Array.isArray($)||$.length===0)throw Error("deleteBatch: conditions must be a non-empty array");let X=this.getDb(),Z=X.transaction((Y)=>{let W=0;for(let z of Y){let K=[],V=[];for(let[Q,T]of Object.entries(z))if(T===null||T===void 0)K.push(`${E(Q)} IS NULL`);else K.push(`${E(Q)} = ?`),V.push(T);if(K.length===0)throw Error("deleteBatch: each delete must have WHERE conditions");let _=` WHERE ${K.join(" AND ")}`,j=`DELETE FROM ${E(this.getTableName())}${_}`,G=X.prepare(j).run(...V);W+=G.changes}return{changes:W}});this.deleteLog.query("DELETE BATCH",`${$.length} deletes`);let J=Z($);return this.deleteLog.result("DELETE BATCH",J.changes),this.reset(),J}truncate(){let $=`DELETE FROM ${E(this.getTableName())}`;this.deleteLog.query("TRUNCATE",$);let X=this.getDb().prepare($).run();return this.deleteLog.result("TRUNCATE",X.changes),this.reset(),{changes:X.changes}}deleteOlderThan($,X){return this.whereOp($,"<",X).delete()}deleteDuplicates($){if(!Array.isArray($)||$.length===0)throw Error("deleteDuplicates: columns must be a non-empty array");let X=$.map((W)=>E(String(W))).join(", "),Z=E(this.getTableName()),J=`
      DELETE FROM ${Z}
      WHERE rowid NOT IN (
        SELECT MIN(rowid)
        FROM ${Z}
        GROUP BY ${X}
      )
    `.trim();this.deleteLog.query("DELETE DUPLICATES",J);let Y=this.getDb().prepare(J).run();return this.deleteLog.result("DELETE DUPLICATES",Y.changes),this.reset(),{changes:Y.changes}}}class s1 extends _0{insertLog=P("insert");getConflictClause($){if(!$)return"INSERT";if($.orIgnore)return"INSERT OR IGNORE";if($.orReplace)return"INSERT OR REPLACE";if($.orAbort)return"INSERT OR ABORT";if($.orFail)return"INSERT OR FAIL";if($.orRollback)return"INSERT OR ROLLBACK";return"INSERT"}extractColumns($){let X=new Set;for(let Z of $)for(let J of Object.keys(Z))X.add(J);return Array.from(X)}buildInsertQuery($,X){let Z=this.getConflictClause(X),J=E(this.getTableName()),Y=s0($),W=F0($);return`${Z} INTO ${J} (${Y}) VALUES (${W})`}executeInsert($,X,Z){let J=Z.map((W)=>X[W]??null),Y=this.getDb().prepare($).run(...J);return{insertId:Y.lastInsertRowid?Number(Y.lastInsertRowid):0,changes:Y.changes}}insert($,X){let Z=Array.isArray($)?$:[$];if(Z.length===0)throw Error("insert: data cannot be empty");let J=Z.map((V)=>this.transformRowToDb(V)),Y=this.extractColumns(J);if(Y.length===0)throw Error("insert: no columns to insert");let W=this.buildInsertQuery(Y,X);this.insertLog.query("INSERT",W);let z=0,K=0;for(let V of J){let _=this.executeInsert(W,V,Y);if(z+=_.changes,_.insertId>0)K=_.insertId}return this.insertLog.result("INSERT",z),this.reset(),{insertId:K,changes:z}}insertOrIgnore($){return this.insert($,{orIgnore:!0})}insertOrReplace($){return this.insert($,{orReplace:!0})}insertOrAbort($){return this.insert($,{orAbort:!0})}insertOrFail($){return this.insert($,{orFail:!0})}insertOrRollback($){return this.insert($,{orRollback:!0})}insertAndGet($,X){let Z=this.insert($,X);if(Z.changes===0||Z.insertId<=0)return null;try{let J=`SELECT * FROM ${E(this.getTableName())} WHERE rowid = ?`,Y=this.getDb().prepare(J).get(Z.insertId);return Y?this.transformRowFromDb(Y):null}catch{return null}}insertBatch($,X){if(!Array.isArray($)||$.length===0)throw Error("insertBatch: rows must be a non-empty array");let Z=this.getDb(),Y=Z.transaction((W)=>{let z=W.map((Q)=>this.transformRowToDb(Q)),K=this.extractColumns(z);if(K.length===0)throw Error("insertBatch: no columns to insert");let V=this.buildInsertQuery(K,X),_=Z.prepare(V);this.insertLog.query("INSERT BATCH",V);let j=0,G=0;for(let Q of z){let T=K.map((q)=>Q[q]??null),k=_.run(...T);if(j+=k.changes,k.lastInsertRowid)G=Number(k.lastInsertRowid)}return{insertId:G,changes:j}})($);return this.insertLog.result("INSERT BATCH",Y.changes),this.reset(),Y}}class n1 extends r{updateLog=P("update");update($){this.requireWhereClause("UPDATE");let X=this.transformRowToDb($),Z=Object.keys(X);if(Z.length===0)throw this.reset(),Error("update: no columns to update");if(this.hasRegexConditions())return this.updateWithRegexConditions(X);let J=K0(Z),[Y,W]=this.buildWhereClause(),z=`UPDATE ${E(this.getTableName())} SET ${J}${Y}`,V=[...Z.map((j)=>X[j]),...W];this.updateLog.query("UPDATE",z,V);let _=this.getDb().prepare(z).run(...V);return this.updateLog.result("UPDATE",_.changes),this.reset(),{changes:_.changes}}updateWithRegexConditions($){let X=Object.keys($),[Z,J]=this.buildWhereClause(),Y=`SELECT rowid as _rowid_, * FROM ${E(this.getTableName())}${Z}`,W=this.getDb().prepare(Y).all(...J),z=this.applyRegexFiltering(W);if(z.length===0)return this.reset(),{changes:0};let K=K0(X),V=`UPDATE ${E(this.getTableName())} SET ${K} WHERE rowid = ?`,_=this.getDb().prepare(V);this.updateLog.query("UPDATE (regex)",V);let j=0,G=X.map((Q)=>$[Q]);for(let Q of z){let T=_.run(...G,Q._rowid_);j+=T.changes}return this.updateLog.result("UPDATE (regex)",j),this.reset(),{changes:j}}upsert($){let X=this.transformRowToDb($),Z=Object.keys(X);if(Z.length===0)throw this.reset(),Error("upsert: no columns to upsert");let J=Z.map((V)=>E(V)).join(", "),Y=Z.map(()=>"?").join(", "),W=Z.map((V)=>X[V]??null),z=`INSERT OR REPLACE INTO ${E(this.getTableName())} (${J}) VALUES (${Y})`;this.updateLog.query("UPSERT",z,W);let K=this.getDb().prepare(z).run(...W);return this.updateLog.result("UPSERT",K.changes),this.reset(),{changes:K.changes}}increment($,X=1){this.requireWhereClause("INCREMENT");let[Z,J]=this.buildWhereClause(),Y=E(String($)),W=`UPDATE ${E(this.getTableName())} SET ${Y} = ${Y} + ?${Z}`,z=[X,...J];this.updateLog.query("INCREMENT",W,z);let K=this.getDb().prepare(W).run(...z);return this.updateLog.result("INCREMENT",K.changes),this.reset(),{changes:K.changes}}decrement($,X=1){return this.increment($,-X)}updateAndGet($){let X=[...this.state.whereConditions],Z=[...this.state.whereParams],J=[...this.state.regexConditions],Y=this.all();if(this.state.whereConditions=X,this.state.whereParams=Z,this.state.regexConditions=J,this.update($).changes===0)return[];return Y}updateBatch($){if(!Array.isArray($)||$.length===0)throw this.reset(),Error("updateBatch: updates must be a non-empty array");let X=this.getDb(),Z=X.transaction((Y)=>{let W=0;for(let{where:z,data:K}of Y){let V=this.transformRowToDb(K),_=Object.keys(V);if(_.length===0)continue;let j=[],G=[];for(let[y,u]of Object.entries(z))if(u===null||u===void 0)j.push(`${E(y)} IS NULL`);else j.push(`${E(y)} = ?`),G.push(u);if(j.length===0)throw Error("updateBatch: each update must have WHERE conditions");let Q=K0(_),T=` WHERE ${j.join(" AND ")}`,k=`UPDATE ${E(this.getTableName())} SET ${Q}${T}`,c=[..._.map((y)=>V[y]??null),...G],I=X.prepare(k).run(...c);W+=I.changes}return{changes:W}});this.updateLog.query("UPDATE BATCH",`${$.length} updates`);let J=Z($);return this.updateLog.result("UPDATE BATCH",J.changes),this.reset(),J}}var D={INTEGER:"INTEGER",TEXT:"TEXT",REAL:"REAL",BLOB:"BLOB",NUMERIC:"NUMERIC",INT:"INT",TINYINT:"TINYINT",SMALLINT:"SMALLINT",MEDIUMINT:"MEDIUMINT",BIGINT:"BIGINT",VARCHAR:"VARCHAR",CHAR:"CHAR",CHARACTER:"CHARACTER",NCHAR:"NCHAR",NVARCHAR:"NVARCHAR",CLOB:"CLOB",DOUBLE:"DOUBLE",FLOAT:"FLOAT",DECIMAL:"DECIMAL",DATE:"DATE",DATETIME:"DATETIME",TIMESTAMP:"TIMESTAMP",TIME:"TIME",BOOLEAN:"BOOLEAN",JSON:"JSON",MODULE:"TEXT"},t1={DATE:($)=>`DATE(${$})`,TIME:($)=>`TIME(${$})`,DATETIME:($)=>`DATETIME(${$})`,JULIANDAY:($)=>`JULIANDAY(${$})`,STRFTIME:($,X)=>`STRFTIME('${$}', ${X})`,LENGTH:($)=>`LENGTH(${$})`,LOWER:($)=>`LOWER(${$})`,UPPER:($)=>`UPPER(${$})`,TRIM:($,X)=>X?`TRIM(${$}, '${X}')`:`TRIM(${$})`,LTRIM:($,X)=>X?`LTRIM(${$}, '${X}')`:`LTRIM(${$})`,RTRIM:($,X)=>X?`RTRIM(${$}, '${X}')`:`RTRIM(${$})`,SUBSTR:($,X,Z)=>Z?`SUBSTR(${$}, ${X}, ${Z})`:`SUBSTR(${$}, ${X})`,SUBSTRING:($,X,Z)=>Z?`SUBSTRING(${$}, ${X}, ${Z})`:`SUBSTRING(${$}, ${X})`,REPLACE:($,X,Z)=>`REPLACE(${$}, '${X}', '${Z}')`,PRINTF:($,...X)=>`PRINTF('${$}', ${X.join(", ")})`,ABS:($)=>`ABS(${$})`,ROUND:($,X)=>X!==void 0?`ROUND(${$}, ${X})`:`ROUND(${$})`,RANDOM:()=>"RANDOM()",MIN:(...$)=>`MIN(${$.join(", ")})`,MAX:(...$)=>`MAX(${$.join(", ")})`,CAST:($,X)=>`CAST(${$} AS ${X})`,TYPEOF:($)=>`TYPEOF(${$})`,COALESCE:(...$)=>`COALESCE(${$.join(", ")})`,IFNULL:($,X)=>`IFNULL(${$}, ${X})`,NULLIF:($,X)=>`NULLIF(${$}, ${X})`,IIF:($,X,Z)=>`IIF(${$}, ${X}, ${Z})`,COUNT:($)=>$?`COUNT(${$})`:"COUNT(*)",SUM:($)=>`SUM(${$})`,AVG:($)=>`AVG(${$})`,TOTAL:($)=>`TOTAL(${$})`,GROUP_CONCAT:($,X)=>X?`GROUP_CONCAT(${$}, '${X}')`:`GROUP_CONCAT(${$})`,JSON:($)=>`JSON(${$})`,JSON_EXTRACT:($,X)=>`JSON_EXTRACT(${$}, '${X}')`,JSON_TYPE:($,X)=>X?`JSON_TYPE(${$}, '${X}')`:`JSON_TYPE(${$})`,JSON_VALID:($)=>`JSON_VALID(${$})`,JSON_ARRAY:(...$)=>`JSON_ARRAY(${$.join(", ")})`,JSON_OBJECT:(...$)=>`JSON_OBJECT(${$.join(", ")})`};var b=($)=>({_type:"expression",expression:$}),S={integer:($)=>({type:$?.size||D.INTEGER,...$}),text:($)=>({type:$?.variant||D.TEXT,length:$?.length,...$}),real:($)=>({type:$?.variant||D.REAL,...$}),blob:($)=>({type:D.BLOB,...$}),numeric:($)=>({type:$?.variant||D.NUMERIC,precision:$?.precision,scale:$?.scale,...$}),date:($)=>({type:D.DATE,...$}),datetime:($)=>({type:D.DATETIME,...$}),timestamp:($)=>({type:$?.asText?D.TEXT:D.INTEGER,...$}),time:($)=>({type:D.TIME,...$}),boolean:($)=>({type:D.BOOLEAN,check:$?.check||"{{COLUMN}} IN (0, 1)",...$}),json:($)=>({type:D.JSON,check:$?.validateJson?"JSON_VALID({{COLUMN}})":$?.check,...$}),varchar:($,X)=>({type:D.VARCHAR,length:$,...X}),char:($,X)=>({type:D.CHAR,length:$,...X}),id:($)=>({type:D.INTEGER,primaryKey:!0,autoincrement:!0,notNull:!0,...$}),uuid:($)=>({type:D.TEXT,length:36,default:$?.generateDefault?b("lower(hex(randomblob(4))) || '-' || lower(hex(randomblob(2))) || '-4' || substr(lower(hex(randomblob(2))),2) || '-' || substr('89ab',abs(random()) % 4 + 1, 1) || substr(lower(hex(randomblob(2))),2) || '-' || lower(hex(randomblob(6)))"):$?.default,...$}),createdAt:($)=>({type:$?.asText?D.DATETIME:D.INTEGER,notNull:!0,default:$?.asText?b("datetime('now')"):b("strftime('%s', 'now')"),...$}),module:($)=>({type:D.MODULE,comment:$?.comment||"A simple Module column, with automatic serilisation and deserilisation using Bun.Transpiler()",...$}),updatedAt:($)=>({type:$?.asText?D.DATETIME:D.INTEGER,default:$?.asText?b("datetime('now')"):b("strftime('%s', 'now')"),...$}),foreignKey:($,X="id",Z)=>({type:Z?.type||D.INTEGER,references:{table:$,column:X,onDelete:Z?.onDelete,onUpdate:Z?.onUpdate},...Z}),enum:($,X)=>({type:D.TEXT,notNull:!0,check:`{{COLUMN}} IN (${$.map((Z)=>`'${Z}'`).join(", ")})`,...X})},H8={now:()=>b("datetime('now')"),currentTime:()=>b("time('now')"),currentDate:()=>b("date('now')"),currentTimestamp:()=>b("datetime('now')"),unixTimestamp:()=>b("strftime('%s', 'now')"),...t1,raw:($)=>b($),null:()=>null,true:()=>1,false:()=>0};var gX=P("db"),mX=P("backup"),cX=P("table");function o1($){return $}function r1($){return $}function a1($){return $}function a($){return $}function e1($){return $}class $${plugin={};meta($){return this.plugin={...this.plugin,...$},this}name($){return this.plugin.name=$,this}description($){return this.plugin.description=$,this}version($){return this.plugin.version=$,this}repository($,X="github"){return this.plugin.repository=$,this.plugin.repoType=X,this}manifest($){return this.plugin.manifest=$,this}author($){return this.plugin.author=$,this}tags($){return this.plugin.tags=$,this}ensureConfig(){if(!this.plugin.config)this.plugin.config={};return this.plugin.config}table($){return this.ensureConfig().table=$,this}actions($){return this.ensureConfig().actions=$,this}apiRoutes($){return this.ensureConfig().apiRoutes=$,this}frontend($){return this.ensureConfig().frontend=$,this}events($){return this.plugin.events=$,this}init($){return this.plugin.init=$,this}config($){return this.plugin.config=$,this}build(){if(!this.plugin.name)throw Error("Plugin name is required");if(!this.plugin.description)throw Error("Plugin description is required");if(!this.plugin.version)throw Error("Plugin version is required");if(!this.plugin.repository)throw Error("Plugin repository is required");if(!this.plugin.manifest)throw Error("Plugin manifest is required");if(!this.plugin.author)throw Error("Plugin author is required");if(!this.plugin.repoType)this.plugin.repoType="github";return this.plugin}}function X$(){return new $$}var E8=o1({getAllMetrics:({table:$})=>$?.select(["*"]).all()??[],getContainerMetrics:({table:$})=>$?.select(["*"]).where({type:"CONTAINER"}).all()??[],getHostMetrics:({table:$})=>$?.select(["*"]).where({type:"HOST"}).all()??[],getMetricsByHost:({table:$,body:X})=>{let Z=X?.hostId;if(!Z)return{error:"hostId is required"};return $?.select(["*"]).where({host_id:Z}).all()??[]},getMetricsByContainer:({table:$,body:X})=>{let Z=X?.containerId;if(!Z)return{error:"containerId is required"};return $?.select(["*"]).where({container_id:Z}).all()??[]},getLatestHostMetrics:({table:$})=>{let X=$?.select(["*"]).where({type:"HOST"}).all()??[],Z=new Map;for(let J of X){let Y=Z.get(J.host_id);if(!Y||J.stored_on>Y.stored_on)Z.set(J.host_id,J)}return Array.from(Z.values())},getLatestContainerMetrics:({table:$})=>{let X=$?.select(["*"]).where({type:"CONTAINER"}).all()??[],Z=new Map;for(let J of X){if(!J.container_id)continue;let Y=Z.get(J.container_id);if(!Y||J.stored_on>Y.stored_on)Z.set(J.container_id,J)}return Array.from(Z.values())},getMetricsSummary:({table:$})=>{let X=$?.select(["*"]).all()??[],Z=X.filter((_)=>_.type==="HOST"),J=X.filter((_)=>_.type==="CONTAINER"),Y=new Set(Z.map((_)=>_.host_id)),W=new Set(J.map((_)=>_.container_id).filter(Boolean)),z=X.map((_)=>_.stored_on).filter(Boolean),K=z.length>0?Math.min(...z):null,V=z.length>0?Math.max(...z):null;return{totalMetrics:X.length,hostMetricsCount:Z.length,containerMetricsCount:J.length,uniqueHostsCount:Y.size,uniqueContainersCount:W.size,oldestTimestamp:K,newestTimestamp:V}},getMetricsInRange:({table:$,body:X})=>{let{startTime:Z,endTime:J,type:Y}=X??{},W=$?.select(["*"]);if(Y)W=W?.where({type:Y});return(W?.all()??[]).filter((K)=>{if(Z&&K.stored_on<Z)return!1;if(J&&K.stored_on>J)return!1;return!0})},deleteOldMetrics:({table:$,body:X,logger:Z})=>{let{olderThanDays:J}=X??{},Y=J??7,W=Date.now()-Y*24*60*60*1000,K=($?.select(["*"]).all()??[]).filter((_)=>_.stored_on<W),V=0;for(let _ of K)try{$?.where({id:_.id}).delete(),V++}catch(j){Z.error(`Failed to delete metric ${_.id}: ${j}`)}return Z.info(`Deleted ${V} metrics older than ${Y} days`),{deletedCount:V,cutoffTime:W}},getDashboardData:({table:$})=>{let X=$?.select(["*"]).all()??[],Z=X.filter((G)=>G.type==="HOST"),J=new Map;for(let G of Z){let Q=J.get(G.host_id);if(!Q||G.stored_on>Q.stored_on)J.set(G.host_id,G)}let Y=X.filter((G)=>G.type==="CONTAINER"),W=new Map;for(let G of Y){if(!G.container_id)continue;let Q=W.get(G.container_id);if(!Q||G.stored_on>Q.stored_on)W.set(G.container_id,G)}let z=Array.from(J.values()),K=z.reduce((G,Q)=>G+(Q.data.host_metrics?.containers??0),0),V=z.reduce((G,Q)=>G+(Q.data.host_metrics?.containersRunning??0),0),_=z.reduce((G,Q)=>G+(Q.data.host_metrics?.containersStopped??0),0),j=z.reduce((G,Q)=>G+(Q.data.host_metrics?.images??0),0);return{hosts:z.map((G)=>({hostId:G.host_id,hostName:G.data.host_metrics?.hostName??"Unknown",os:G.data.host_metrics?.os??"Unknown",architecture:G.data.host_metrics?.architecture??"Unknown",dockerVersion:G.data.host_metrics?.dockerVersion??"Unknown",containers:G.data.host_metrics?.containers??0,containersRunning:G.data.host_metrics?.containersRunning??0,containersStopped:G.data.host_metrics?.containersStopped??0,images:G.data.host_metrics?.images??0,totalMemory:G.data.host_metrics?.totalMemory??0,totalCPU:G.data.host_metrics?.totalCPU??0,lastUpdated:G.stored_on})),containers:Array.from(W.values()).map((G)=>({containerId:G.container_id,hostId:G.host_id,name:G.data.container_metrics?.name??"Unknown",state:G.data.container_metrics?.state??"unknown",cpuUsage:G.data.container_metrics?.cpuUsage??0,memoryUsage:G.data.container_metrics?.memoryUsage??0,memoryLimit:G.data.container_metrics?.memoryLimit??0,networkRx:G.data.container_metrics?.networkRx??0,networkTx:G.data.container_metrics?.networkTx??0,lastUpdated:G.stored_on})),summary:{totalHosts:z.length,totalContainers:K,totalRunning:V,totalStopped:_,totalImages:j,metricsCollected:X.length}}}}),Z$=E8;function J$($){return{container_id:null,docker_client_id:$.docker_client_id,host_id:$.hostId,type:"HOST",data:{host_metrics:$.metrics}}}function Y$($){return{container_id:$.containerId,docker_client_id:$.docker_client_id,host_id:$.hostId,type:"CONTAINER",data:{container_metrics:$.stats}}}var T8=a1({"container:metrics":($,{logger:X,table:Z})=>{try{X.debug(`Saving Container metrics for ${$.containerId}`);let J=Y$($);Z.insert(J),X.info(`Container metrics saved for ${$.stats.name} (ID: ${$.containerId})`)}catch(J){X.error(`Failed to save container metrics: ${J}`)}},"host:metrics":($,{table:X,logger:Z})=>{try{Z.debug(`Saving Host metrics for host ${$.hostId}`);let J=J$($);X.insert(J),Z.info(`Host metrics saved for host ${$.metrics.hostName} (ID: ${$.hostId})`)}catch(J){Z.error(`Failed to save host metrics: ${J}`)}}}),W$=T8;var U8=r1({"/all":{actions:[""],method:"GET"}}),z$=U8;var K$=a({path:"/containers",loaders:[{id:"containerMetrics",apiRoute:"/containers/latest",method:"GET",dataKey:"containerMetrics"}],actions:[{id:"refreshContainers",type:"reload",loaderIds:["containerMetrics"],showLoading:!0}],template:{id:"dockmon-containers",name:"Container Metrics",description:"Detailed container metrics over time",layout:{type:"flex",direction:"column",gap:24},widgets:[{type:"container",props:{layout:"flex",direction:"row",justify:"between",align:"center",className:"flex-wrap gap-4"},children:[{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"\uD83D\uDCE6 Container Metrics",as:"h1",className:"text-2xl font-bold text-primary-text"}},{type:"text",props:{text:"Monitor container resource usage and performance",as:"p",className:"text-sm text-muted-text mt-1"}}]},{type:"button",props:{text:"\uD83D\uDD04 Refresh",variant:"secondary",action:"refreshContainers"}}]},{type:"divider",props:{variant:"default"}},{type:"card",props:{variant:"elevated",className:"overflow-hidden"},children:[{type:"cardBody",props:{className:"p-0"},children:[{type:"table",props:{columns:[{key:"name",title:"Container Name",sortable:!0},{key:"state",title:"State"},{key:"cpuUsage",title:"CPU %",align:"right",sortable:!0},{key:"memoryUsage",title:"Memory Used",align:"right"},{key:"memoryLimit",title:"Memory Limit",align:"right"},{key:"networkRx",title:"Network RX",align:"right"},{key:"networkTx",title:"Network TX",align:"right"}],striped:!0,hoverable:!0,searchable:!0,searchPlaceholder:"Search containers...",size:"md"},bindings:{data:"containerMetrics"}}]}]}],meta:{title:"Container Metrics"}},meta:{title:"Containers",icon:"Container",showInNav:!0,navOrder:3}});var V$=a({path:"/dashboard",loaders:[{id:"dashboardData",apiRoute:"/dashboard",method:"GET",dataKey:"dashboard"},{id:"metricsSummary",apiRoute:"/summary",method:"GET",dataKey:"summary"}],actions:[{id:"refreshData",type:"reload",loaderIds:["dashboardData","metricsSummary"],showLoading:!0},{id:"cleanupOldMetrics",type:"api",apiRoute:"/cleanup",method:"POST",body:{olderThanDays:7},confirm:{message:"Are you sure you want to delete metrics older than 7 days?",confirmText:"Delete",cancelText:"Cancel"},onSuccess:{notify:{message:"Old metrics cleaned up successfully",type:"success"},triggerAction:"refreshData"},onError:{notify:{message:"Failed to cleanup old metrics",type:"error"}}}],template:{id:"dockmon-dashboard",name:"DockMon Dashboard",description:"Overview of Docker metrics and monitoring data",layout:{type:"flex",direction:"column",gap:24},state:{initial:{refreshing:!1}},widgets:[{type:"container",props:{layout:"flex",direction:"row",justify:"between",align:"center",className:"flex-wrap gap-4"},children:[{type:"card",props:{variant:"outlined",size:"sm",className:"min-w-35"},children:[{type:"container",props:{layout:"flex",direction:"row",align:"center",gap:8},children:[{type:"text",props:{text:"\uD83D\uDDA5\uFE0F",className:"text-xl text-secondary-text"}},{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"HOSTS",className:"text-xs text-muted-text uppercase tracking-wide font-medium"}},{type:"text",props:{text:"0",as:"span",className:"text-xl font-semibold text-secondary-text"},bindings:{text:"dashboard.summary.totalHosts"}}]}]}]},{type:"divider",props:{variant:"dotted",className:"w-10! my-auto hidden md:block"}},{type:"card",props:{variant:"outlined",size:"sm",className:"min-w-35"},children:[{type:"container",props:{layout:"flex",direction:"row",align:"center",gap:8},children:[{type:"text",props:{text:"\uD83D\uDCE6",className:"text-xl text-secondary-text"}},{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"CONTAINERS",className:"text-xs text-muted-text uppercase tracking-wide font-medium"}},{type:"text",props:{text:"0",as:"span",className:"text-xl font-semibold text-secondary-text"},bindings:{text:"dashboard.summary.totalContainers"}}]}]}]},{type:"divider",props:{variant:"dotted",className:"w-10! my-auto hidden md:block"}},{type:"card",props:{variant:"outlined",size:"sm",className:"min-w-35"},children:[{type:"container",props:{layout:"flex",direction:"row",align:"center",gap:8},children:[{type:"text",props:{text:"\u25B6\uFE0F",className:"text-xl"}},{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"RUNNING",className:"text-xs text-muted-text uppercase tracking-wide font-medium"}},{type:"text",props:{text:"0",as:"span",className:"text-xl font-semibold text-green-500"},bindings:{text:"dashboard.summary.totalRunning"}}]}]}]},{type:"divider",props:{variant:"dotted",className:"w-10! my-auto hidden md:block"}},{type:"card",props:{variant:"outlined",size:"sm",className:"min-w-35"},children:[{type:"container",props:{layout:"flex",direction:"row",align:"center",gap:8},children:[{type:"text",props:{text:"\u23F9\uFE0F",className:"text-xl"}},{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"STOPPED",className:"text-xs text-muted-text uppercase tracking-wide font-medium"}},{type:"text",props:{text:"0",as:"span",className:"text-xl font-semibold text-red-500"},bindings:{text:"dashboard.summary.totalStopped"}}]}]}]},{type:"divider",props:{variant:"dotted",className:"w-10! my-auto hidden md:block"}},{type:"card",props:{variant:"outlined",size:"sm",className:"min-w-35"},children:[{type:"container",props:{layout:"flex",direction:"row",align:"center",gap:8},children:[{type:"text",props:{text:"\uD83D\uDDBC\uFE0F",className:"text-xl text-secondary-text"}},{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"IMAGES",className:"text-xs text-muted-text uppercase tracking-wide font-medium"}},{type:"text",props:{text:"0",as:"span",className:"text-xl font-semibold text-secondary-text"},bindings:{text:"dashboard.summary.totalImages"}}]}]}]},{type:"divider",props:{variant:"dotted",className:"w-10! my-auto hidden md:block"}},{type:"card",props:{variant:"outlined",size:"sm",className:"min-w-35"},children:[{type:"container",props:{layout:"flex",direction:"row",align:"center",gap:8},children:[{type:"text",props:{text:"\uD83D\uDCCA",className:"text-xl text-secondary-text"}},{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"METRICS",className:"text-xs text-muted-text uppercase tracking-wide font-medium"}},{type:"text",props:{text:"0",as:"span",className:"text-xl font-semibold text-secondary-text"},bindings:{text:"dashboard.summary.metricsCollected"}}]}]}]}]},{type:"divider",props:{variant:"default",className:"my-2"}},{type:"card",props:{variant:"elevated",size:"sm",className:"p-4"},children:[{type:"container",props:{layout:"flex",direction:"row",justify:"between",align:"center",className:"flex-wrap gap-4"},children:[{type:"text",props:{text:"Quick Actions",as:"h3",className:"text-lg font-semibold text-primary-text"}},{type:"container",props:{layout:"flex",direction:"row",gap:12},children:[{type:"button",props:{text:"\uD83D\uDD04 Refresh Data",variant:"secondary",action:"refreshData"}},{type:"button",props:{text:"\uD83D\uDDD1\uFE0F Cleanup Old Data",variant:"outline",action:"cleanupOldMetrics"}}]}]}]},{type:"container",props:{layout:"grid",columns:2,gap:24,className:"grid-cols-1 lg:grid-cols-2"},children:[{type:"card",props:{variant:"elevated",className:"overflow-hidden"},children:[{type:"cardHeader",props:{text:"\uD83D\uDDA5\uFE0F Docker Hosts",className:"bg-surface-elevated border-b border-border-default px-4 py-3"}},{type:"cardBody",props:{className:"p-0"},children:[{type:"table",props:{columns:[{key:"hostName",title:"Host",sortable:!0},{key:"os",title:"OS"},{key:"dockerVersion",title:"Docker"},{key:"containers",title:"Containers",align:"center"},{key:"containersRunning",title:"Running",align:"center"}],striped:!0,hoverable:!0,searchable:!0,searchPlaceholder:"Search hosts...",size:"sm"},bindings:{data:"dashboard.hosts"}}]}]},{type:"card",props:{variant:"elevated",className:"overflow-hidden"},children:[{type:"cardHeader",props:{text:"\uD83D\uDCE6 Container Metrics",className:"bg-surface-elevated border-b border-border-default px-4 py-3"}},{type:"cardBody",props:{className:"p-0"},children:[{type:"table",props:{columns:[{key:"name",title:"Container",sortable:!0},{key:"state",title:"State"},{key:"cpuUsage",title:"CPU %",align:"right"},{key:"memoryUsage",title:"Memory",align:"right"}],striped:!0,hoverable:!0,searchable:!0,searchPlaceholder:"Search containers...",size:"sm"},bindings:{data:"dashboard.containers"}}]}]}]},{type:"divider",props:{variant:"default",label:"Detailed Metrics",className:"my-4"}},{type:"card",props:{variant:"default",className:"overflow-hidden"},children:[{type:"cardHeader",props:{text:"\uD83D\uDCC8 All Container Metrics",className:"bg-surface-default border-b border-border-default px-4 py-3"}},{type:"cardBody",props:{className:"p-0"},children:[{type:"table",props:{columns:[{key:"name",title:"Container Name",sortable:!0},{key:"state",title:"State"},{key:"cpuUsage",title:"CPU %",align:"right",sortable:!0},{key:"memoryUsage",title:"Memory Used",align:"right"},{key:"memoryLimit",title:"Memory Limit",align:"right"},{key:"networkRx",title:"Net RX",align:"right"},{key:"networkTx",title:"Net TX",align:"right"}],striped:!0,hoverable:!0,searchable:!0,searchPlaceholder:"Search all containers...",size:"md"},bindings:{data:"dashboard.containers"}}]}]}],meta:{title:"DockMon Dashboard",description:"Monitor Docker hosts and containers"}},meta:{title:"Dashboard",icon:"LayoutDashboard",showInNav:!0,navOrder:1}});var _$=a({path:"/hosts",loaders:[{id:"hostMetrics",apiRoute:"/hosts/latest",method:"GET",dataKey:"hostMetrics"}],actions:[{id:"refreshHosts",type:"reload",loaderIds:["hostMetrics"],showLoading:!0}],template:{id:"dockmon-hosts",name:"Host Metrics",description:"Detailed host metrics over time",layout:{type:"flex",direction:"column",gap:24},widgets:[{type:"container",props:{layout:"flex",direction:"row",justify:"between",align:"center",className:"flex-wrap gap-4"},children:[{type:"container",props:{layout:"flex",direction:"column"},children:[{type:"text",props:{text:"\uD83D\uDDA5\uFE0F Host Metrics",as:"h1",className:"text-2xl font-bold text-primary-text"}},{type:"text",props:{text:"Monitor your Docker hosts performance and resource usage",as:"p",className:"text-sm text-muted-text mt-1"}}]},{type:"button",props:{text:"\uD83D\uDD04 Refresh",variant:"secondary",action:"refreshHosts"}}]},{type:"divider",props:{variant:"default"}},{type:"card",props:{variant:"elevated",className:"overflow-hidden"},children:[{type:"cardBody",props:{className:"p-0"},children:[{type:"table",props:{columns:[{key:"hostName",title:"Host Name",sortable:!0},{key:"os",title:"Operating System"},{key:"architecture",title:"Architecture"},{key:"dockerVersion",title:"Docker Version"},{key:"containers",title:"Total",align:"center"},{key:"containersRunning",title:"Running",align:"center"},{key:"containersStopped",title:"Stopped",align:"center"},{key:"images",title:"Images",align:"center"},{key:"totalMemory",title:"Total Memory",align:"right"},{key:"totalCPU",title:"CPUs",align:"center"}],striped:!0,hoverable:!0,searchable:!0,searchPlaceholder:"Search hosts...",size:"md"},bindings:{data:"hostMetrics"}}]}]}],meta:{title:"Host Metrics"}},meta:{title:"Hosts",icon:"Server",showInNav:!0,navOrder:2}});var F8=e1([V$,_$,K$]),j$=F8;var O8=X$().name("DockMon").version("1.0.0").description(`DockMon is the default Metrics collector for DockStat. It works by listening on 'container:metrics' and 'host:metrics' events emitted by the DockerClientManager.

		It stores the metrics in a database and provides a REST API to query the metrics. These endpoints can also be used by other Plugins`).tags(["metrics","default"]).repository("its4nik/dockstat:dev/apps/dockstore","github").manifest("src/content/plugins/dockmon").author({name:"Its4Nik",email:"dockstat@itsnik.de",license:"MIT",website:"https://itsnik.de"}).table({columns:{id:S.id(),type:S.enum(["CONTAINER","HOST"]),host_id:S.integer(),docker_client_id:S.integer({notNull:!1}),container_id:S.text({notNull:!1}),data:S.json(),stored_on:S.createdAt()},parser:{JSON:["data"]},name:"dockmon"}).actions(Z$).events(W$).apiRoutes(z$).frontend({routes:j$,globalState:{initial:{autoRefresh:!0,refreshInterval:30000}}}).build(),O9=O8;export{O9 as default};

//# debugId=351525A7A87F020464756E2164756E21
